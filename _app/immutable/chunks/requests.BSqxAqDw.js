var ne=Object.defineProperty;var re=(n,e,t)=>e in n?ne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var O=(n,e,t)=>(re(n,typeof e!="symbol"?e+"":e,t),t);import{ad as L,s as se,y as W,n as F,d as k,r as ae,E as w,ah as T,l as y,i as ie,b as $,ai as I,c as _,e as C,g as oe,h as E,j as ce,k as V,ae as ue,o as le,H as de}from"./scheduler.O70vblwn.js";import{g as j,d as G,a as fe}from"./util.PhYJd6D_.js";import{S as he,i as be}from"./index.CxlHvX_L.js";import{d as me,w as M,r as S}from"./index.CfX3WRHs.js";import{g as x,b as z}from"./entry.BhQAmeLy.js";import{u as B,D as pe,c as ge}from"./stores.DhXFRU3T.js";import{c as ve}from"./config.BXQ2CM0i.js";function ee(n){return Object.keys(n).reduce((e,t)=>n[t]===void 0?e:e+`${t}:${n[t]};`,"")}function P(n){return n?!0:void 0}ee({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function te(n,...e){const t={};for(const r of Object.keys(n))e.includes(r)||(t[r]=n[r]);return t}function A(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=r)}return e}function K(n){function e(t){return t(n),()=>{}}return{subscribe:e}}const q=n=>new Proxy(n,{get(e,t,r){return Reflect.get(e,t,r)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}}),N=n=>typeof n=="function";H("empty");function H(n,e){const{stores:t,action:r,returned:s}=e??{},a=(()=>{if(t&&s)return me(t,l=>{const c=s(l);if(N(c)){const u=(...h)=>q(A({...c(...h),[`data-melt-${n}`]:"",action:r??v}));return u.action=r??v,u}return q(A({...c,[`data-melt-${n}`]:"",action:r??v}))});{const l=s,c=l==null?void 0:l();if(N(c)){const u=(...h)=>q(A({...c(...h),[`data-melt-${n}`]:"",action:r??v}));return u.action=r??v,K(u)}return K(q(A({...c,[`data-melt-${n}`]:"",action:r??v})))}})(),o=r??(()=>{});return o.subscribe=a.subscribe,o}function ke(n){const e=a=>a?`${n}-${a}`:n,t=a=>`data-melt-${n}${a?`-${a}`:""}`,r=a=>`[data-melt-${n}${a?`-${a}`:""}]`;return{name:e,attribute:t,selector:r,getEl:a=>document.querySelector(r(a))}}function ye(n){return n instanceof HTMLElement}function $e(...n){return(...e)=>{for(const t of n)typeof t=="function"&&t(...e)}}function v(){}function J(n,e,t,r){const s=Array.isArray(e)?e:[e];if(typeof t=="function"){const a=Ee(o=>t(o));return s.forEach(o=>n.addEventListener(o,a,r)),()=>{s.forEach(o=>n.removeEventListener(o,a,r))}}return()=>void 0}function _e(n){const e=n.currentTarget;if(!ye(e))return null;const t=new CustomEvent(`m-${n.type}`,{detail:{originalEvent:n},cancelable:!0});return e.dispatchEvent(t),t}function Ee(n){return e=>{const t=_e(e);if(!(t!=null&&t.defaultPrevented))return n(e)}}function R(n){return{...n,get:()=>L(n)}}R.writable=function(n){const e=M(n);let t=n;return{subscribe:e.subscribe,set(r){e.set(r),t=r},update(r){const s=r(t);e.set(s),t=s},get(){return t}}};R.derived=function(n,e){const t=new Map,r=()=>{const a=Array.isArray(n)?n.map(o=>o.get()):n.get();return e(a)};return{get:r,subscribe:a=>{const o=[];return(Array.isArray(n)?n:[n]).forEach(c=>{o.push(c.subscribe(()=>{a(r())}))}),a(r()),t.set(a,o),()=>{const c=t.get(a);if(c)for(const u of c)u();t.delete(a)}}}};const we=(n,e)=>{const t=R(n),r=(a,o)=>{t.update(l=>{const c=a(l);let u=c;return e&&(u=e({curr:l,next:c})),o==null||o(u),u})};return{...t,update:r,set:a=>{r(()=>a)}}},X={ENTER:"Enter",SPACE:" "};function Te(n){const e={};return Object.keys(n).forEach(t=>{const r=t,s=n[r];e[r]=R(M(s))}),e}S(!1),S(!1),S(void 0),S(void 0);const Ce={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...te(Ce,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Se={defaultChecked:!1,disabled:!1,required:!1,name:"",value:""},{name:Q}=ke("switch");function Ae(n){const e={...Se,...n},t=Te(te(e,"checked")),{disabled:r,required:s,name:a,value:o}=t,l=e.checked??M(e.defaultChecked),c=we(l,e==null?void 0:e.onCheckedChange);function u(){r.get()||c.update(d=>!d)}const h=H(Q(),{stores:[c,r,s],returned:([d,b,i])=>({"data-disabled":P(b),disabled:P(b),"data-state":d?"checked":"unchecked",type:"button",role:"switch","aria-checked":d?"true":"false","aria-required":i?"true":void 0}),action(d){return{destroy:$e(J(d,"click",()=>{u()}),J(d,"keydown",i=>{i.key!==X.ENTER&&i.key!==X.SPACE||(i.preventDefault(),u())}))}}}),m=H(Q("input"),{stores:[c,a,s,r,o],returned:([d,b,i,f,g])=>({type:"checkbox","aria-hidden":!0,hidden:!0,tabindex:-1,name:b,value:g,checked:d,required:i,disabled:P(f),style:ee({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"})})});return{elements:{root:h,input:m},states:{checked:c},options:t}}function qe(n){let e,t,r,s,a,o,l,c,u,h=[n[3],{class:"relative h-6 rounded-full bg-slate-300 dark:bg-slate-600 transition-colors data-[state=checked]:dark:bg-emerald-800 data-[state=checked]:bg-emerald-500"},{id:"airplane-mode"},{"aria-labelledby":"airplane-mode-label"}],m={};for(let i=0;i<h.length;i+=1)m=W(m,h[i]);let d=[n[4]],b={};for(let i=0;i<d.length;i+=1)b=W(b,d[i]);return{c(){e=E("form"),t=E("div"),r=E("button"),s=E("span"),a=ce(),o=E("input"),this.h()},l(i){e=_(i,"FORM",{class:!0,title:!0});var f=C(e);t=_(f,"DIV",{class:!0});var g=C(t);r=_(g,"BUTTON",{class:!0,id:!0,"aria-labelledby":!0});var U=C(r);s=_(U,"SPAN",{class:!0}),C(s).forEach(k),U.forEach(k),a=oe(g),o=_(g,"INPUT",{}),g.forEach(k),f.forEach(k),this.h()},h(){y(s,"class","thumb block rounded-full dark:bg-slate-900 bg-white transition svelte-q2ooe2"),w(r,m),T(r,"svelte-q2ooe2",!0),w(o,b),T(o,"svelte-q2ooe2",!0),y(t,"class","flex items-center cursor-pointer"),y(e,"class",""),y(e,"title",l=n[1]??`click to ${n[2]?"disable":"enable"}`)},m(i,f){ie(i,e,f),$(e,t),$(t,r),$(r,s),r.autofocus&&r.focus(),$(t,a),$(t,o),o.autofocus&&o.focus(),c||(u=[I(n[3].action(r)),I(n[4].action(o))],c=!0)},p(i,[f]){w(r,m=j(h,[f&8&&i[3],{class:"relative h-6 rounded-full bg-slate-300 dark:bg-slate-600 transition-colors data-[state=checked]:dark:bg-emerald-800 data-[state=checked]:bg-emerald-500"},{id:"airplane-mode"},{"aria-labelledby":"airplane-mode-label"}])),T(r,"svelte-q2ooe2",!0),w(o,b=j(d,[f&16&&i[4]])),T(o,"svelte-q2ooe2",!0),f&6&&l!==(l=i[1]??`click to ${i[2]?"disable":"enable"}`)&&y(e,"title",l)},i:F,o:F,d(i){i&&k(e),c=!1,ae(u)}}}function De(n,e,t){let r,s=F,a=()=>(s(),s=de(u,i=>t(2,r=i)),u),o,l;n.$$.on_destroy.push(()=>s());const c=({curr:i,next:f})=>(b("change",f),f);let{isChecked:u=M(!1)}=e;a();let{title:h=void 0}=e,{elements:{root:m,input:d}}=Ae({onCheckedChange:c,checked:u});V(n,m,i=>t(3,o=i)),V(n,d,i=>t(4,l=i));const b=ue();return le(()=>{}),n.$$set=i=>{"isChecked"in i&&a(t(0,u=i.isChecked)),"title"in i&&t(1,h=i.title)},[u,h,r,o,l,m,d]}class Ve extends he{constructor(e){super(),be(this,e,De,qe,se,{isChecked:0,title:1})}}function Me(n,e="GET",t,r){r||(r={}),t&&(r["content-type"]="application/json");const s={method:e,headers:r,body:JSON.stringify(t)};return fetch(n,s)}async function p(n,e="GET",t,r){const s=await Me(n,e,t,r),a={ok:s.ok,code:s.status};if(s.ok)try{a.data=await s.json()}catch{}else{a.err=await s.text();try{a.errTyped=JSON.parse(a.err)}catch{}}return a}class Re{constructor(e,t,r){O(this,"endpoint");O(this,"headers");this.endpoint=e,this.headers={...r},t&&(this.headers.authorization=`Bearer ${t}`)}getInfo(){return p(this.endpoint,void 0,void 0,this.headers)}request(e,t="GET",r,s=this.headers){return p(`${this.endpoint}${e.startsWith("/")?e:`/${e}`}`,t,r,{...this.headers,...s})}schema(e){return p(`${this.endpoint}/schemas/${e}`,void 0,void 0,this.headers)}pluginConfig(e){return p(`${this.endpoint}/schemas/plugins/${e}`,void 0,void 0,this.headers)}async findAll(e,t={},r=""){return p(`${this.endpoint}${r}/${e}?size=${ve}&sort_by=updated_at`,void 0,void 0,this.headers)}findRecord(e,t,r=""){return p(`${this.endpoint}${r}/${e}/${t}`,void 0,void 0,this.headers)}createRecord(e,t,r=""){return p(`${this.endpoint}${r}/${e}`,"POST",t,this.headers)}updateRecord(e,t,r,s=""){return p(`${this.endpoint}${s}/${e}/${t}`,"PATCH",r,this.headers)}deleteRecord(e,t,r=""){return p(`${this.endpoint}${r}/${e}/${t}`,"DELETE",void 0,this.headers)}}let D;const Y=3;let Z=async n=>{var r,s;n&&n>Y&&fe({message:`Failed to return apiService after ${Y} retries`});const e=L(B);if(e&&pe.now().toUnixInteger()>e.expires&&(B.set(void 0),x(`${z}/login?auto=true`)),D)return D;const t=(r=L(ge))==null?void 0:r.config;return t?!e&&((s=t.oidc)!=null&&s.enabled)?(x(`${z}/login`),await G(200),await Z(n?n+1:0)):(D=new Re(t.kongApi.endpoint,e==null?void 0:e.token,t.kongApi.requestHeaders),D):(await G(200),await Z(n?n+1:0))};export{Ve as T,Z as a};
