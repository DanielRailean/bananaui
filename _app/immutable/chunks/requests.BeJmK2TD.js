var Z=Object.defineProperty;var ee=(n,e,t)=>e in n?Z(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var P=(n,e,t)=>(ee(n,typeof e!="symbol"?e+"":e,t),t);import{ah as L,s as te,y as U,e as v,a as ne,c as y,b as w,f as E,g as ae,l as _,C,ab as F,i as se,h as A,ac as I,n as M,r as re,k as V,ae as ie,o as oe,H as ce}from"./scheduler.JoI2qTf6.js";import{g as B,d as G}from"./util.BWOeR5ma.js";import{S as de,i as ue}from"./index.n1M6Kr9c.js";import{d as le,w as O,a as T}from"./index.DfNN-vQC.js";import{g as fe,b as he}from"./entry.Cz0haAYs.js";import{a as be,u as pe,c as me}from"./stores.CYcGuEJh.js";import{c as ge}from"./config.Dmd9iIHM.js";function Q(n){return Object.keys(n).reduce((e,t)=>n[t]===void 0?e:e+`${t}:${n[t]};`,"")}function q(n){return n?!0:void 0}Q({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Y(n,...e){const t={};for(const a of Object.keys(n))e.includes(a)||(t[a]=n[a]);return t}function $(n){const e={};for(const t in n){const a=n[t];a!==void 0&&(e[t]=a)}return e}function N(n){function e(t){return t(n),()=>{}}return{subscribe:e}}const S=n=>new Proxy(n,{get(e,t,a){return Reflect.get(e,t,a)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}}),K=n=>typeof n=="function";W("empty");function W(n,e){const{stores:t,action:a,returned:r}=e??{},s=(()=>{if(t&&r)return le(t,u=>{const c=r(u);if(K(c)){const d=(...h)=>S($({...c(...h),[`data-melt-${n}`]:"",action:a??k}));return d.action=a??k,d}return S($({...c,[`data-melt-${n}`]:"",action:a??k}))});{const u=r,c=u==null?void 0:u();if(K(c)){const d=(...h)=>S($({...c(...h),[`data-melt-${n}`]:"",action:a??k}));return d.action=a??k,N(d)}return N(S($({...c,[`data-melt-${n}`]:"",action:a??k})))}})(),o=a??(()=>{});return o.subscribe=s.subscribe,o}function ke(n){const e=s=>s?`${n}-${s}`:n,t=s=>`data-melt-${n}${s?`-${s}`:""}`,a=s=>`[data-melt-${n}${s?`-${s}`:""}]`;return{name:e,attribute:t,selector:a,getEl:s=>document.querySelector(a(s))}}function ve(n){return n instanceof HTMLElement}function ye(...n){return(...e)=>{for(const t of n)typeof t=="function"&&t(...e)}}function k(){}function x(n,e,t,a){const r=Array.isArray(e)?e:[e];if(typeof t=="function"){const s=_e(o=>t(o));return r.forEach(o=>n.addEventListener(o,s,a)),()=>{r.forEach(o=>n.removeEventListener(o,s,a))}}return()=>void 0}function Ee(n){const e=n.currentTarget;if(!ve(e))return null;const t=new CustomEvent(`m-${n.type}`,{detail:{originalEvent:n},cancelable:!0});return e.dispatchEvent(t),t}function _e(n){return e=>{const t=Ee(e);if(!(t!=null&&t.defaultPrevented))return n(e)}}function D(n){return{...n,get:()=>L(n)}}D.writable=function(n){const e=O(n);let t=n;return{subscribe:e.subscribe,set(a){e.set(a),t=a},update(a){const r=a(t);e.set(r),t=r},get(){return t}}};D.derived=function(n,e){const t=new Map,a=()=>{const s=Array.isArray(n)?n.map(o=>o.get()):n.get();return e(s)};return{get:a,subscribe:s=>{const o=[];return(Array.isArray(n)?n:[n]).forEach(c=>{o.push(c.subscribe(()=>{s(a())}))}),s(a()),t.set(s,o),()=>{const c=t.get(s);if(c)for(const d of c)d();t.delete(s)}}}};const Ae=(n,e)=>{const t=D(n),a=(s,o)=>{t.update(u=>{const c=s(u);let d=c;return e&&(d=e({curr:u,next:c})),o==null||o(d),d})};return{...t,update:a,set:s=>{a(()=>s)}}},j={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function we(n){const e={};return Object.keys(n).forEach(t=>{const a=t,r=n[a];e[a]=D(O(r))}),e}T(!1),T(!1),T(void 0),T(void 0);const Ce={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Y(Ce,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Fe={defaultChecked:!1,disabled:!1,required:!1,name:"",value:""},{name:z}=ke("switch");function Te(n){const e={...Fe,...n},t=we(Y(e,"checked")),{disabled:a,required:r,name:s,value:o}=t,u=e.checked??O(e.defaultChecked),c=Ae(u,e==null?void 0:e.onCheckedChange);function d(){a.get()||c.update(l=>!l)}const h=W(z(),{stores:[c,a,r],returned:([l,b,i])=>({"data-disabled":q(b),disabled:q(b),"data-state":l?"checked":"unchecked",type:"button",role:"switch","aria-checked":l?"true":"false","aria-required":i?"true":void 0}),action(l){return{destroy:ye(x(l,"click",()=>{d()}),x(l,"keydown",i=>{i.key!==j.ENTER&&i.key!==j.SPACE||(i.preventDefault(),d())}))}}}),p=W(z("input"),{stores:[c,s,r,a,o],returned:([l,b,i,f,g])=>({type:"checkbox","aria-hidden":!0,hidden:!0,tabindex:-1,name:b,value:g,checked:l,required:i,disabled:q(f),style:Q({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"})})});return{elements:{root:h,input:p},states:{checked:c},options:t}}function $e(n){let e,t,a,r,s,o,u,c,d,h=[n[3],{class:"relative h-6 rounded-full bg-slate-300 dark:bg-slate-600 transition-colors data-[state=checked]:dark:bg-emerald-800 data-[state=checked]:bg-emerald-500"},{id:"airplane-mode"},{"aria-labelledby":"airplane-mode-label"}],p={};for(let i=0;i<h.length;i+=1)p=U(p,h[i]);let l=[n[4]],b={};for(let i=0;i<l.length;i+=1)b=U(b,l[i]);return{c(){e=v("form"),t=v("div"),a=v("button"),r=v("span"),s=ne(),o=v("input"),this.h()},l(i){e=y(i,"FORM",{class:!0,title:!0});var f=w(e);t=y(f,"DIV",{class:!0});var g=w(t);a=y(g,"BUTTON",{class:!0,id:!0,"aria-labelledby":!0});var H=w(a);r=y(H,"SPAN",{class:!0}),w(r).forEach(E),H.forEach(E),s=ae(g),o=y(g,"INPUT",{}),g.forEach(E),f.forEach(E),this.h()},h(){_(r,"class","thumb block rounded-full dark:bg-slate-900 bg-white transition svelte-q2ooe2"),C(a,p),F(a,"svelte-q2ooe2",!0),C(o,b),F(o,"svelte-q2ooe2",!0),_(t,"class","flex items-center cursor-pointer "),_(e,"class",""),_(e,"title",u=n[1]??`click to ${n[2]?"disable":"enable"}`)},m(i,f){se(i,e,f),A(e,t),A(t,a),A(a,r),a.autofocus&&a.focus(),A(t,s),A(t,o),o.autofocus&&o.focus(),c||(d=[I(n[3].action(a)),I(n[4].action(o))],c=!0)},p(i,[f]){C(a,p=B(h,[f&8&&i[3],{class:"relative h-6 rounded-full bg-slate-300 dark:bg-slate-600 transition-colors data-[state=checked]:dark:bg-emerald-800 data-[state=checked]:bg-emerald-500"},{id:"airplane-mode"},{"aria-labelledby":"airplane-mode-label"}])),F(a,"svelte-q2ooe2",!0),C(o,b=B(l,[f&16&&i[4]])),F(o,"svelte-q2ooe2",!0),f&6&&u!==(u=i[1]??`click to ${i[2]?"disable":"enable"}`)&&_(e,"title",u)},i:M,o:M,d(i){i&&E(e),c=!1,re(d)}}}function Se(n,e,t){let a,r=M,s=()=>(r(),r=ce(d,i=>t(2,a=i)),d),o,u;n.$$.on_destroy.push(()=>r());const c=({curr:i,next:f})=>(b("change",f),f);let{isChecked:d=O(!1)}=e;s();let{title:h=void 0}=e,{elements:{root:p,input:l}}=Te({onCheckedChange:c,checked:d});V(n,p,i=>t(3,o=i)),V(n,l,i=>t(4,u=i));const b=ie();return oe(()=>{}),n.$$set=i=>{"isChecked"in i&&s(t(0,d=i.isChecked)),"title"in i&&t(1,h=i.title)},[d,h,a,o,u,p,l]}class Ie extends de{constructor(e){super(),ue(this,e,Se,$e,te,{isChecked:0,title:1})}}function Re(n,e="GET",t,a){a||(a={}),t&&(a["content-type"]="application/json");const r={method:e,headers:a,body:JSON.stringify(t)};return fetch(n,r)}async function m(n,e="GET",t,a){const r=await Re(n,e,t,a),s={ok:r.ok,code:r.status};if(r.ok)try{s.data=await r.json()}catch{}else{s.err=await r.text();try{s.errTyped=JSON.parse(s.err)}catch{}}return s}class Oe{constructor(e,t,a){P(this,"endpoint");P(this,"headers");this.endpoint=e,this.headers={...a},t&&(this.headers.authorization=`Bearer ${t}`)}getInfo(){return m(this.endpoint,void 0,void 0,this.headers)}request(e,t="GET",a,r=this.headers){return m(`${this.endpoint}${e.startsWith("/")?e:`/${e}`}`,t,a,{...this.headers,...r})}schema(e){return m(`${this.endpoint}/schemas/${e}`,void 0,void 0,this.headers)}pluginConfig(e){return m(`${this.endpoint}/schemas/plugins/${e}`,void 0,void 0,this.headers)}async findAll(e,t={},a=""){return m(`${this.endpoint}${a}/${e}?size=${ge}&sort_by=updated_at`,void 0,void 0,this.headers)}findRecord(e,t){return m(`${this.endpoint}/${e}/${t}`,void 0,void 0,this.headers)}createRecord(e,t){return m(`${this.endpoint}/${e}`,"POST",t,this.headers)}updateRecord(e,t,a){return m(`${this.endpoint}/${e}/${t}`,"PATCH",a,this.headers)}deleteRecord(e,t){return m(`${this.endpoint}/${e}/${t}`,"DELETE",void 0,this.headers)}}let R;const J=3;let X=async n=>{var a,r;if(n&&n>J&&be({message:`Failed to return apiService after ${J} retries`}),R)return R;const e=L(pe),t=(a=L(me))==null?void 0:a.config;return t?!e&&((r=t.oidc)!=null&&r.enabled)?(fe(`${he}/login`),await G(200),await X(n?n+1:0)):(R=new Oe(t.kongApi.endpoint,e,t.kongApi.requestHeaders),R):(await G(200),await X(n?n+1:0))};export{Ie as T,X as a,Y as b,ke as c,x as d,ye as e,ve as i,j as k,W as m,Ae as o,we as t,D as w};
