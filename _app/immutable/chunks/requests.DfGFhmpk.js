var Z=Object.defineProperty;var ee=(n,e,t)=>e in n?Z(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var P=(n,e,t)=>(ee(n,typeof e!="symbol"?e+"":e,t),t);import{ae as L,s as te,y as U,e as y,a as ne,c as v,b as w,f as E,g as ae,l as _,C,af as F,i as re,h as A,ag as I,n as M,r as se,k as V,ab as ie,o as oe,H as ce}from"./scheduler.BSW9XCdM.js";import{g as B,d as G,a as ue}from"./util.CVCLAZdi.js";import{S as de,i as le}from"./index.C72GILm6.js";import{d as fe,w as O,r as T}from"./index.DxgSILqn.js";import{g as he,b as be}from"./entry.NAUo45RY.js";import{u as pe,c as me}from"./stores.BXoQTJHR.js";import{c as ge}from"./config.DgbcnDvX.js";function Q(n){return Object.keys(n).reduce((e,t)=>n[t]===void 0?e:e+`${t}:${n[t]};`,"")}function q(n){return n?!0:void 0}Q({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Y(n,...e){const t={};for(const a of Object.keys(n))e.includes(a)||(t[a]=n[a]);return t}function $(n){const e={};for(const t in n){const a=n[t];a!==void 0&&(e[t]=a)}return e}function N(n){function e(t){return t(n),()=>{}}return{subscribe:e}}const S=n=>new Proxy(n,{get(e,t,a){return Reflect.get(e,t,a)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}}),K=n=>typeof n=="function";W("empty");function W(n,e){const{stores:t,action:a,returned:s}=e??{},r=(()=>{if(t&&s)return fe(t,d=>{const c=s(d);if(K(c)){const u=(...h)=>S($({...c(...h),[`data-melt-${n}`]:"",action:a??k}));return u.action=a??k,u}return S($({...c,[`data-melt-${n}`]:"",action:a??k}))});{const d=s,c=d==null?void 0:d();if(K(c)){const u=(...h)=>S($({...c(...h),[`data-melt-${n}`]:"",action:a??k}));return u.action=a??k,N(u)}return N(S($({...c,[`data-melt-${n}`]:"",action:a??k})))}})(),o=a??(()=>{});return o.subscribe=r.subscribe,o}function ke(n){const e=r=>r?`${n}-${r}`:n,t=r=>`data-melt-${n}${r?`-${r}`:""}`,a=r=>`[data-melt-${n}${r?`-${r}`:""}]`;return{name:e,attribute:t,selector:a,getEl:r=>document.querySelector(a(r))}}function ye(n){return n instanceof HTMLElement}function ve(...n){return(...e)=>{for(const t of n)typeof t=="function"&&t(...e)}}function k(){}function x(n,e,t,a){const s=Array.isArray(e)?e:[e];if(typeof t=="function"){const r=_e(o=>t(o));return s.forEach(o=>n.addEventListener(o,r,a)),()=>{s.forEach(o=>n.removeEventListener(o,r,a))}}return()=>void 0}function Ee(n){const e=n.currentTarget;if(!ye(e))return null;const t=new CustomEvent(`m-${n.type}`,{detail:{originalEvent:n},cancelable:!0});return e.dispatchEvent(t),t}function _e(n){return e=>{const t=Ee(e);if(!(t!=null&&t.defaultPrevented))return n(e)}}function D(n){return{...n,get:()=>L(n)}}D.writable=function(n){const e=O(n);let t=n;return{subscribe:e.subscribe,set(a){e.set(a),t=a},update(a){const s=a(t);e.set(s),t=s},get(){return t}}};D.derived=function(n,e){const t=new Map,a=()=>{const r=Array.isArray(n)?n.map(o=>o.get()):n.get();return e(r)};return{get:a,subscribe:r=>{const o=[];return(Array.isArray(n)?n:[n]).forEach(c=>{o.push(c.subscribe(()=>{r(a())}))}),r(a()),t.set(r,o),()=>{const c=t.get(r);if(c)for(const u of c)u();t.delete(r)}}}};const Ae=(n,e)=>{const t=D(n),a=(r,o)=>{t.update(d=>{const c=r(d);let u=c;return e&&(u=e({curr:d,next:c})),o==null||o(u),u})};return{...t,update:a,set:r=>{a(()=>r)}}},j={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function we(n){const e={};return Object.keys(n).forEach(t=>{const a=t,s=n[a];e[a]=D(O(s))}),e}T(!1),T(!1),T(void 0),T(void 0);const Ce={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Y(Ce,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Fe={defaultChecked:!1,disabled:!1,required:!1,name:"",value:""},{name:z}=ke("switch");function Te(n){const e={...Fe,...n},t=we(Y(e,"checked")),{disabled:a,required:s,name:r,value:o}=t,d=e.checked??O(e.defaultChecked),c=Ae(d,e==null?void 0:e.onCheckedChange);function u(){a.get()||c.update(l=>!l)}const h=W(z(),{stores:[c,a,s],returned:([l,b,i])=>({"data-disabled":q(b),disabled:q(b),"data-state":l?"checked":"unchecked",type:"button",role:"switch","aria-checked":l?"true":"false","aria-required":i?"true":void 0}),action(l){return{destroy:ve(x(l,"click",()=>{u()}),x(l,"keydown",i=>{i.key!==j.ENTER&&i.key!==j.SPACE||(i.preventDefault(),u())}))}}}),p=W(z("input"),{stores:[c,r,s,a,o],returned:([l,b,i,f,g])=>({type:"checkbox","aria-hidden":!0,hidden:!0,tabindex:-1,name:b,value:g,checked:l,required:i,disabled:q(f),style:Q({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"})})});return{elements:{root:h,input:p},states:{checked:c},options:t}}function $e(n){let e,t,a,s,r,o,d,c,u,h=[n[3],{class:"relative h-6 rounded-full bg-slate-300 dark:bg-slate-600 transition-colors data-[state=checked]:dark:bg-emerald-800 data-[state=checked]:bg-emerald-500"},{id:"airplane-mode"},{"aria-labelledby":"airplane-mode-label"}],p={};for(let i=0;i<h.length;i+=1)p=U(p,h[i]);let l=[n[4]],b={};for(let i=0;i<l.length;i+=1)b=U(b,l[i]);return{c(){e=y("form"),t=y("div"),a=y("button"),s=y("span"),r=ne(),o=y("input"),this.h()},l(i){e=v(i,"FORM",{class:!0,title:!0});var f=w(e);t=v(f,"DIV",{class:!0});var g=w(t);a=v(g,"BUTTON",{class:!0,id:!0,"aria-labelledby":!0});var H=w(a);s=v(H,"SPAN",{class:!0}),w(s).forEach(E),H.forEach(E),r=ae(g),o=v(g,"INPUT",{}),g.forEach(E),f.forEach(E),this.h()},h(){_(s,"class","thumb block rounded-full dark:bg-slate-900 bg-white transition svelte-q2ooe2"),C(a,p),F(a,"svelte-q2ooe2",!0),C(o,b),F(o,"svelte-q2ooe2",!0),_(t,"class","flex items-center cursor-pointer"),_(e,"class",""),_(e,"title",d=n[1]??`click to ${n[2]?"disable":"enable"}`)},m(i,f){re(i,e,f),A(e,t),A(t,a),A(a,s),a.autofocus&&a.focus(),A(t,r),A(t,o),o.autofocus&&o.focus(),c||(u=[I(n[3].action(a)),I(n[4].action(o))],c=!0)},p(i,[f]){C(a,p=B(h,[f&8&&i[3],{class:"relative h-6 rounded-full bg-slate-300 dark:bg-slate-600 transition-colors data-[state=checked]:dark:bg-emerald-800 data-[state=checked]:bg-emerald-500"},{id:"airplane-mode"},{"aria-labelledby":"airplane-mode-label"}])),F(a,"svelte-q2ooe2",!0),C(o,b=B(l,[f&16&&i[4]])),F(o,"svelte-q2ooe2",!0),f&6&&d!==(d=i[1]??`click to ${i[2]?"disable":"enable"}`)&&_(e,"title",d)},i:M,o:M,d(i){i&&E(e),c=!1,se(u)}}}function Se(n,e,t){let a,s=M,r=()=>(s(),s=ce(u,i=>t(2,a=i)),u),o,d;n.$$.on_destroy.push(()=>s());const c=({curr:i,next:f})=>(b("change",f),f);let{isChecked:u=O(!1)}=e;r();let{title:h=void 0}=e,{elements:{root:p,input:l}}=Te({onCheckedChange:c,checked:u});V(n,p,i=>t(3,o=i)),V(n,l,i=>t(4,d=i));const b=ie();return oe(()=>{}),n.$$set=i=>{"isChecked"in i&&r(t(0,u=i.isChecked)),"title"in i&&t(1,h=i.title)},[u,h,a,o,d,p,l]}class Ie extends de{constructor(e){super(),le(this,e,Se,$e,te,{isChecked:0,title:1})}}function Re(n,e="GET",t,a){a||(a={}),t&&(a["content-type"]="application/json");const s={method:e,headers:a,body:JSON.stringify(t)};return fetch(n,s)}async function m(n,e="GET",t,a){const s=await Re(n,e,t,a),r={ok:s.ok,code:s.status};if(s.ok)try{r.data=await s.json()}catch{}else{r.err=await s.text();try{r.errTyped=JSON.parse(r.err)}catch{}}return r}class Oe{constructor(e,t,a){P(this,"endpoint");P(this,"headers");this.endpoint=e,this.headers={...a},t&&(this.headers.authorization=`Bearer ${t}`)}getInfo(){return m(this.endpoint,void 0,void 0,this.headers)}request(e,t="GET",a,s=this.headers){return m(`${this.endpoint}${e.startsWith("/")?e:`/${e}`}`,t,a,{...this.headers,...s})}schema(e){return m(`${this.endpoint}/schemas/${e}`,void 0,void 0,this.headers)}pluginConfig(e){return m(`${this.endpoint}/schemas/plugins/${e}`,void 0,void 0,this.headers)}async findAll(e,t={},a=""){return m(`${this.endpoint}${a}/${e}?size=${ge}&sort_by=updated_at`,void 0,void 0,this.headers)}findRecord(e,t){return m(`${this.endpoint}/${e}/${t}`,void 0,void 0,this.headers)}createRecord(e,t){return m(`${this.endpoint}/${e}`,"POST",t,this.headers)}updateRecord(e,t,a){return m(`${this.endpoint}/${e}/${t}`,"PATCH",a,this.headers)}deleteRecord(e,t){return m(`${this.endpoint}/${e}/${t}`,"DELETE",void 0,this.headers)}}let R;const J=3;let X=async n=>{var a,s;if(n&&n>J&&ue({message:`Failed to return apiService after ${J} retries`}),R)return R;const e=L(pe),t=(a=L(me))==null?void 0:a.config;return t?!e&&((s=t.oidc)!=null&&s.enabled)?(he(`${be}/login`),await G(200),await X(n?n+1:0)):(R=new Oe(t.kongApi.endpoint,e,t.kongApi.requestHeaders),R):(await G(200),await X(n?n+1:0))};export{Ie as T,X as a};
