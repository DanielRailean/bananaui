import{s as y,d as l,i as x,b as f,l as u,c as d,e as _,g as T,h as $,j as D,k as I,o as P,f as S,t as q}from"../chunks/scheduler.BcKSNpAY.js";import{S as A,i as B,d as h,t as g,a as k,m as b,b as w,e as v}from"../chunks/index.DxnxjsIE.js";import{T as C}from"../chunks/treeWrapper.DJgl2ijR.js";import{u as E,D as M}from"../chunks/stores.ByO7SGi_.js";import{a as V,c as j}from"../chunks/toastStore.DQsilM7O.js";import{B as F}from"../chunks/Button.Buwpr5CI.js";import{w as J}from"../chunks/util.UN72V8S8.js";function L(c){let a;return{c(){a=q("copy personal API token")},l(e){a=S(e,"copy personal API token")},m(e,n){x(e,a,n)},d(e){e&&l(a)}}}function N(c){let a,e,n,s,o,i;return e=new C({props:{data:c[0],expandLevel:0}}),o=new F({props:{class:"m-2",$$slots:{default:[L]},$$scope:{ctx:c}}}),o.$on("click",c[2]),{c(){a=$("div"),v(e.$$.fragment),n=D(),s=$("div"),v(o.$$.fragment),this.h()},l(t){a=d(t,"DIV",{class:!0});var r=_(a);w(e.$$.fragment,r),n=T(r),s=d(r,"DIV",{class:!0});var m=_(s);w(o.$$.fragment,m),m.forEach(l),r.forEach(l),this.h()},h(){u(s,"class","flex flex-row items-center"),u(a,"class","w-full")},m(t,r){x(t,a,r),b(e,a,null),f(a,n),f(a,s),b(o,s,null),i=!0},p(t,[r]){const m={};r&1&&(m.data=t[0]),e.$set(m);const p={};r&8&&(p.$$scope={dirty:r,ctx:t}),o.$set(p)},i(t){i||(k(e.$$.fragment,t),k(o.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),g(o.$$.fragment,t),i=!1},d(t){t&&l(a),h(e),h(o)}}}function O(c,a,e){let n;I(c,E,i=>e(1,n=i));let s={username:"",email:"",payload:{}};return P(()=>{const i=n==null?void 0:n.token.split(".");if(!i){V({message:"no token!"});return}const t=JSON.parse(atob(i[1]));e(0,s.payload=t,s),e(0,s.username=t.name,s),e(0,s.email=t.unique_name,s)}),[s,n,()=>{J((n==null?void 0:n.token)??"",()=>{j(`copied! expires at ${M.fromMillis(s.payload.exp*1e3).toFormat("T")}`)})}]}class U extends A{constructor(a){super(),B(this,a,O,N,y,{})}}export{U as component};
