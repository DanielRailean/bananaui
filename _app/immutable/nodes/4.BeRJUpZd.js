import{s as de,n as q,d as m,i as w,v as C,w as Z,x as pe,y as J,z as $,F as z,r as we,l as b,J as K,b as E,q as B,K as P,e as y,L as A,a as O,f as D,t as W,M as Ee,g as H,c as T,j as Q,h as F,k as ye,o as Me}from"../chunks/scheduler.6nu6UWhu.js";import{S as ce,i as he,d as I,t as j,a as S,e as Le,m as U,c as V,b as N,g as ze}from"../chunks/index.BnPEp8V3.js";import{s as x,k as Be,p as ee}from"../chunks/config.B2KbV0fc.js";import{C as Ce,A as Pe}from"../chunks/ArrayWrap.CcXubXPZ.js";import{g as _e,c as te,i as le,d as ie,a as Ae}from"../chunks/util.D4fi-qvy.js";import{t as G}from"../chunks/bundle-mjs.D696Ktp4.js";import{b as Y,g as De}from"../chunks/entry.u9ZfIc6S.js";import{D as X,t as se}from"../chunks/stores.BC_YTqeD.js";import{a as ae}from"../chunks/requests.BMudsiKg.js";import{p as We}from"../chunks/stores.D_TkBh99.js";import{B as re}from"../chunks/Button.lJbgRNIA.js";function Re(i){let e,a,l,s,t,r=i[4].id&&i[4].title&&oe(i),n=i[6].id&&i[6].desc&&ne(i),d=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=G("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let o=0;o<d.length;o+=1)f=J(f,d[o]);return{c(){e=A("svg"),r&&r.c(),a=C(),n&&n.c(),l=A("path"),this.h()},l(o){e=P(o,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var c=y(e);r&&r.l(c),a=C(),n&&n.l(c),l=P(c,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),c.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",i[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),K(e,f)},m(o,c){w(o,e,c),r&&r.m(e,null),E(e,a),n&&n.m(e,null),E(e,l)},p(o,c){o[4].id&&o[4].title?r?r.p(o,c):(r=oe(o),r.c(),r.m(e,a)):r&&(r.d(1),r=null),o[6].id&&o[6].desc?n?n.p(o,c):(n=ne(o),n.c(),n.m(e,l)):n&&(n.d(1),n=null),c&32&&b(l,"stroke-width",o[5]),K(e,f=_e(d,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},c&4&&{color:o[2]},c&2048&&o[11],c&4097&&s!==(s=G("shrink-0",o[9][o[0]??"md"],o[12].class))&&{class:s},c&2&&{role:o[1]},c&128&&{"aria-label":o[7]},c&256&&t!==(t=o[8]?o[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(o){o&&m(e),r&&r.d(),n&&n.d()}}}function je(i){let e,a,l,s,t,r,n,d=i[4].id&&i[4].title&&fe(i),f=i[6].id&&i[6].desc&&ue(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=G("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],c={};for(let u=0;u<o.length;u+=1)c=J(c,o[u]);return{c(){e=A("svg"),d&&d.c(),a=C(),f&&f.c(),l=A("path"),this.h()},l(u){e=P(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var g=y(e);d&&d.l(g),a=C(),f&&f.l(g),l=P(g,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),g.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",i[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),K(e,c)},m(u,g){w(u,e,g),d&&d.m(e,null),E(e,a),f&&f.m(e,null),E(e,l),r||(n=[B(e,"click",i[13]),B(e,"keydown",i[14]),B(e,"keyup",i[15]),B(e,"focus",i[16]),B(e,"blur",i[17]),B(e,"mouseenter",i[18]),B(e,"mouseleave",i[19]),B(e,"mouseover",i[20]),B(e,"mouseout",i[21])],r=!0)},p(u,g){u[4].id&&u[4].title?d?d.p(u,g):(d=fe(u),d.c(),d.m(e,a)):d&&(d.d(1),d=null),u[6].id&&u[6].desc?f?f.p(u,g):(f=ue(u),f.c(),f.m(e,l)):f&&(f.d(1),f=null),g&32&&b(l,"stroke-width",u[5]),K(e,c=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},g&4&&{color:u[2]},g&2048&&u[11],g&4097&&s!==(s=G("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:s},g&2&&{role:u[1]},g&128&&{"aria-label":u[7]},g&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&m(e),d&&d.d(),f&&f.d(),r=!1,we(n)}}}function oe(i){let e,a=i[4].title+"",l,s;return{c(){e=A("title"),l=W(a),this.h()},l(t){e=P(t,"title",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[4].id)},m(t,r){w(t,e,r),E(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&O(l,a),r&16&&s!==(s=t[4].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function ne(i){let e,a=i[6].desc+"",l,s;return{c(){e=A("desc"),l=W(a),this.h()},l(t){e=P(t,"desc",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[6].id)},m(t,r){w(t,e,r),E(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&O(l,a),r&64&&s!==(s=t[6].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function fe(i){let e,a=i[4].title+"",l,s;return{c(){e=A("title"),l=W(a),this.h()},l(t){e=P(t,"title",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[4].id)},m(t,r){w(t,e,r),E(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&O(l,a),r&16&&s!==(s=t[4].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function ue(i){let e,a=i[6].desc+"",l,s;return{c(){e=A("desc"),l=W(a),this.h()},l(t){e=P(t,"desc",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[6].id)},m(t,r){w(t,e,r),E(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&O(l,a),r&64&&s!==(s=t[6].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function Se(i){let e;function a(t,r){return t[3]?je:Re}let l=a(i),s=l(i);return{c(){s.c(),e=C()},l(t){s.l(t),e=C()},m(t,r){s.m(t,r),w(t,e,r)},p(t,[r]){l===(l=a(t))&&s?s.p(t,r):(s.d(1),s=l(t),s&&(s.c(),s.m(e.parentNode,e)))},i:q,o:q,d(t){t&&m(e),s.d(t)}}}function qe(i,e,a){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let s=Z(e,l);const t=pe("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:n=t.size||"md"}=e,{role:d=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:o=t.withEvents||!1}=e,{title:c={}}=e,{strokeWidth:u=t.strokeWidth||"2"}=e,{desc:g={}}=e,p=`${c.id||""} ${g.id||""}`,M=!1,{ariaLabel:_="refresh outline"}=e;function v(h){z.call(this,i,h)}function L(h){z.call(this,i,h)}function k(h){z.call(this,i,h)}function R(h){z.call(this,i,h)}function me(h){z.call(this,i,h)}function ge(h){z.call(this,i,h)}function be(h){z.call(this,i,h)}function ve(h){z.call(this,i,h)}function ke(h){z.call(this,i,h)}return i.$$set=h=>{a(12,e=J(J({},e),$(h))),a(11,s=Z(e,l)),"size"in h&&a(0,n=h.size),"role"in h&&a(1,d=h.role),"color"in h&&a(2,f=h.color),"withEvents"in h&&a(3,o=h.withEvents),"title"in h&&a(4,c=h.title),"strokeWidth"in h&&a(5,u=h.strokeWidth),"desc"in h&&a(6,g=h.desc),"ariaLabel"in h&&a(7,_=h.ariaLabel)},i.$$.update=()=>{i.$$.dirty&80&&(c.id||g.id?a(8,M=!0):a(8,M=!1))},e=$(e),[n,d,f,o,c,u,g,_,M,r,p,s,e,v,L,k,R,me,ge,be,ve,ke]}class Te extends ce{constructor(e){super(),he(this,e,qe,Se,de,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Fe(i){let e,a,l;return e=new Te({props:{class:"mr-2"}}),{c(){N(e.$$.fragment),a=W(`
			Refresh`)},l(s){V(e.$$.fragment,s),a=D(s,`
			Refresh`)},m(s,t){U(e,s,t),w(s,a,t),l=!0},p:q,i(s){l||(S(e.$$.fragment,s),l=!0)},o(s){j(e.$$.fragment,s),l=!1},d(s){s&&m(a),I(e,s)}}}function Ie(i){let e,a,l,s,t,r;return l=new Ce({props:{class:"mr-2"}}),{c(){e=F("a"),a=F("div"),N(l.$$.fragment),s=W(`
					Add`),this.h()},l(n){e=T(n,"A",{href:!0});var d=y(e);a=T(d,"DIV",{class:!0});var f=y(a);V(l.$$.fragment,f),s=D(f,`
					Add`),f.forEach(m),d.forEach(m),this.h()},h(){b(a,"class","flex flex-row items-center space-x-1"),b(e,"href",t=Y+"/add?type="+i[1])},m(n,d){w(n,e,d),E(e,a),U(l,a,null),E(a,s),r=!0},p(n,d){(!r||d&2&&t!==(t=Y+"/add?type="+n[1]))&&b(e,"href",t)},i(n){r||(S(l.$$.fragment,n),r=!0)},o(n){j(l.$$.fragment,n),r=!1},d(n){n&&m(e),I(l)}}}function Ue(i){let e,a,l=(i[1]??"")+"",s;return{c(){e=F("p"),a=W("Loading "),s=W(l),this.h()},l(t){e=T(t,"P",{class:!0});var r=y(e);a=D(r,"Loading "),s=D(r,l),r.forEach(m),this.h()},h(){b(e,"class","pl-5 pb-4 text-xl font-light")},m(t,r){w(t,e,r),E(e,a),E(e,s)},p(t,r){r&2&&l!==(l=(t[1]??"")+"")&&O(s,l)},i:q,o:q,d(t){t&&m(e)}}}function Ve(i){let e,a;return e=new Pe({props:{dataRaw:i[0],type:i[1],entity:i[2]}}),e.$on("refresh",i[7]),{c(){N(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){U(e,l,s),a=!0},p(l,s){const t={};s&1&&(t.dataRaw=l[0]),s&2&&(t.type=l[1]),s&4&&(t.entity=l[2]),e.$set(t)},i(l){a||(S(e.$$.fragment,l),a=!0)},o(l){j(e.$$.fragment,l),a=!1},d(l){I(e,l)}}}function Ne(i){let e,a,l,s,t,r,n,d,f,o,c,u;document.title=e=te(i[1])+" | "+x.name,t=new re({props:{color:"green",class:" flex flex-row mr-2  items-center",$$slots:{default:[Fe]},$$scope:{ctx:i}}}),t.$on("click",i[5]),n=new re({props:{class:"flex flex-row mr-2 ",color:"blue",$$slots:{default:[Ie]},$$scope:{ctx:i}}}),n.$on("click",i[6]);const g=[Ve,Ue],p=[];function M(_,v){return _[0]?0:1}return f=M(i),o=p[f]=g[f](i),{c(){a=Q(),l=F("div"),s=F("div"),N(t.$$.fragment),r=Q(),N(n.$$.fragment),d=Q(),o.c(),c=C(),this.h()},l(_){Ee("svelte-evaqx7",document.head).forEach(m),a=H(_),l=T(_,"DIV",{class:!0});var L=y(l);s=T(L,"DIV",{class:!0});var k=y(s);V(t.$$.fragment,k),r=H(k),V(n.$$.fragment,k),k.forEach(m),L.forEach(m),d=H(_),o.l(_),c=C(),this.h()},h(){b(s,"class","flex flex-row mb-2 h-10"),b(l,"class","flex flex-col m-4 mb-3 font-light text-2xl")},m(_,v){w(_,a,v),w(_,l,v),E(l,s),U(t,s,null),E(s,r),U(n,s,null),w(_,d,v),p[f].m(_,v),w(_,c,v),u=!0},p(_,[v]){(!u||v&2)&&e!==(e=te(_[1])+" | "+x.name)&&(document.title=e);const L={};v&2048&&(L.$$scope={dirty:v,ctx:_}),t.$set(L);const k={};v&2050&&(k.$$scope={dirty:v,ctx:_}),n.$set(k);let R=f;f=M(_),f===R?p[f].p(_,v):(ze(),j(p[R],1,1,()=>{p[R]=null}),Le(),o=p[f],o?o.p(_,v):(o=p[f]=g[f](_),o.c()),S(o,1),o.m(c.parentNode,c))},i(_){u||(S(t.$$.fragment,_),S(n.$$.fragment,_),S(o),u=!0)},o(_){j(t.$$.fragment,_),j(n.$$.fragment,_),j(o),u=!1},d(_){_&&(m(a),m(l),m(d),m(c)),I(t),I(n),p[f].d(_)}}}function Oe(i,e,a){let l;ye(i,We,p=>a(4,l=p));let s,t,r,n=!1,d="";Me(()=>{n=!0,o()});let f;async function o(p=!1){if(!n)return;const M=new URLSearchParams(window.location.search);f=X.now();const _=t;a(1,t=M.get("type")??"none"),d=M.get("prefix")??"";let v=!1;_!=t&&(a(0,s=void 0),v=!0);try{if(a(2,r=Be.find(R=>R.name==t)),!r)return;let k=await(await ae()).findAll(r.apiPath,{},d);a(0,s=k.data.data);var L=f;for(await ie(ee);k.data.next&&(k=await(await ae()).request(k.data.next??"",void 0,void 0),L==f);)k.ok&&(a(0,s=s.concat(k.data.data)),v&&se.set(t+X.now().toMillis())),await ie(ee);se.set(t+X.now().toMillis()),p&&le("refresh finished!")}catch(k){console.log(k),Ae({message:`Failed fetching the ${t}. ${k.message?k.message:""}`})}}const c=()=>{o(!0),le("refresh started!")},u=()=>{De(`${Y}/add?type=${t}`)},g=async()=>await o();return i.$$.update=()=>{i.$$.dirty&16&&o()},[s,t,r,o,l,c,u,g]}class tt extends ce{constructor(e){super(),he(this,e,Oe,Ne,de,{})}}export{tt as component};
