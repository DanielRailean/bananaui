import{s as fe,l as C,i as v,n as J,f as h,r as de,u as Oe,v as re,w as me,x as j,y as q,z as Z,b as S,p as g,A as se,h as y,B as V,C as Be,t as W,d as I,j as te,e as z,a as R,c as A,g as H,k as De,o as Fe,q as Je,F as _e,M as Le}from"../chunks/scheduler.BQDiRXjc.js";import{S as ue,i as ce,c as O,a as B,m as D,t as p,g as X,b as k,e as G,d as F}from"../chunks/index.B1KEy29g.js";import{e as he}from"../chunks/each.BegtMz8b.js";import{T as Te,F as ze,C as Ae,A as We}from"../chunks/ArrayWrap.t-zaAVqq.js";import{B as x}from"../chunks/Button.DwvgVUeI.js";import{T as Ie}from"../chunks/treeWrapper.CkgXdZ2T.js";import{a as le}from"../chunks/requests.CLMvvCrD.js";import{g as pe,b as ie}from"../chunks/entry.DbvFqV2K.js";import{p as Ve}from"../chunks/stores.DlTlNBRg.js";import{g as Ne,w as je}from"../chunks/util.cKKlGT0C.js";import{a as Y}from"../chunks/stores.DxlP-Spi.js";import{t as ae}from"../chunks/bundle-mjs.BkWO730n.js";import{P as Me,F as Re}from"../chunks/PaletteOutline.BOaH9-kt.js";import{k as ge}from"../chunks/config.CwKg5LUm.js";function He(a){let e,s,l,t,i,r=a[4].id&&a[4].title&&be(a),n=a[6].id&&a[6].desc&&ke(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":i=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],c={};for(let u=0;u<o.length;u+=1)c=re(c,o[u]);return{c(){e=q("svg"),r&&r.c(),s=C(),n&&n.c(),l=q("path"),this.h()},l(u){e=Z(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=S(e);r&&r.l(m),s=C(),n&&n.l(m),l=Z(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(h),m.forEach(h),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,c)},m(u,m){v(u,e,m),r&&r.m(e,null),y(e,s),n&&n.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?r?r.p(u,m):(r=be(u),r.c(),r.m(e,s)):r&&(r.d(1),r=null),u[6].id&&u[6].desc?n?n.p(u,m):(n=ke(u),n.c(),n.m(e,l)):n&&(n.d(1),n=null),m&32&&g(l,"stroke-width",u[5]),se(e,c=Ne(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&t!==(t=ae("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:t},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&i!==(i=u[8]?u[10]:void 0)&&{"aria-describedby":i},{viewBox:"0 0 24 24"}]))},d(u){u&&h(e),r&&r.d(),n&&n.d()}}}function qe(a){let e,s,l,t,i,r,n,o=a[4].id&&a[4].title&&ve(a),c=a[6].id&&a[6].desc&&we(a),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":i=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let d=0;d<u.length;d+=1)m=re(m,u[d]);return{c(){e=q("svg"),o&&o.c(),s=C(),c&&c.c(),l=q("path"),this.h()},l(d){e=Z(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var f=S(e);o&&o.l(f),s=C(),c&&c.l(f),l=Z(f,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(h),f.forEach(h),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,m)},m(d,f){v(d,e,f),o&&o.m(e,null),y(e,s),c&&c.m(e,null),y(e,l),r||(n=[V(e,"click",a[13]),V(e,"keydown",a[14]),V(e,"keyup",a[15]),V(e,"focus",a[16]),V(e,"blur",a[17]),V(e,"mouseenter",a[18]),V(e,"mouseleave",a[19]),V(e,"mouseover",a[20]),V(e,"mouseout",a[21])],r=!0)},p(d,f){d[4].id&&d[4].title?o?o.p(d,f):(o=ve(d),o.c(),o.m(e,s)):o&&(o.d(1),o=null),d[6].id&&d[6].desc?c?c.p(d,f):(c=we(d),c.c(),c.m(e,l)):c&&(c.d(1),c=null),f&32&&g(l,"stroke-width",d[5]),se(e,m=Ne(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},f&4&&{color:d[2]},f&2048&&d[11],f&4097&&t!==(t=ae("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:t},f&2&&{role:d[1]},f&128&&{"aria-label":d[7]},f&256&&i!==(i=d[8]?d[10]:void 0)&&{"aria-describedby":i},{viewBox:"0 0 24 24"}]))},d(d){d&&h(e),o&&o.d(),c&&c.d(),r=!1,Be(n)}}}function be(a){let e,s=a[4].title+"",l,t;return{c(){e=q("title"),l=W(s),this.h()},l(i){e=Z(i,"title",{id:!0});var r=S(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=a[4].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&16&&s!==(s=i[4].title+"")&&te(l,s),r&16&&t!==(t=i[4].id)&&g(e,"id",t)},d(i){i&&h(e)}}}function ke(a){let e,s=a[6].desc+"",l,t;return{c(){e=q("desc"),l=W(s),this.h()},l(i){e=Z(i,"desc",{id:!0});var r=S(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=a[6].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&64&&s!==(s=i[6].desc+"")&&te(l,s),r&64&&t!==(t=i[6].id)&&g(e,"id",t)},d(i){i&&h(e)}}}function ve(a){let e,s=a[4].title+"",l,t;return{c(){e=q("title"),l=W(s),this.h()},l(i){e=Z(i,"title",{id:!0});var r=S(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=a[4].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&16&&s!==(s=i[4].title+"")&&te(l,s),r&16&&t!==(t=i[4].id)&&g(e,"id",t)},d(i){i&&h(e)}}}function we(a){let e,s=a[6].desc+"",l,t;return{c(){e=q("desc"),l=W(s),this.h()},l(i){e=Z(i,"desc",{id:!0});var r=S(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=a[6].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&64&&s!==(s=i[6].desc+"")&&te(l,s),r&64&&t!==(t=i[6].id)&&g(e,"id",t)},d(i){i&&h(e)}}}function Ze(a){let e;function s(i,r){return i[3]?qe:He}let l=s(a),t=l(a);return{c(){t.c(),e=C()},l(i){t.l(i),e=C()},m(i,r){t.m(i,r),v(i,e,r)},p(i,[r]){l===(l=s(i))&&t?t.p(i,r):(t.d(1),t=l(i),t&&(t.c(),t.m(e.parentNode,e)))},i:J,o:J,d(i){i&&h(e),t.d(i)}}}function Ue(a,e,s){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let t=de(e,l);const i=Oe("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:n=i.size||"md"}=e,{role:o=i.role||"img"}=e,{color:c=i.color||"currentColor"}=e,{withEvents:u=i.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:d=i.strokeWidth||"2"}=e,{desc:f={}}=e,w=`${m.id||""} ${f.id||""}`,E=!1,{ariaLabel:L="edit outline"}=e;function b(_){j.call(this,a,_)}function $(_){j.call(this,a,_)}function N(_){j.call(this,a,_)}function K(_){j.call(this,a,_)}function Q(_){j.call(this,a,_)}function U(_){j.call(this,a,_)}function ne(_){j.call(this,a,_)}function oe(_){j.call(this,a,_)}function P(_){j.call(this,a,_)}return a.$$set=_=>{s(12,e=re(re({},e),me(_))),s(11,t=de(e,l)),"size"in _&&s(0,n=_.size),"role"in _&&s(1,o=_.role),"color"in _&&s(2,c=_.color),"withEvents"in _&&s(3,u=_.withEvents),"title"in _&&s(4,m=_.title),"strokeWidth"in _&&s(5,d=_.strokeWidth),"desc"in _&&s(6,f=_.desc),"ariaLabel"in _&&s(7,L=_.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(m.id||f.id?s(8,E=!0):s(8,E=!1))},e=me(e),[n,o,c,u,m,d,f,L,E,r,w,t,e,b,$,N,K,Q,U,ne,oe,P]}class Xe extends ue{constructor(e){super(),ce(this,e,Ue,Ze,fe,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function $e(a,e,s){const l=a.slice();return l[22]=e[s],l}function Ge(a){let e,s,l;return e=new Xe({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=W("edit")},l(t){B(e.$$.fragment,t),s=I(t,"edit")},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),F(e,t)}}}function Ke(a){let e,s,l,t,i;return l=new Te({props:{class:"m-1"}}),{c(){e=z("div"),s=z("div"),O(l.$$.fragment),t=W(`
					delete`),this.h()},l(r){e=A(r,"DIV",{class:!0});var n=S(e);s=A(n,"DIV",{class:!0});var o=S(s);B(l.$$.fragment,o),t=I(o,`
					delete`),o.forEach(h),n.forEach(h),this.h()},h(){g(s,"class","flex flex-row items-center"),g(e,"class","text-rose-500")},m(r,n){v(r,e,n),y(e,s),D(l,s,null),y(s,t),i=!0},p:J,i(r){i||(p(l.$$.fragment,r),i=!0)},o(r){k(l.$$.fragment,r),i=!1},d(r){r&&h(e),F(l)}}}function Qe(a){let e,s,l;return e=new ze({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=W(`
			copy`)},l(t){B(e.$$.fragment,t),s=I(t,`
			copy`)},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),F(e,t)}}}function Ee(a){let e,s,l,t;e=new x({props:{class:"mr-3",color:"blue",$$slots:{default:[Ye]},$$scope:{ctx:a}}}),e.$on("click",a[9]);let i=a[1]!=a[2]&&ye(a);return{c(){O(e.$$.fragment),s=R(),i&&i.c(),l=C()},l(r){B(e.$$.fragment,r),s=H(r),i&&i.l(r),l=C()},m(r,n){D(e,r,n),v(r,s,n),i&&i.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&33554432&&(o.$$scope={dirty:n,ctx:r}),e.$set(o),r[1]!=r[2]?i?(i.p(r,n),n&6&&p(i,1)):(i=ye(r),i.c(),p(i,1),i.m(l.parentNode,l)):i&&(X(),k(i,1,1,()=>{i=null}),G())},i(r){t||(p(e.$$.fragment,r),p(i),t=!0)},o(r){k(e.$$.fragment,r),k(i),t=!1},d(r){r&&(h(s),h(l)),F(e,r),i&&i.d(r)}}}function Ye(a){let e,s,l;return e=new Me({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=W(`
				format and validate JSON`)},l(t){B(e.$$.fragment,t),s=I(t,`
				format and validate JSON`)},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),F(e,t)}}}function ye(a){let e,s;return e=new x({props:{class:"mr-3",color:"green",$$slots:{default:[xe]},$$scope:{ctx:a}}}),e.$on("click",a[15]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p(l,t){const i={};t&33554432&&(i.$$scope={dirty:t,ctx:l}),e.$set(i)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){F(e,l)}}}function xe(a){let e,s,l;return e=new Re({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=W(`
					save`)},l(t){B(e.$$.fragment,t),s=I(t,`
					save`)},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),F(e,t)}}}function et(a){let e,s="Loading ...";return{c(){e=z("h2"),e.textContent=s,this.h()},l(l){e=A(l,"H2",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-wq8tmm"&&(e.textContent=s),this.h()},h(){g(e,"class","text-xl text-center")},m(l,t){v(l,e,t)},p:J,i:J,o:J,d(l){l&&h(e)}}}function tt(a){let e,s,l,t;const i=[rt,lt],r=[];function n(o,c){return o[3]?0:1}return e=n(a),s=r[e]=i[e](a),{c(){s.c(),l=C()},l(o){s.l(o),l=C()},m(o,c){r[e].m(o,c),v(o,l,c),t=!0},p(o,c){let u=e;e=n(o),e===u?r[e].p(o,c):(X(),k(r[u],1,1,()=>{r[u]=null}),G(),s=r[e],s?s.p(o,c):(s=r[e]=i[e](o),s.c()),p(s,1),s.m(l.parentNode,l))},i(o){t||(p(s),t=!0)},o(o){k(s),t=!1},d(o){o&&h(l),r[e].d(o)}}}function lt(a){let e,s,l,t;e=new Ie({props:{data:a[0],rounded:!1}});let i=a[6]&&Pe(a);return{c(){O(e.$$.fragment),s=R(),i&&i.c(),l=C()},l(r){B(e.$$.fragment,r),s=H(r),i&&i.l(r),l=C()},m(r,n){D(e,r,n),v(r,s,n),i&&i.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&1&&(o.data=r[0]),e.$set(o),r[6]?i?(i.p(r,n),n&64&&p(i,1)):(i=Pe(r),i.c(),p(i,1),i.m(l.parentNode,l)):i&&(X(),k(i,1,1,()=>{i=null}),G())},i(r){t||(p(e.$$.fragment,r),p(i),t=!0)},o(r){k(e.$$.fragment,r),k(i),t=!1},d(r){r&&(h(s),h(l)),F(e,r),i&&i.d(r)}}}function rt(a){let e,s,l;return{c(){e=z("textarea"),this.h()},l(t){e=A(t,"TEXTAREA",{class:!0}),S(e).forEach(h),this.h()},h(){g(e,"class","dark:bg-slate-900 w-full min-h-[70vh]")},m(t,i){v(t,e,i),_e(e,a[2]),s||(l=V(e,"input",a[16]),s=!0)},p(t,i){i&4&&_e(e,t[2])},i:J,o:J,d(t){t&&h(e),s=!1,l()}}}function Pe(a){let e,s,l=he(a[6]),t=[];for(let r=0;r<l.length;r+=1)t[r]=Ce($e(a,l,r));const i=r=>k(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=C()},l(r){for(let n=0;n<t.length;n+=1)t[n].l(r);e=C()},m(r,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,n);v(r,e,n),s=!0},p(r,n){if(n&224){l=he(r[6]);let o;for(o=0;o<l.length;o+=1){const c=$e(r,l,o);t[o]?(t[o].p(c,n),p(t[o],1)):(t[o]=Ce(c),t[o].c(),p(t[o],1),t[o].m(e.parentNode,e))}for(X(),o=l.length;o<t.length;o+=1)i(o);G()}},i(r){if(!s){for(let n=0;n<l.length;n+=1)p(t[n]);s=!0}},o(r){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)k(t[n]);s=!1},d(r){r&&h(e),Le(t,r)}}}function st(a){let e,s,l,t,i,r;return l=new Ae({props:{class:"m-2"}}),{c(){e=z("a"),s=z("div"),O(l.$$.fragment),t=W(`
										add`),this.h()},l(n){e=A(n,"A",{href:!0});var o=S(e);s=A(o,"DIV",{class:!0});var c=S(s);B(l.$$.fragment,c),t=I(c,`
										add`),c.forEach(h),o.forEach(h),this.h()},h(){g(s,"class","flex flex-row items-center"),g(e,"href",i=ie+"/add?type="+a[22].name+"&apiPostPath="+btoa(a[22].entitySubPath))},m(n,o){v(n,e,o),y(e,s),D(l,s,null),y(s,t),r=!0},p(n,o){(!r||o&64&&i!==(i=ie+"/add?type="+n[22].name+"&apiPostPath="+btoa(n[22].entitySubPath)))&&g(e,"href",i)},i(n){r||(p(l.$$.fragment,n),r=!0)},o(n){k(l.$$.fragment,n),r=!1},d(n){n&&h(e),F(l)}}}function Se(a){let e,s;return e=new We({props:{data:a[22].data,displayedFields:a[22].displayedFields.filter(a[18]),type:a[22].name,entity:a[22]}}),e.$on("refresh",a[19]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p(l,t){const i={};t&64&&(i.data=l[22].data),t&96&&(i.displayedFields=l[22].displayedFields.filter(l[18])),t&64&&(i.type=l[22].name),t&64&&(i.entity=l[22]),e.$set(i)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){F(e,l)}}}function Ce(a){let e,s,l=a[22].name+"",t,i,r,n,o,c,u;function m(){return a[17](a[22])}n=new x({props:{color:"alternative",$$slots:{default:[st]},$$scope:{ctx:a}}}),n.$on("click",m);let d=a[22].data&&a[22].data.length>0&&Se(a);return{c(){e=z("div"),s=z("h2"),t=W(l),i=R(),r=z("div"),O(n.$$.fragment),o=R(),d&&d.c(),c=C(),this.h()},l(f){e=A(f,"DIV",{class:!0});var w=S(e);s=A(w,"H2",{});var E=S(s);t=I(E,l),E.forEach(h),i=H(w),r=A(w,"DIV",{class:!0});var L=S(r);B(n.$$.fragment,L),L.forEach(h),w.forEach(h),o=H(f),d&&d.l(f),c=C(),this.h()},h(){g(r,"class","flex flex-row m-4 h-8"),g(e,"class","flex flex-row m-4 h-8 items-center")},m(f,w){v(f,e,w),y(e,s),y(s,t),y(e,i),y(e,r),D(n,r,null),v(f,o,w),d&&d.m(f,w),v(f,c,w),u=!0},p(f,w){a=f,(!u||w&64)&&l!==(l=a[22].name+"")&&te(t,l);const E={};w&33554496&&(E.$$scope={dirty:w,ctx:a}),n.$set(E),a[22].data&&a[22].data.length>0?d?(d.p(a,w),w&64&&p(d,1)):(d=Se(a),d.c(),p(d,1),d.m(c.parentNode,c)):d&&(X(),k(d,1,1,()=>{d=null}),G())},i(f){u||(p(n.$$.fragment,f),p(d),u=!0)},o(f){k(n.$$.fragment,f),k(d),u=!1},d(f){f&&(h(e),h(o),h(c)),F(n),d&&d.d(f)}}}function it(a){let e,s,l,t,i,r,n,o,c,u,m,d;l=new x({props:{class:"mr-2",$$slots:{default:[Ge]},$$scope:{ctx:a}}}),l.$on("click",a[12]),i=new x({props:{class:"h-8 p-2 mr-2",title:"delete",color:"alternative",$$slots:{default:[Ke]},$$scope:{ctx:a}}}),i.$on("click",a[13]),n=new x({props:{color:"alternative",class:"mr-2",$$slots:{default:[Qe]},$$scope:{ctx:a}}}),n.$on("click",a[14]);let f=a[3]&&Ee(a);const w=[tt,et],E=[];function L(b,$){return b[0]?0:1}return u=L(a),m=E[u]=w[u](a),{c(){e=z("div"),s=z("div"),O(l.$$.fragment),t=R(),O(i.$$.fragment),r=R(),O(n.$$.fragment),o=R(),f&&f.c(),c=R(),m.c(),this.h()},l(b){e=A(b,"DIV",{class:!0});var $=S(e);s=A($,"DIV",{class:!0});var N=S(s);B(l.$$.fragment,N),t=H(N),B(i.$$.fragment,N),r=H(N),B(n.$$.fragment,N),o=H(N),f&&f.l(N),N.forEach(h),c=H($),m.l($),$.forEach(h),this.h()},h(){g(s,"class","flex flex-row m-4 h-8"),g(e,"class","mb-2")},m(b,$){v(b,e,$),y(e,s),D(l,s,null),y(s,t),D(i,s,null),y(s,r),D(n,s,null),y(s,o),f&&f.m(s,null),y(e,c),E[u].m(e,null),d=!0},p(b,[$]){const N={};$&33554432&&(N.$$scope={dirty:$,ctx:b}),l.$set(N);const K={};$&33554432&&(K.$$scope={dirty:$,ctx:b}),i.$set(K);const Q={};$&33554432&&(Q.$$scope={dirty:$,ctx:b}),n.$set(Q),b[3]?f?(f.p(b,$),$&8&&p(f,1)):(f=Ee(b),f.c(),p(f,1),f.m(s,null)):f&&(X(),k(f,1,1,()=>{f=null}),G());let U=u;u=L(b),u===U?E[u].p(b,$):(X(),k(E[U],1,1,()=>{E[U]=null}),G(),m=E[u],m?m.p(b,$):(m=E[u]=w[u](b),m.c()),p(m,1),m.m(e,null))},i(b){d||(p(l.$$.fragment,b),p(i.$$.fragment,b),p(n.$$.fragment,b),p(f),p(m),d=!0)},o(b){k(l.$$.fragment,b),k(i.$$.fragment,b),k(n.$$.fragment,b),k(f),k(m),d=!1},d(b){b&&h(e),F(l),F(i),F(n),f&&f.d(),E[u].d()}}}function at(a,e,s){let l;De(a,Ve,P=>s(11,l=P));let{data:t={}}=e,i="",r="",n=!1,o,c,u,m,d=!1;Fe(()=>{d=!0,f()});async function f(){var _;if(!d)return;s(0,t=void 0);const P=new URLSearchParams(window.location.search);s(5,c=P.get("type")??"none"),s(4,o=P.get("id")??"none");{s(0,t=void 0);const ee=await(await le()).findRecord(c,o);s(0,t=ee.data),s(2,r=JSON.stringify(t,void 0,2)),s(1,i=r),u=ge.find(T=>T.name==c),s(6,m=ge.filter(T=>{var M;return(M=u==null?void 0:u.subEntities)==null?void 0:M.includes(T.name)}).map(T=>({...T,entitySubPath:`${c}/${o}/${T.name}`})));for(const T of m){const M=await(await le()).findAll(T.name,{},`/${c}/${o}`);if(!M.ok){Y({message:`failed to load ${T.name}`});continue}T.data=(_=M.data)==null?void 0:_.data,s(6,m)}}}async function w(P,_,ee){if(!confirm(`Please confirm deletion of '${ee}'`))return;const M=await(await le()).deleteRecord(P,_);M.ok?(Y({message:"ok",type:"info"}),pe(`${ie}/entities?type=${c}`)):Y({message:`failed to delete. ${M.err}`})}function E(){let P;try{P=JSON.parse(r)}catch(_){Y({message:`Failed to parse JSON. ${_.message}`});return}s(2,r=JSON.stringify(P,void 0,2)),Y({message:"ok",type:"info"})}async function L(){if(confirm("confirm save?")){E();try{const _=await(await le()).updateRecord(c,o,JSON.parse(r));s(3,n=!n),s(3,n),s(0,t=JSON.parse(r)),s(1,i=r)}catch(_){const ee=_.response.data;Y({message:ee.message})}}}const b=()=>{s(3,n=!n)},$=async()=>await w(c,o,t.name??t.id),N=()=>{je(i)},K=async()=>await L();function Q(){r=this.value,s(2,r)}const U=P=>{pe(`${ie}/add?type=${P.name}&apiPostPath=${btoa(P.entitySubPath)}`)},ne=P=>P+"s"!=c,oe=async()=>await f();return a.$$set=P=>{"data"in P&&s(0,t=P.data)},a.$$.update=()=>{a.$$.dirty&2048&&f()},[t,i,r,n,o,c,m,f,w,E,L,l,b,$,N,K,Q,U,ne,oe]}class nt extends ue{constructor(e){super(),ce(this,e,at,it,fe,{data:0})}}function ot(a){let e,s;return e=new nt({}),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p:J,i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){F(e,l)}}}class Et extends ue{constructor(e){super(),ce(this,e,null,ot,fe,{})}}export{Et as component};
