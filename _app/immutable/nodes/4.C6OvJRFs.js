import{s as de,n as Q,d as m,i as w,x as A,y as Y,z as ke,A as N,B as Z,H as B,u as pe,l as b,J as O,b as M,p as C,K as D,e as y,L as j,a as J,f as V,t as q,M as we,g as K,c as U,j as G,h as F,o as Ee}from"../chunks/scheduler.BW_prjnM.js";import{S as ue,i as ce,d as W,t as z,a as P,c as ye,m as R,b as T,e as I,g as Me}from"../chunks/index.DqtSejiW.js";import{s as $,k as Be,p as x}from"../chunks/config.D_6hy6qG.js";import{C as Ce,A as Le}from"../chunks/ArrayWrap.N6wYEbAz.js";import{g as he,i as ee,e as ze,a as Pe}from"../chunks/toastStore.TnT92aLV.js";import{t as H}from"../chunks/bundle-mjs.D696Ktp4.js";import{b as X,g as Ae}from"../chunks/entry.DQnLyZFe.js";import{D as te,t as De}from"../chunks/stores.D9edJeCo.js";import{c as le,a as ie,d as re,r as je}from"../chunks/util.CfCL6LGJ.js";import{p as Se}from"../chunks/stores.CAPpBWeY.js";import{B as se}from"../chunks/Button.BKog11Ie.js";import{S as We}from"../chunks/Spinner.RM--6uY3.js";function Re(r){let e,s,l,i,t,a=r[4].id&&r[4].title&&ae(r),o=r[6].id&&r[6].desc&&ne(r),d=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:i=H("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let n=0;n<d.length;n+=1)f=N(f,d[n]);return{c(){e=j("svg"),a&&a.c(),s=A(),o&&o.c(),l=j("path"),this.h()},l(n){e=D(n,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=y(e);a&&a.l(_),s=A(),o&&o.l(_),l=D(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),_.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",r[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),O(e,f)},m(n,_){w(n,e,_),a&&a.m(e,null),M(e,s),o&&o.m(e,null),M(e,l)},p(n,_){n[4].id&&n[4].title?a?a.p(n,_):(a=ae(n),a.c(),a.m(e,s)):a&&(a.d(1),a=null),n[6].id&&n[6].desc?o?o.p(n,_):(o=ne(n),o.c(),o.m(e,l)):o&&(o.d(1),o=null),_&32&&b(l,"stroke-width",n[5]),O(e,f=he(d,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:n[2]},_&2048&&n[11],_&4097&&i!==(i=H("shrink-0",n[9][n[0]??"md"],n[12].class))&&{class:i},_&2&&{role:n[1]},_&128&&{"aria-label":n[7]},_&256&&t!==(t=n[8]?n[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(n){n&&m(e),a&&a.d(),o&&o.d()}}}function Te(r){let e,s,l,i,t,a,o,d=r[4].id&&r[4].title&&oe(r),f=r[6].id&&r[6].desc&&fe(r),n=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:i=H("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let u=0;u<n.length;u+=1)_=N(_,n[u]);return{c(){e=j("svg"),d&&d.c(),s=A(),f&&f.c(),l=j("path"),this.h()},l(u){e=D(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var g=y(e);d&&d.l(g),s=A(),f&&f.l(g),l=D(g,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),g.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",r[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),O(e,_)},m(u,g){w(u,e,g),d&&d.m(e,null),M(e,s),f&&f.m(e,null),M(e,l),a||(o=[C(e,"click",r[13]),C(e,"keydown",r[14]),C(e,"keyup",r[15]),C(e,"focus",r[16]),C(e,"blur",r[17]),C(e,"mouseenter",r[18]),C(e,"mouseleave",r[19]),C(e,"mouseover",r[20]),C(e,"mouseout",r[21])],a=!0)},p(u,g){u[4].id&&u[4].title?d?d.p(u,g):(d=oe(u),d.c(),d.m(e,s)):d&&(d.d(1),d=null),u[6].id&&u[6].desc?f?f.p(u,g):(f=fe(u),f.c(),f.m(e,l)):f&&(f.d(1),f=null),g&32&&b(l,"stroke-width",u[5]),O(e,_=he(n,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},g&4&&{color:u[2]},g&2048&&u[11],g&4097&&i!==(i=H("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:i},g&2&&{role:u[1]},g&128&&{"aria-label":u[7]},g&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&m(e),d&&d.d(),f&&f.d(),a=!1,pe(o)}}}function ae(r){let e,s=r[4].title+"",l,i;return{c(){e=j("title"),l=q(s),this.h()},l(t){e=D(t,"title",{id:!0});var a=y(e);l=V(a,s),a.forEach(m),this.h()},h(){b(e,"id",i=r[4].id)},m(t,a){w(t,e,a),M(e,l)},p(t,a){a&16&&s!==(s=t[4].title+"")&&J(l,s),a&16&&i!==(i=t[4].id)&&b(e,"id",i)},d(t){t&&m(e)}}}function ne(r){let e,s=r[6].desc+"",l,i;return{c(){e=j("desc"),l=q(s),this.h()},l(t){e=D(t,"desc",{id:!0});var a=y(e);l=V(a,s),a.forEach(m),this.h()},h(){b(e,"id",i=r[6].id)},m(t,a){w(t,e,a),M(e,l)},p(t,a){a&64&&s!==(s=t[6].desc+"")&&J(l,s),a&64&&i!==(i=t[6].id)&&b(e,"id",i)},d(t){t&&m(e)}}}function oe(r){let e,s=r[4].title+"",l,i;return{c(){e=j("title"),l=q(s),this.h()},l(t){e=D(t,"title",{id:!0});var a=y(e);l=V(a,s),a.forEach(m),this.h()},h(){b(e,"id",i=r[4].id)},m(t,a){w(t,e,a),M(e,l)},p(t,a){a&16&&s!==(s=t[4].title+"")&&J(l,s),a&16&&i!==(i=t[4].id)&&b(e,"id",i)},d(t){t&&m(e)}}}function fe(r){let e,s=r[6].desc+"",l,i;return{c(){e=j("desc"),l=q(s),this.h()},l(t){e=D(t,"desc",{id:!0});var a=y(e);l=V(a,s),a.forEach(m),this.h()},h(){b(e,"id",i=r[6].id)},m(t,a){w(t,e,a),M(e,l)},p(t,a){a&64&&s!==(s=t[6].desc+"")&&J(l,s),a&64&&i!==(i=t[6].id)&&b(e,"id",i)},d(t){t&&m(e)}}}function Ie(r){let e;function s(t,a){return t[3]?Te:Re}let l=s(r),i=l(r);return{c(){i.c(),e=A()},l(t){i.l(t),e=A()},m(t,a){i.m(t,a),w(t,e,a)},p(t,[a]){l===(l=s(t))&&i?i.p(t,a):(i.d(1),i=l(t),i&&(i.c(),i.m(e.parentNode,e)))},i:Q,o:Q,d(t){t&&m(e),i.d(t)}}}function Ve(r,e,s){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let i=Y(e,l);const t=ke("iconCtx")??{},a={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:d=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:n=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:u=t.strokeWidth||"2"}=e,{desc:g={}}=e,E=`${_.id||""} ${g.id||""}`,L=!1,{ariaLabel:c="refresh outline"}=e;function k(h){B.call(this,r,h)}function v(h){B.call(this,r,h)}function p(h){B.call(this,r,h)}function S(h){B.call(this,r,h)}function _e(h){B.call(this,r,h)}function me(h){B.call(this,r,h)}function ge(h){B.call(this,r,h)}function be(h){B.call(this,r,h)}function ve(h){B.call(this,r,h)}return r.$$set=h=>{s(12,e=N(N({},e),Z(h))),s(11,i=Y(e,l)),"size"in h&&s(0,o=h.size),"role"in h&&s(1,d=h.role),"color"in h&&s(2,f=h.color),"withEvents"in h&&s(3,n=h.withEvents),"title"in h&&s(4,_=h.title),"strokeWidth"in h&&s(5,u=h.strokeWidth),"desc"in h&&s(6,g=h.desc),"ariaLabel"in h&&s(7,c=h.ariaLabel)},r.$$.update=()=>{r.$$.dirty&80&&(_.id||g.id?s(8,L=!0):s(8,L=!1))},e=Z(e),[o,d,f,n,_,u,g,c,L,a,E,i,e,k,v,p,S,_e,me,ge,be,ve]}class qe extends ue{constructor(e){super(),ce(this,e,Ve,Ie,de,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Ue(r){let e,s,l;return e=new qe({props:{class:"mr-2"}}),{c(){I(e.$$.fragment),s=q(`
			Refresh`)},l(i){T(e.$$.fragment,i),s=V(i,`
			Refresh`)},m(i,t){R(e,i,t),w(i,s,t),l=!0},p:Q,i(i){l||(P(e.$$.fragment,i),l=!0)},o(i){z(e.$$.fragment,i),l=!1},d(i){i&&m(s),W(e,i)}}}function Fe(r){let e,s,l,i,t,a;return l=new Ce({props:{class:"mr-2"}}),{c(){e=F("a"),s=F("div"),I(l.$$.fragment),i=q(`
					Add`),this.h()},l(o){e=U(o,"A",{href:!0});var d=y(e);s=U(d,"DIV",{class:!0});var f=y(s);T(l.$$.fragment,f),i=V(f,`
					Add`),f.forEach(m),d.forEach(m),this.h()},h(){b(s,"class","flex flex-row items-center space-x-1"),b(e,"href",t=X+"/add?type="+r[1])},m(o,d){w(o,e,d),M(e,s),R(l,s,null),M(s,i),a=!0},p(o,d){(!a||d&2&&t!==(t=X+"/add?type="+o[1]))&&b(e,"href",t)},i(o){a||(P(l.$$.fragment,o),a=!0)},o(o){z(l.$$.fragment,o),a=!1},d(o){o&&m(e),W(l)}}}function Ne(r){let e,s,l;return s=new We({props:{text:"Loading "+(r[1]??"")}}),{c(){e=F("div"),I(s.$$.fragment),this.h()},l(i){e=U(i,"DIV",{class:!0});var t=y(e);T(s.$$.fragment,t),t.forEach(m),this.h()},h(){b(e,"class","flex flex-row items-center pl-5 pb-4")},m(i,t){w(i,e,t),R(s,e,null),l=!0},p(i,t){const a={};t&2&&(a.text="Loading "+(i[1]??"")),s.$set(a)},i(i){l||(P(s.$$.fragment,i),l=!0)},o(i){z(s.$$.fragment,i),l=!1},d(i){i&&m(e),W(s)}}}function Oe(r){let e,s;return e=new Le({props:{dataRaw:r[0],type:r[1],entity:r[2]}}),e.$on("refresh",r[6]),{c(){I(e.$$.fragment)},l(l){T(e.$$.fragment,l)},m(l,i){R(e,l,i),s=!0},p(l,i){const t={};i&1&&(t.dataRaw=l[0]),i&2&&(t.type=l[1]),i&4&&(t.entity=l[2]),e.$set(t)},i(l){s||(P(e.$$.fragment,l),s=!0)},o(l){z(e.$$.fragment,l),s=!1},d(l){W(e,l)}}}function He(r){let e,s,l,i,t,a,o,d,f,n,_,u;document.title=e=le(r[1])+" "+(r[1]?"|":"")+" "+$.name,t=new se({props:{class:" flex flex-row mr-2  items-center bg-green-500 dark:bg-green-700",$$slots:{default:[Ue]},$$scope:{ctx:r}}}),t.$on("click",r[4]),o=new se({props:{class:"flex flex-row mr-2 bg-blue-500 dark:bg-blue-600",$$slots:{default:[Fe]},$$scope:{ctx:r}}}),o.$on("click",r[5]);const g=[Oe,Ne],E=[];function L(c,k){return c[0]?0:1}return f=L(r),n=E[f]=g[f](r),{c(){s=G(),l=F("div"),i=F("div"),I(t.$$.fragment),a=G(),I(o.$$.fragment),d=G(),n.c(),_=A(),this.h()},l(c){we("svelte-c4jj3",document.head).forEach(m),s=K(c),l=U(c,"DIV",{class:!0});var v=y(l);i=U(v,"DIV",{class:!0});var p=y(i);T(t.$$.fragment,p),a=K(p),T(o.$$.fragment,p),p.forEach(m),v.forEach(m),d=K(c),n.l(c),_=A(),this.h()},h(){b(i,"class","flex flex-row mb-2 h-10"),b(l,"class","flex flex-col m-4 mb-3 font-light text-2xl")},m(c,k){w(c,s,k),w(c,l,k),M(l,i),R(t,i,null),M(i,a),R(o,i,null),w(c,d,k),E[f].m(c,k),w(c,_,k),u=!0},p(c,[k]){(!u||k&2)&&e!==(e=le(c[1])+" "+(c[1]?"|":"")+" "+$.name)&&(document.title=e);const v={};k&2048&&(v.$$scope={dirty:k,ctx:c}),t.$set(v);const p={};k&2050&&(p.$$scope={dirty:k,ctx:c}),o.$set(p);let S=f;f=L(c),f===S?E[f].p(c,k):(Me(),z(E[S],1,1,()=>{E[S]=null}),ye(),n=E[f],n?n.p(c,k):(n=E[f]=g[f](c),n.c()),P(n,1),n.m(_.parentNode,_))},i(c){u||(P(t.$$.fragment,c),P(o.$$.fragment,c),P(n),u=!0)},o(c){z(t.$$.fragment,c),z(o.$$.fragment,c),z(n),u=!1},d(c){c&&(m(s),m(l),m(d),m(_)),W(t),W(o),E[f].d(c)}}}function Je(r,e,s){let l,i,t,a=!1,o="";Se.subscribe(g=>{f()}),Ee(()=>{a=!0,f()});let d;async function f(g=!1){if(!a)return;const E=new URLSearchParams(window.location.search);d=te.now();const L=i;s(1,i=E.get("type")??"none"),o=E.get("prefix")??"";let c=!1;L!=i&&(s(0,l=void 0),c=!0);try{if(s(2,t=Be.find(p=>p.name==i)),!t)return;let v=await(await ie()).findAll(t.apiPath,{},o);if(!v.ok){ze(`failed to fetch the ${i}. ${v.err} (${v.code})`);return}s(0,l=v.data.data);var k=d;for(await re(x);v.data.next&&(v=await(await ie()).request(v.data.next??"",void 0,void 0),k==d);)v.ok&&s(0,l=l.concat(v.data.data)),await re(x);if(t.apiPath==="clustering/data-planes")for(const p of l){const S={code:200,ok:!0,data:p};je[`/dataplanes/${p.id}`]=S}De.set(i+te.now().toMillis()),g&&ee("refresh finished!")}catch(v){console.error(v),Pe({message:`Failed fetching ${i}. ${v.message?v.message:""}`})}}return[l,i,t,f,()=>{f(!0),ee("refresh started!")},()=>{Ae(`${X}/add?type=${i}`)},async()=>await f()]}class rt extends ue{constructor(e){super(),ce(this,e,Je,He,de,{})}}export{rt as component};
