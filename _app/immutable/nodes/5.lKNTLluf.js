import{s as _e,n as C,d as _,i as w,v as O,w as ge,x as Fe,y as oe,z as be,F as H,r as Be,l as h,J as fe,b as y,q as V,K as Z,e as P,L as K,a as se,f as F,t as M,M as Me,g as q,c as I,j as U,h as R,k as He,o as qe,p as ke,u as Ue,R as ve,S as Ze}from"../chunks/scheduler.c0jYc-34.js";import{S as he,i as pe,d as D,t as v,a as b,g as x,e as ee,m as J,c as T,b as B}from"../chunks/index.DhMHlYlC.js";import{e as we}from"../chunks/each.D6IpUALt.js";import{T as Ke,F as Xe,C as Ge,A as Qe}from"../chunks/ArrayWrap.C1WJ4vfS.js";import{B as te}from"../chunks/Button.CjBAYrdq.js";import{T as Ye}from"../chunks/treeWrapper.Dp0QaJwo.js";import{a as ae}from"../chunks/requests.KwKiQC6a.js";import{g as de,b as ie}from"../chunks/entry.BjuVZr_a.js";import{p as xe}from"../chunks/stores.Ci1-eL6-.js";import{g as Le,e as re,c as me,w as et}from"../chunks/util.CPV_G-jQ.js";import{t as ue}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as tt,F as lt}from"../chunks/PaletteOutline.6S6xDuoh.js";import{a as rt,k as $e,f as it}from"../chunks/config.IXh9b4XX.js";function st(n){let e,s,l,r,t,i=n[4].id&&n[4].title&&Ee(n),o=n[6].id&&n[6].desc&&ye(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:r=ue("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":t=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let u=0;u<a.length;u+=1)f=oe(f,a[u]);return{c(){e=K("svg"),i&&i.c(),s=O(),o&&o.c(),l=K("path"),this.h()},l(u){e=Z(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=P(e);i&&i.l(m),s=O(),o&&o.l(m),l=Z(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(l).forEach(_),m.forEach(_),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",n[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),fe(e,f)},m(u,m){w(u,e,m),i&&i.m(e,null),y(e,s),o&&o.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?i?i.p(u,m):(i=Ee(u),i.c(),i.m(e,s)):i&&(i.d(1),i=null),u[6].id&&u[6].desc?o?o.p(u,m):(o=ye(u),o.c(),o.m(e,l)):o&&(o.d(1),o=null),m&32&&h(l,"stroke-width",u[5]),fe(e,f=Le(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&r!==(r=ue("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:r},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&_(e),i&&i.d(),o&&o.d()}}}function nt(n){let e,s,l,r,t,i,o,a=n[4].id&&n[4].title&&Pe(n),f=n[6].id&&n[6].desc&&Se(n),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:r=ue("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":t=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let c=0;c<u.length;c+=1)m=oe(m,u[c]);return{c(){e=K("svg"),a&&a.c(),s=O(),f&&f.c(),l=K("path"),this.h()},l(c){e=Z(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var d=P(e);a&&a.l(d),s=O(),f&&f.l(d),l=Z(d,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(l).forEach(_),d.forEach(_),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",n[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),fe(e,m)},m(c,d){w(c,e,d),a&&a.m(e,null),y(e,s),f&&f.m(e,null),y(e,l),i||(o=[V(e,"click",n[13]),V(e,"keydown",n[14]),V(e,"keyup",n[15]),V(e,"focus",n[16]),V(e,"blur",n[17]),V(e,"mouseenter",n[18]),V(e,"mouseleave",n[19]),V(e,"mouseover",n[20]),V(e,"mouseout",n[21])],i=!0)},p(c,d){c[4].id&&c[4].title?a?a.p(c,d):(a=Pe(c),a.c(),a.m(e,s)):a&&(a.d(1),a=null),c[6].id&&c[6].desc?f?f.p(c,d):(f=Se(c),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d&32&&h(l,"stroke-width",c[5]),fe(e,m=Le(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},d&4&&{color:c[2]},d&2048&&c[11],d&4097&&r!==(r=ue("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:r},d&2&&{role:c[1]},d&128&&{"aria-label":c[7]},d&256&&t!==(t=c[8]?c[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(c){c&&_(e),a&&a.d(),f&&f.d(),i=!1,Be(o)}}}function Ee(n){let e,s=n[4].title+"",l,r;return{c(){e=K("title"),l=M(s),this.h()},l(t){e=Z(t,"title",{id:!0});var i=P(e);l=F(i,s),i.forEach(_),this.h()},h(){h(e,"id",r=n[4].id)},m(t,i){w(t,e,i),y(e,l)},p(t,i){i&16&&s!==(s=t[4].title+"")&&se(l,s),i&16&&r!==(r=t[4].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function ye(n){let e,s=n[6].desc+"",l,r;return{c(){e=K("desc"),l=M(s),this.h()},l(t){e=Z(t,"desc",{id:!0});var i=P(e);l=F(i,s),i.forEach(_),this.h()},h(){h(e,"id",r=n[6].id)},m(t,i){w(t,e,i),y(e,l)},p(t,i){i&64&&s!==(s=t[6].desc+"")&&se(l,s),i&64&&r!==(r=t[6].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function Pe(n){let e,s=n[4].title+"",l,r;return{c(){e=K("title"),l=M(s),this.h()},l(t){e=Z(t,"title",{id:!0});var i=P(e);l=F(i,s),i.forEach(_),this.h()},h(){h(e,"id",r=n[4].id)},m(t,i){w(t,e,i),y(e,l)},p(t,i){i&16&&s!==(s=t[4].title+"")&&se(l,s),i&16&&r!==(r=t[4].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function Se(n){let e,s=n[6].desc+"",l,r;return{c(){e=K("desc"),l=M(s),this.h()},l(t){e=Z(t,"desc",{id:!0});var i=P(e);l=F(i,s),i.forEach(_),this.h()},h(){h(e,"id",r=n[6].id)},m(t,i){w(t,e,i),y(e,l)},p(t,i){i&64&&s!==(s=t[6].desc+"")&&se(l,s),i&64&&r!==(r=t[6].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function at(n){let e;function s(t,i){return t[3]?nt:st}let l=s(n),r=l(n);return{c(){r.c(),e=O()},l(t){r.l(t),e=O()},m(t,i){r.m(t,i),w(t,e,i)},p(t,[i]){l===(l=s(t))&&r?r.p(t,i):(r.d(1),r=l(t),r&&(r.c(),r.m(e.parentNode,e)))},i:C,o:C,d(t){t&&_(e),r.d(t)}}}function ot(n,e,s){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let r=ge(e,l);const t=Fe("iconCtx")??{},i={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:a=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:u=t.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:c=t.strokeWidth||"2"}=e,{desc:d={}}=e,E=`${m.id||""} ${d.id||""}`,S=!1,{ariaLabel:W="edit outline"}=e;function X(p){H.call(this,n,p)}function L(p){H.call(this,n,p)}function G(p){H.call(this,n,p)}function g(p){H.call(this,n,p)}function $(p){H.call(this,n,p)}function N(p){H.call(this,n,p)}function j(p){H.call(this,n,p)}function Q(p){H.call(this,n,p)}function ce(p){H.call(this,n,p)}return n.$$set=p=>{s(12,e=oe(oe({},e),be(p))),s(11,r=ge(e,l)),"size"in p&&s(0,o=p.size),"role"in p&&s(1,a=p.role),"color"in p&&s(2,f=p.color),"withEvents"in p&&s(3,u=p.withEvents),"title"in p&&s(4,m=p.title),"strokeWidth"in p&&s(5,c=p.strokeWidth),"desc"in p&&s(6,d=p.desc),"ariaLabel"in p&&s(7,W=p.ariaLabel)},n.$$.update=()=>{n.$$.dirty&80&&(m.id||d.id?s(8,S=!0):s(8,S=!1))},e=be(e),[o,a,f,u,m,c,d,W,S,i,E,r,e,X,L,G,g,$,N,j,Q,ce]}class ft extends he{constructor(e){super(),pe(this,e,ot,at,_e,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Oe(n,e,s){const l=n.slice();return l[31]=e[s],l}function Ne(n){return document.title=n[0].name??n[0].id??n[5],{c:C,l:C,m:C,d:C}}function ut(n){let e,s,l;return e=new ft({props:{class:"m-2"}}),{c(){B(e.$$.fragment),s=M("edit")},l(r){T(e.$$.fragment,r),s=F(r,"edit")},m(r,t){J(e,r,t),w(r,s,t),l=!0},p:C,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){v(e.$$.fragment,r),l=!1},d(r){r&&_(s),D(e,r)}}}function ct(n){let e,s,l,r;return e=new te({props:{class:"h-10 m-1",color:"blue",title:n[1]==n[2]?"entity unchanged":"",disabled:n[1]==n[2],$$slots:{default:[mt]},$$scope:{ctx:n}}}),e.$on("click",n[13]),l=new te({props:{class:"h-10 m-1",disabled:n[1]==n[2],title:n[1]==n[2]?"entity unchanged":"",color:"green",$$slots:{default:[_t]},$$scope:{ctx:n}}}),l.$on("click",n[20]),{c(){B(e.$$.fragment),s=U(),B(l.$$.fragment)},l(t){T(e.$$.fragment,t),s=q(t),T(l.$$.fragment,t)},m(t,i){J(e,t,i),w(t,s,i),J(l,t,i),r=!0},p(t,i){const o={};i[0]&6&&(o.title=t[1]==t[2]?"entity unchanged":""),i[0]&6&&(o.disabled=t[1]==t[2]),i[1]&8&&(o.$$scope={dirty:i,ctx:t}),e.$set(o);const a={};i[0]&6&&(a.disabled=t[1]==t[2]),i[0]&6&&(a.title=t[1]==t[2]?"entity unchanged":""),i[1]&8&&(a.$$scope={dirty:i,ctx:t}),l.$set(a)},i(t){r||(b(e.$$.fragment,t),b(l.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),v(l.$$.fragment,t),r=!1},d(t){t&&_(s),D(e,t),D(l,t)}}}function dt(n){let e,s,l,r;return e=new te({props:{class:"h-10 m-1",title:"delete",color:"alternative",$$slots:{default:[ht]},$$scope:{ctx:n}}}),e.$on("click",n[18]),l=new te({props:{color:"alternative",class:"h-10 m-1",title:n[1],$$slots:{default:[pt]},$$scope:{ctx:n}}}),l.$on("click",n[19]),{c(){B(e.$$.fragment),s=U(),B(l.$$.fragment)},l(t){T(e.$$.fragment,t),s=q(t),T(l.$$.fragment,t)},m(t,i){J(e,t,i),w(t,s,i),J(l,t,i),r=!0},p(t,i){const o={};i[1]&8&&(o.$$scope={dirty:i,ctx:t}),e.$set(o);const a={};i[0]&2&&(a.title=t[1]),i[1]&8&&(a.$$scope={dirty:i,ctx:t}),l.$set(a)},i(t){r||(b(e.$$.fragment,t),b(l.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),v(l.$$.fragment,t),r=!1},d(t){t&&_(s),D(e,t),D(l,t)}}}function mt(n){let e,s,l;return e=new tt({props:{class:"m-2"}}),{c(){B(e.$$.fragment),s=M(`
				format and validate JSON`)},l(r){T(e.$$.fragment,r),s=F(r,`
				format and validate JSON`)},m(r,t){J(e,r,t),w(r,s,t),l=!0},p:C,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){v(e.$$.fragment,r),l=!1},d(r){r&&_(s),D(e,r)}}}function _t(n){let e,s,l;return e=new lt({props:{class:"m-2"}}),{c(){B(e.$$.fragment),s=M(`
				save`)},l(r){T(e.$$.fragment,r),s=F(r,`
				save`)},m(r,t){J(e,r,t),w(r,s,t),l=!0},p:C,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){v(e.$$.fragment,r),l=!1},d(r){r&&_(s),D(e,r)}}}function ht(n){let e,s,l,r,t;return l=new Ke({props:{class:"m-1"}}),{c(){e=R("div"),s=R("div"),B(l.$$.fragment),r=M(`
						delete`),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=P(e);s=I(o,"DIV",{class:!0});var a=P(s);T(l.$$.fragment,a),r=F(a,`
						delete`),a.forEach(_),o.forEach(_),this.h()},h(){h(s,"class","flex flex-row items-center"),h(e,"class","text-rose-500")},m(i,o){w(i,e,o),y(e,s),J(l,s,null),y(s,r),t=!0},p:C,i(i){t||(b(l.$$.fragment,i),t=!0)},o(i){v(l.$$.fragment,i),t=!1},d(i){i&&_(e),D(l)}}}function pt(n){let e,s,l;return e=new Xe({props:{class:"m-2"}}),{c(){B(e.$$.fragment),s=M(`
				copy JSON`)},l(r){T(e.$$.fragment,r),s=F(r,`
				copy JSON`)},m(r,t){J(e,r,t),w(r,s,t),l=!0},p:C,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){v(e.$$.fragment,r),l=!1},d(r){r&&_(s),D(e,r)}}}function gt(n){let e,s="Loading ...";return{c(){e=R("h2"),e.textContent=s,this.h()},l(l){e=I(l,"H2",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-wq8tmm"&&(e.textContent=s),this.h()},h(){h(e,"class","text-xl text-center")},m(l,r){w(l,e,r)},p:C,i:C,o:C,d(l){l&&_(e)}}}function bt(n){let e,s,l,r,t,i,o,a,f,u,m,c=!n[3]&&Ce(n);return{c(){e=R("div"),s=R("pre"),l=R("code"),r=U(),t=R("textarea"),o=U(),c&&c.c(),a=O(),this.h()},l(d){e=I(d,"DIV",{class:!0});var E=P(e);s=I(E,"PRE",{class:!0});var S=P(s);l=I(S,"CODE",{class:!0}),P(l).forEach(_),S.forEach(_),r=q(E),t=I(E,"TEXTAREA",{spellcheck:!0,wrap:!0,autocorrect:!0,autocapitalize:!0,translate:!0,class:!0}),P(t).forEach(_),E.forEach(_),o=q(d),c&&c.l(d),a=O(),this.h()},h(){h(l,"class","svelte-1c016cv"),h(s,"class","language-json svelte-1c016cv"),h(t,"spellcheck","false"),h(t,"wrap","hard"),h(t,"autocorrect","off"),h(t,"autocapitalize","off"),h(t,"translate","no"),h(t,"class","relative svelte-1c016cv"),h(e,"class",i="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(n[3]?"grid":"hidden")+" svelte-1c016cv")},m(d,E){w(d,e,E),y(e,s),y(s,l),n[21](l),y(e,r),y(e,t),n[22](t),ke(t,n[2]),w(d,o,E),c&&c.m(d,E),w(d,a,E),f=!0,u||(m=[V(t,"input",n[23]),V(t,"input",n[24])],u=!0)},p(d,E){E[0]&4&&ke(t,d[2]),(!f||E[0]&8&&i!==(i="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(d[3]?"grid":"hidden")+" svelte-1c016cv"))&&h(e,"class",i),d[3]?c&&(x(),v(c,1,1,()=>{c=null}),ee()):c?(c.p(d,E),E[0]&8&&b(c,1)):(c=Ce(d),c.c(),b(c,1),c.m(a.parentNode,a))},i(d){f||(b(c),f=!0)},o(d){v(c),f=!1},d(d){d&&(_(e),_(o),_(a)),n[21](null),n[22](null),c&&c.d(d),u=!1,Be(m)}}}function Ce(n){let e,s,l,r;e=new Ye({props:{data:n[0],rounded:!1,type:n[5]}}),e.$on("refresh",n[25]);let t=n[7]&&De(n);return{c(){B(e.$$.fragment),s=U(),t&&t.c(),l=O()},l(i){T(e.$$.fragment,i),s=q(i),t&&t.l(i),l=O()},m(i,o){J(e,i,o),w(i,s,o),t&&t.m(i,o),w(i,l,o),r=!0},p(i,o){const a={};o[0]&1&&(a.data=i[0]),o[0]&32&&(a.type=i[5]),e.$set(a),i[7]?t?(t.p(i,o),o[0]&128&&b(t,1)):(t=De(i),t.c(),b(t,1),t.m(l.parentNode,l)):t&&(x(),v(t,1,1,()=>{t=null}),ee())},i(i){r||(b(e.$$.fragment,i),b(t),r=!0)},o(i){v(e.$$.fragment,i),v(t),r=!1},d(i){i&&(_(s),_(l)),D(e,i),t&&t.d(i)}}}function De(n){let e,s,l=we(n[7]),r=[];for(let i=0;i<l.length;i+=1)r[i]=Te(Oe(n,l,i));const t=i=>v(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=O()},l(i){for(let o=0;o<r.length;o+=1)r[o].l(i);e=O()},m(i,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,o);w(i,e,o),s=!0},p(i,o){if(o[0]&2240){l=we(i[7]);let a;for(a=0;a<l.length;a+=1){const f=Oe(i,l,a);r[a]?(r[a].p(f,o),b(r[a],1)):(r[a]=Te(f),r[a].c(),b(r[a],1),r[a].m(e.parentNode,e))}for(x(),a=l.length;a<r.length;a+=1)t(a);ee()}},i(i){if(!s){for(let o=0;o<l.length;o+=1)b(r[o]);s=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)v(r[o]);s=!1},d(i){i&&_(e),Ze(r,i)}}}function kt(n){let e,s,l,r,t=n[31].name+"",i,o,a;return l=new Ge({props:{class:"m-2"}}),{c(){e=R("a"),s=R("div"),B(l.$$.fragment),r=M(`
										add `),i=M(t),this.h()},l(f){e=I(f,"A",{href:!0});var u=P(e);s=I(u,"DIV",{class:!0});var m=P(s);T(l.$$.fragment,m),r=F(m,`
										add `),i=F(m,t),m.forEach(_),u.forEach(_),this.h()},h(){h(s,"class","flex flex-row items-center"),h(e,"href",o=ie+"/add?type="+n[31].name+"&apiPostPath="+btoa(n[31].entitySubPath)+"&prefix="+n[6])},m(f,u){w(f,e,u),y(e,s),J(l,s,null),y(s,r),y(s,i),a=!0},p(f,u){(!a||u[0]&128)&&t!==(t=f[31].name+"")&&se(i,t),(!a||u[0]&192&&o!==(o=ie+"/add?type="+f[31].name+"&apiPostPath="+btoa(f[31].entitySubPath)+"&prefix="+f[6]))&&h(e,"href",o)},i(f){a||(b(l.$$.fragment,f),a=!0)},o(f){v(l.$$.fragment,f),a=!1},d(f){f&&_(e),D(l)}}}function Je(n){let e,s;return e=new Qe({props:{dataRaw:n[31].data,type:n[31].name,entity:n[31],pathPrefix:n[6]}}),e.$on("refresh",n[27]),{c(){B(e.$$.fragment)},l(l){T(e.$$.fragment,l)},m(l,r){J(e,l,r),s=!0},p(l,r){const t={};r[0]&128&&(t.dataRaw=l[31].data),r[0]&128&&(t.type=l[31].name),r[0]&128&&(t.entity=l[31]),r[0]&64&&(t.pathPrefix=l[6]),e.$set(t)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){v(e.$$.fragment,l),s=!1},d(l){D(e,l)}}}function Te(n){let e,s,l,r,t,i;function o(){return n[26](n[31])}l=new te({props:{color:"alternative",$$slots:{default:[kt]},$$scope:{ctx:n}}}),l.$on("click",o);let a=n[31].data&&n[31].data.length>0&&Je(n);return{c(){e=R("div"),s=R("div"),B(l.$$.fragment),r=U(),a&&a.c(),t=O(),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=P(e);s=I(u,"DIV",{class:!0});var m=P(s);T(l.$$.fragment,m),m.forEach(_),u.forEach(_),r=q(f),a&&a.l(f),t=O(),this.h()},h(){h(s,"class","flex flex-row h-10"),h(e,"class","flex flex-row m-4 h-8 items-center")},m(f,u){w(f,e,u),y(e,s),J(l,s,null),w(f,r,u),a&&a.m(f,u),w(f,t,u),i=!0},p(f,u){n=f;const m={};u[0]&192|u[1]&8&&(m.$$scope={dirty:u,ctx:n}),l.$set(m),n[31].data&&n[31].data.length>0?a?(a.p(n,u),u[0]&128&&b(a,1)):(a=Je(n),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(x(),v(a,1,1,()=>{a=null}),ee())},i(f){i||(b(l.$$.fragment,f),b(a),i=!0)},o(f){v(l.$$.fragment,f),v(a),i=!1},d(f){f&&(_(e),_(r),_(t)),D(l),a&&a.d(f)}}}function vt(n){let e,s,l,r,t,i,o,a,f,u,m,c,d=n[0]&&Ne(n);t=new te({props:{class:"h-10 m-1 focus:shadow-none",$$slots:{default:[ut]},$$scope:{ctx:n}}}),t.$on("click",n[17]);const E=[dt,ct],S=[];function W(g,$){return g[3]?1:0}o=W(n),a=S[o]=E[o](n);const X=[bt,gt],L=[];function G(g,$){return g[0]?0:1}return u=G(n),m=L[u]=X[u](n),{c(){d&&d.c(),e=O(),s=U(),l=R("div"),r=R("div"),B(t.$$.fragment),i=U(),a.c(),f=U(),m.c(),this.h()},l(g){const $=Me("svelte-1y732uo",document.head);d&&d.l($),e=O(),$.forEach(_),s=q(g),l=I(g,"DIV",{class:!0});var N=P(l);r=I(N,"DIV",{class:!0});var j=P(r);T(t.$$.fragment,j),i=q(j),a.l(j),j.forEach(_),f=q(N),m.l(N),N.forEach(_),this.h()},h(){h(r,"class","flex flex-row flex-wrap m-2"),h(l,"class","mb-2")},m(g,$){d&&d.m(document.head,null),y(document.head,e),w(g,s,$),w(g,l,$),y(l,r),J(t,r,null),y(r,i),S[o].m(r,null),y(l,f),L[u].m(l,null),c=!0},p(g,$){g[0]?d||(d=Ne(g),d.c(),d.m(e.parentNode,e)):d&&(d.d(1),d=null);const N={};$[1]&8&&(N.$$scope={dirty:$,ctx:g}),t.$set(N);let j=o;o=W(g),o===j?S[o].p(g,$):(x(),v(S[j],1,1,()=>{S[j]=null}),ee(),a=S[o],a?a.p(g,$):(a=S[o]=E[o](g),a.c()),b(a,1),a.m(r,null));let Q=u;u=G(g),u===Q?L[u].p(g,$):(x(),v(L[Q],1,1,()=>{L[Q]=null}),ee(),m=L[u],m?m.p(g,$):(m=L[u]=X[u](g),m.c()),b(m,1),m.m(l,null))},i(g){c||(b(t.$$.fragment,g),b(a),b(m),c=!0)},o(g){v(t.$$.fragment,g),v(a),v(m),c=!1},d(g){g&&(_(s),_(l)),d&&d.d(g),_(e),D(t),S[o].d(),L[u].d()}}}function wt(n,e,s){let l;He(n,xe,k=>s(16,l=k));let{data:r={}}=e,t="",i="",o=!1,a,f,u="",m="",c,d,E=!1;qe(()=>{E=!0,W()});function S(){const k=new URL(window.location.toString());o==!0?k.searchParams.set("isEdited","true"):k.searchParams.delete("isEdited"),history.pushState(null,"",k)}async function W(){var Y;if(!E)return;s(0,r=void 0),s(3,o=!1);const k=new URLSearchParams(window.location.search);s(5,f=k.get("type")??"none"),s(4,a=k.get("id")??"none");let A=k.get("isEdited")??"";s(3,o=A=="true"),u=k.get("prefix")??"",f=="upstreams"&&s(6,m=`/upstreams/${a}`);{s(0,r=void 0);const ne=await(await ae()).findRecord(f,a,u);ne.ok||(re(`failed to fetch ${f} with id ${a}. Status code: ${ne.code}`),await de(`${ie}/entities?type=services`)),s(0,r=ne.data),s(0,r=rt(r,it)),s(2,i=JSON.stringify(r,void 0,2)),s(1,t=i),c=$e.find(z=>z.name==f),s(7,d=$e.filter(z=>{var le;return(le=c==null?void 0:c.subEntities)==null?void 0:le.includes(z.name)}).map(z=>({...z,entitySubPath:`${f}/${a}/${z.name}`})));for(const z of d){const le=await(await ae()).findAll(z.name,{},`/${f}/${a}`);if(!le.ok){re(`failed to load ${z.name}`);continue}z.data=(Y=le.data)==null?void 0:Y.data,s(7,d)}}N()}async function X(k,A,Y){if(!confirm(`Please confirm deletion of '${Y}'`))return;const z=await(await ae()).deleteRecord(k,A,u);z.ok?(me("deleted"),de(`${ie}/entities?type=${f}&prefix=${u}`)):re(`failed to delete. ${z.err}`)}function L(){let k;try{k=JSON.parse(i)}catch(A){re(`Failed to parse JSON. ${A.message}`);return}s(2,i=JSON.stringify(k,void 0,2)),N(),me("json is valid")}async function G(){var Y;if(!confirm("confirm save?"))return;L();const A=await(await ae()).updateRecord(f,a,JSON.parse(i),u);if(console.log(A),A.ok)me("entity successfully updated");else{re(`API error (${A.code}): `+(((Y=A.errTyped)==null?void 0:Y.message)??A.err),!0,15e3);return}s(3,o=!o),s(3,o),s(0,r=JSON.parse(i)),s(1,t=i)}let g,$;async function N(){s(2,i=i.replace(/\t/g,"  ")),s(2,i=i.replace(/\s\n$/g,`
 `)),$&&(s(9,$.textContent=i,$),globalThis.Prism.highlightElement($))}const j=()=>{s(3,o=!o),S(),N()},Q=async()=>await X(f,a,r.name??r.id),ce=()=>{et(t)},p=async()=>await G();function ze(k){ve[k?"unshift":"push"](()=>{$=k,s(9,$)})}function Ie(k){ve[k?"unshift":"push"](()=>{g=k,s(8,g)})}function Re(){i=this.value,s(2,i)}const je=()=>{N()},We=()=>{W()},Ae=k=>{de(`${ie}/add?type=${k.name}&apiPostPath=${btoa(k.entitySubPath)}&prefix=${m}`)},Ve=async()=>await W();return n.$$set=k=>{"data"in k&&s(0,r=k.data)},n.$$.update=()=>{n.$$.dirty[0]&65536&&W()},[r,t,i,o,a,f,m,d,g,$,S,W,X,L,G,N,l,j,Q,ce,p,ze,Ie,Re,je,We,Ae,Ve]}class $t extends he{constructor(e){super(),pe(this,e,wt,vt,_e,{data:0},null,[-1,-1])}}function Et(n){let e,s;return e=new $t({}),{c(){B(e.$$.fragment)},l(l){T(e.$$.fragment,l)},m(l,r){J(e,l,r),s=!0},p:C,i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){v(e.$$.fragment,l),s=!1},d(l){D(e,l)}}}class Rt extends he{constructor(e){super(),pe(this,e,null,Et,_e,{})}}export{Rt as component};
