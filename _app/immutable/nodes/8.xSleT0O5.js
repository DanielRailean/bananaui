import{s as y,d as m,i as x,b as f,l as u,c as d,e as _,g as T,h as $,j as D,k as I,o as P,f as S,t as q}from"../chunks/scheduler.D5A9P7uc.js";import{S as A,i as B,d as h,t as g,a as k,m as b,b as w,e as v}from"../chunks/index.CAvwUErb.js";import{T as C}from"../chunks/treeWrapper.BHX-UWoA.js";import{u as E,D as M}from"../chunks/stores.D3xJQtDs.js";import{w as V,a as j,c as F}from"../chunks/util.CjnGZA31.js";import{B as J}from"../chunks/Button.DxtcnkkL.js";function L(i){let a;return{c(){a=q("copy personal API token")},l(e){a=S(e,"copy personal API token")},m(e,n){x(e,a,n)},d(e){e&&m(a)}}}function N(i){let a,e,n,s,o,c;return e=new C({props:{data:i[0],expandLevel:0}}),o=new J({props:{class:"m-2",$$slots:{default:[L]},$$scope:{ctx:i}}}),o.$on("click",i[2]),{c(){a=$("div"),v(e.$$.fragment),n=D(),s=$("div"),v(o.$$.fragment),this.h()},l(t){a=d(t,"DIV",{class:!0});var r=_(a);w(e.$$.fragment,r),n=T(r),s=d(r,"DIV",{class:!0});var l=_(s);w(o.$$.fragment,l),l.forEach(m),r.forEach(m),this.h()},h(){u(s,"class","flex flex-row items-center"),u(a,"class","w-full")},m(t,r){x(t,a,r),b(e,a,null),f(a,n),f(a,s),b(o,s,null),c=!0},p(t,[r]){const l={};r&1&&(l.data=t[0]),e.$set(l);const p={};r&8&&(p.$$scope={dirty:r,ctx:t}),o.$set(p)},i(t){c||(k(e.$$.fragment,t),k(o.$$.fragment,t),c=!0)},o(t){g(e.$$.fragment,t),g(o.$$.fragment,t),c=!1},d(t){t&&m(a),h(e),h(o)}}}function O(i,a,e){let n;I(i,E,c=>e(1,n=c));let s={username:"",email:"",payload:{}};return P(()=>{const c=n==null?void 0:n.token.split(".");if(!c){j({message:"no token!"});return}const t=JSON.parse(atob(c[1]));e(0,s.payload=t,s),e(0,s.username=t.name,s),e(0,s.email=t.unique_name,s)}),[s,n,()=>{V((n==null?void 0:n.token)??"",()=>{F(`copied! expires at ${M.fromMillis(s.payload.exp*1e3).toFormat("T")}`)})}]}class R extends A{constructor(a){super(),B(this,a,O,N,y,{})}}export{R as component};
