import{s as fe,v as P,i as v,n as J,f as _,w as de,x as Ce,y as le,z as me,A as I,J as F,K as M,b as y,l as g,L as re,h as E,u as T,r as Be,t as W,d as j,j as ae,e as z,a as Z,c as A,g as K,k as De,o as Je,p as Le,q as _e,N as Te}from"../chunks/scheduler.CygsJwb4.js";import{S as ue,i as ce,c as N,a as C,m as B,t as p,g as U,b as k,e as X,d as D}from"../chunks/index.CTorNDhm.js";import{e as he}from"../chunks/each.C0lqVhei.js";import{T as ze,F as Ae,C as We,A as je}from"../chunks/ArrayWrap.D0hWNGbd.js";import{B as x}from"../chunks/Button.BrGvNtFA.js";import{T as Ie}from"../chunks/treeWrapper.B7iTsdNv.js";import{a as te}from"../chunks/requests.PzpfOg7i.js";import{g as pe,b as se}from"../chunks/entry.BEIN-6mO.js";import{p as Re}from"../chunks/stores.BZXYSml4.js";import{g as Ne,w as Ve}from"../chunks/util.Bx4J9gXx.js";import{a as Y}from"../chunks/stores.C8A7kter.js";import{t as ie}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as Fe,F as Me}from"../chunks/PaletteOutline.C7ZCmyZa.js";import{a as qe,k as ge,f as He}from"../chunks/config.Dmd9iIHM.js";function Ze(a){let e,r,l,t,i,s=a[4].id&&a[4].title&&be(a),o=a[6].id&&a[6].desc&&ke(a),n=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ie("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":i=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let u=0;u<n.length;u+=1)f=le(f,n[u]);return{c(){e=F("svg"),s&&s.c(),r=P(),o&&o.c(),l=F("path"),this.h()},l(u){e=M(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var c=y(e);s&&s.l(c),r=P(),o&&o.l(c),l=M(c,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(_),c.forEach(_),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),re(e,f)},m(u,c){v(u,e,c),s&&s.m(e,null),E(e,r),o&&o.m(e,null),E(e,l)},p(u,c){u[4].id&&u[4].title?s?s.p(u,c):(s=be(u),s.c(),s.m(e,r)):s&&(s.d(1),s=null),u[6].id&&u[6].desc?o?o.p(u,c):(o=ke(u),o.c(),o.m(e,l)):o&&(o.d(1),o=null),c&32&&g(l,"stroke-width",u[5]),re(e,f=Ne(n,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},c&4&&{color:u[2]},c&2048&&u[11],c&4097&&t!==(t=ie("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:t},c&2&&{role:u[1]},c&128&&{"aria-label":u[7]},c&256&&i!==(i=u[8]?u[10]:void 0)&&{"aria-describedby":i},{viewBox:"0 0 24 24"}]))},d(u){u&&_(e),s&&s.d(),o&&o.d()}}}function Ke(a){let e,r,l,t,i,s,o,n=a[4].id&&a[4].title&&ve(a),f=a[6].id&&a[6].desc&&we(a),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ie("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":i=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],c={};for(let h=0;h<u.length;h+=1)c=le(c,u[h]);return{c(){e=F("svg"),n&&n.c(),r=P(),f&&f.c(),l=F("path"),this.h()},l(h){e=M(h,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var d=y(e);n&&n.l(d),r=P(),f&&f.l(d),l=M(d,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(_),d.forEach(_),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),re(e,c)},m(h,d){v(h,e,d),n&&n.m(e,null),E(e,r),f&&f.m(e,null),E(e,l),s||(o=[T(e,"click",a[13]),T(e,"keydown",a[14]),T(e,"keyup",a[15]),T(e,"focus",a[16]),T(e,"blur",a[17]),T(e,"mouseenter",a[18]),T(e,"mouseleave",a[19]),T(e,"mouseover",a[20]),T(e,"mouseout",a[21])],s=!0)},p(h,d){h[4].id&&h[4].title?n?n.p(h,d):(n=ve(h),n.c(),n.m(e,r)):n&&(n.d(1),n=null),h[6].id&&h[6].desc?f?f.p(h,d):(f=we(h),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d&32&&g(l,"stroke-width",h[5]),re(e,c=Ne(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},d&4&&{color:h[2]},d&2048&&h[11],d&4097&&t!==(t=ie("shrink-0",h[9][h[0]??"md"],h[12].class))&&{class:t},d&2&&{role:h[1]},d&128&&{"aria-label":h[7]},d&256&&i!==(i=h[8]?h[10]:void 0)&&{"aria-describedby":i},{viewBox:"0 0 24 24"}]))},d(h){h&&_(e),n&&n.d(),f&&f.d(),s=!1,Be(o)}}}function be(a){let e,r=a[4].title+"",l,t;return{c(){e=F("title"),l=W(r),this.h()},l(i){e=M(i,"title",{id:!0});var s=y(e);l=j(s,r),s.forEach(_),this.h()},h(){g(e,"id",t=a[4].id)},m(i,s){v(i,e,s),E(e,l)},p(i,s){s&16&&r!==(r=i[4].title+"")&&ae(l,r),s&16&&t!==(t=i[4].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function ke(a){let e,r=a[6].desc+"",l,t;return{c(){e=F("desc"),l=W(r),this.h()},l(i){e=M(i,"desc",{id:!0});var s=y(e);l=j(s,r),s.forEach(_),this.h()},h(){g(e,"id",t=a[6].id)},m(i,s){v(i,e,s),E(e,l)},p(i,s){s&64&&r!==(r=i[6].desc+"")&&ae(l,r),s&64&&t!==(t=i[6].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function ve(a){let e,r=a[4].title+"",l,t;return{c(){e=F("title"),l=W(r),this.h()},l(i){e=M(i,"title",{id:!0});var s=y(e);l=j(s,r),s.forEach(_),this.h()},h(){g(e,"id",t=a[4].id)},m(i,s){v(i,e,s),E(e,l)},p(i,s){s&16&&r!==(r=i[4].title+"")&&ae(l,r),s&16&&t!==(t=i[4].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function we(a){let e,r=a[6].desc+"",l,t;return{c(){e=F("desc"),l=W(r),this.h()},l(i){e=M(i,"desc",{id:!0});var s=y(e);l=j(s,r),s.forEach(_),this.h()},h(){g(e,"id",t=a[6].id)},m(i,s){v(i,e,s),E(e,l)},p(i,s){s&64&&r!==(r=i[6].desc+"")&&ae(l,r),s&64&&t!==(t=i[6].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function Ue(a){let e;function r(i,s){return i[3]?Ke:Ze}let l=r(a),t=l(a);return{c(){t.c(),e=P()},l(i){t.l(i),e=P()},m(i,s){t.m(i,s),v(i,e,s)},p(i,[s]){l===(l=r(i))&&t?t.p(i,s):(t.d(1),t=l(i),t&&(t.c(),t.m(e.parentNode,e)))},i:J,o:J,d(i){i&&_(e),t.d(i)}}}function Xe(a,e,r){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let t=de(e,l);const i=Ce("iconCtx")??{},s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=i.size||"md"}=e,{role:n=i.role||"img"}=e,{color:f=i.color||"currentColor"}=e,{withEvents:u=i.withEvents||!1}=e,{title:c={}}=e,{strokeWidth:h=i.strokeWidth||"2"}=e,{desc:d={}}=e,q=`${c.id||""} ${d.id||""}`,O=!1,{ariaLabel:R="edit outline"}=e;function b(m){I.call(this,a,m)}function w(m){I.call(this,a,m)}function S(m){I.call(this,a,m)}function G(m){I.call(this,a,m)}function Q(m){I.call(this,a,m)}function H(m){I.call(this,a,m)}function ne(m){I.call(this,a,m)}function oe(m){I.call(this,a,m)}function $(m){I.call(this,a,m)}return a.$$set=m=>{r(12,e=le(le({},e),me(m))),r(11,t=de(e,l)),"size"in m&&r(0,o=m.size),"role"in m&&r(1,n=m.role),"color"in m&&r(2,f=m.color),"withEvents"in m&&r(3,u=m.withEvents),"title"in m&&r(4,c=m.title),"strokeWidth"in m&&r(5,h=m.strokeWidth),"desc"in m&&r(6,d=m.desc),"ariaLabel"in m&&r(7,R=m.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(c.id||d.id?r(8,O=!0):r(8,O=!1))},e=me(e),[o,n,f,u,c,h,d,R,O,s,q,t,e,b,w,S,G,Q,H,ne,oe,$]}class Ge extends ue{constructor(e){super(),ce(this,e,Xe,Ue,fe,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function $e(a,e,r){const l=a.slice();return l[22]=e[r],l}function Qe(a){let e,r,l;return e=new Ge({props:{class:"m-2"}}),{c(){N(e.$$.fragment),r=W("edit")},l(t){C(e.$$.fragment,t),r=j(t,"edit")},m(t,i){B(e,t,i),v(t,r,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(r),D(e,t)}}}function Ye(a){let e,r,l,t,i;return l=new ze({props:{class:"m-1"}}),{c(){e=z("div"),r=z("div"),N(l.$$.fragment),t=W(`
					delete`),this.h()},l(s){e=A(s,"DIV",{class:!0});var o=y(e);r=A(o,"DIV",{class:!0});var n=y(r);C(l.$$.fragment,n),t=j(n,`
					delete`),n.forEach(_),o.forEach(_),this.h()},h(){g(r,"class","flex flex-row items-center"),g(e,"class","text-rose-500")},m(s,o){v(s,e,o),E(e,r),B(l,r,null),E(r,t),i=!0},p:J,i(s){i||(p(l.$$.fragment,s),i=!0)},o(s){k(l.$$.fragment,s),i=!1},d(s){s&&_(e),D(l)}}}function xe(a){let e,r,l;return e=new Ae({props:{class:"m-2"}}),{c(){N(e.$$.fragment),r=W(`
			copy`)},l(t){C(e.$$.fragment,t),r=j(t,`
			copy`)},m(t,i){B(e,t,i),v(t,r,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(r),D(e,t)}}}function Ee(a){let e,r,l,t;e=new x({props:{class:"mr-3",color:"blue",$$slots:{default:[et]},$$scope:{ctx:a}}}),e.$on("click",a[9]);let i=a[1]!=a[2]&&ye(a);return{c(){N(e.$$.fragment),r=Z(),i&&i.c(),l=P()},l(s){C(e.$$.fragment,s),r=K(s),i&&i.l(s),l=P()},m(s,o){B(e,s,o),v(s,r,o),i&&i.m(s,o),v(s,l,o),t=!0},p(s,o){const n={};o&33554432&&(n.$$scope={dirty:o,ctx:s}),e.$set(n),s[1]!=s[2]?i?(i.p(s,o),o&6&&p(i,1)):(i=ye(s),i.c(),p(i,1),i.m(l.parentNode,l)):i&&(U(),k(i,1,1,()=>{i=null}),X())},i(s){t||(p(e.$$.fragment,s),p(i),t=!0)},o(s){k(e.$$.fragment,s),k(i),t=!1},d(s){s&&(_(r),_(l)),D(e,s),i&&i.d(s)}}}function et(a){let e,r,l;return e=new Fe({props:{class:"m-2"}}),{c(){N(e.$$.fragment),r=W(`
				format and validate JSON`)},l(t){C(e.$$.fragment,t),r=j(t,`
				format and validate JSON`)},m(t,i){B(e,t,i),v(t,r,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(r),D(e,t)}}}function ye(a){let e,r;return e=new x({props:{class:"mr-3",color:"green",$$slots:{default:[tt]},$$scope:{ctx:a}}}),e.$on("click",a[15]),{c(){N(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,t){B(e,l,t),r=!0},p(l,t){const i={};t&33554432&&(i.$$scope={dirty:t,ctx:l}),e.$set(i)},i(l){r||(p(e.$$.fragment,l),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){D(e,l)}}}function tt(a){let e,r,l;return e=new Me({props:{class:"m-2"}}),{c(){N(e.$$.fragment),r=W(`
					save`)},l(t){C(e.$$.fragment,t),r=j(t,`
					save`)},m(t,i){B(e,t,i),v(t,r,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(r),D(e,t)}}}function lt(a){let e,r="Loading ...";return{c(){e=z("h2"),e.textContent=r,this.h()},l(l){e=A(l,"H2",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-wq8tmm"&&(e.textContent=r),this.h()},h(){g(e,"class","text-xl text-center")},m(l,t){v(l,e,t)},p:J,i:J,o:J,d(l){l&&_(e)}}}function rt(a){let e,r,l,t;const i=[it,st],s=[];function o(n,f){return n[3]?0:1}return e=o(a),r=s[e]=i[e](a),{c(){r.c(),l=P()},l(n){r.l(n),l=P()},m(n,f){s[e].m(n,f),v(n,l,f),t=!0},p(n,f){let u=e;e=o(n),e===u?s[e].p(n,f):(U(),k(s[u],1,1,()=>{s[u]=null}),X(),r=s[e],r?r.p(n,f):(r=s[e]=i[e](n),r.c()),p(r,1),r.m(l.parentNode,l))},i(n){t||(p(r),t=!0)},o(n){k(r),t=!1},d(n){n&&_(l),s[e].d(n)}}}function st(a){let e,r,l,t;e=new Ie({props:{data:a[0],rounded:!1,type:a[5]}}),e.$on("refresh",a[17]);let i=a[6]&&Pe(a);return{c(){N(e.$$.fragment),r=Z(),i&&i.c(),l=P()},l(s){C(e.$$.fragment,s),r=K(s),i&&i.l(s),l=P()},m(s,o){B(e,s,o),v(s,r,o),i&&i.m(s,o),v(s,l,o),t=!0},p(s,o){const n={};o&1&&(n.data=s[0]),o&32&&(n.type=s[5]),e.$set(n),s[6]?i?(i.p(s,o),o&64&&p(i,1)):(i=Pe(s),i.c(),p(i,1),i.m(l.parentNode,l)):i&&(U(),k(i,1,1,()=>{i=null}),X())},i(s){t||(p(e.$$.fragment,s),p(i),t=!0)},o(s){k(e.$$.fragment,s),k(i),t=!1},d(s){s&&(_(r),_(l)),D(e,s),i&&i.d(s)}}}function it(a){let e,r,l;return{c(){e=z("textarea"),this.h()},l(t){e=A(t,"TEXTAREA",{class:!0}),y(e).forEach(_),this.h()},h(){g(e,"class","dark:bg-[#1E2021] w-full min-h-[70vh]")},m(t,i){v(t,e,i),_e(e,a[2]),r||(l=T(e,"input",a[16]),r=!0)},p(t,i){i&4&&_e(e,t[2])},i:J,o:J,d(t){t&&_(e),r=!1,l()}}}function Pe(a){let e,r,l=he(a[6]),t=[];for(let s=0;s<l.length;s+=1)t[s]=Se($e(a,l,s));const i=s=>k(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=P()},l(s){for(let o=0;o<t.length;o+=1)t[o].l(s);e=P()},m(s,o){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,o);v(s,e,o),r=!0},p(s,o){if(o&192){l=he(s[6]);let n;for(n=0;n<l.length;n+=1){const f=$e(s,l,n);t[n]?(t[n].p(f,o),p(t[n],1)):(t[n]=Se(f),t[n].c(),p(t[n],1),t[n].m(e.parentNode,e))}for(U(),n=l.length;n<t.length;n+=1)i(n);X()}},i(s){if(!r){for(let o=0;o<l.length;o+=1)p(t[o]);r=!0}},o(s){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)k(t[o]);r=!1},d(s){s&&_(e),Te(t,s)}}}function at(a){let e,r,l,t,i,s;return l=new We({props:{class:"m-2"}}),{c(){e=z("a"),r=z("div"),N(l.$$.fragment),t=W(`
										add`),this.h()},l(o){e=A(o,"A",{href:!0});var n=y(e);r=A(n,"DIV",{class:!0});var f=y(r);C(l.$$.fragment,f),t=j(f,`
										add`),f.forEach(_),n.forEach(_),this.h()},h(){g(r,"class","flex flex-row items-center"),g(e,"href",i=se+"/add?type="+a[22].name+"&apiPostPath="+btoa(a[22].entitySubPath))},m(o,n){v(o,e,n),E(e,r),B(l,r,null),E(r,t),s=!0},p(o,n){(!s||n&64&&i!==(i=se+"/add?type="+o[22].name+"&apiPostPath="+btoa(o[22].entitySubPath)))&&g(e,"href",i)},i(o){s||(p(l.$$.fragment,o),s=!0)},o(o){k(l.$$.fragment,o),s=!1},d(o){o&&_(e),D(l)}}}function Oe(a){let e,r;return e=new je({props:{dataRaw:a[22].data,type:a[22].name,entity:a[22]}}),e.$on("refresh",a[19]),{c(){N(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,t){B(e,l,t),r=!0},p(l,t){const i={};t&64&&(i.dataRaw=l[22].data),t&64&&(i.type=l[22].name),t&64&&(i.entity=l[22]),e.$set(i)},i(l){r||(p(e.$$.fragment,l),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){D(e,l)}}}function Se(a){let e,r,l,t,i,s;function o(){return a[18](a[22])}l=new x({props:{color:"alternative",$$slots:{default:[at]},$$scope:{ctx:a}}}),l.$on("click",o);let n=a[22].data&&a[22].data.length>0&&Oe(a);return{c(){e=z("div"),r=z("div"),N(l.$$.fragment),t=Z(),n&&n.c(),i=P(),this.h()},l(f){e=A(f,"DIV",{class:!0});var u=y(e);r=A(u,"DIV",{class:!0});var c=y(r);C(l.$$.fragment,c),c.forEach(_),u.forEach(_),t=K(f),n&&n.l(f),i=P(),this.h()},h(){g(r,"class","flex flex-row h-8"),g(e,"class","flex flex-row m-4 h-8 items-center")},m(f,u){v(f,e,u),E(e,r),B(l,r,null),v(f,t,u),n&&n.m(f,u),v(f,i,u),s=!0},p(f,u){a=f;const c={};u&33554496&&(c.$$scope={dirty:u,ctx:a}),l.$set(c),a[22].data&&a[22].data.length>0?n?(n.p(a,u),u&64&&p(n,1)):(n=Oe(a),n.c(),p(n,1),n.m(i.parentNode,i)):n&&(U(),k(n,1,1,()=>{n=null}),X())},i(f){s||(p(l.$$.fragment,f),p(n),s=!0)},o(f){k(l.$$.fragment,f),k(n),s=!1},d(f){f&&(_(e),_(t),_(i)),D(l),n&&n.d(f)}}}function nt(a){let e,r,l,t,i,s,o,n,f,u,c,h;l=new x({props:{class:"mr-2",$$slots:{default:[Qe]},$$scope:{ctx:a}}}),l.$on("click",a[12]),i=new x({props:{class:"h-8 p-2 mr-2",title:"delete",color:"alternative",$$slots:{default:[Ye]},$$scope:{ctx:a}}}),i.$on("click",a[13]),o=new x({props:{color:"alternative",class:"mr-2",$$slots:{default:[xe]},$$scope:{ctx:a}}}),o.$on("click",a[14]);let d=a[3]&&Ee(a);const q=[rt,lt],O=[];function R(b,w){return b[0]?0:1}return u=R(a),c=O[u]=q[u](a),{c(){e=z("div"),r=z("div"),N(l.$$.fragment),t=Z(),N(i.$$.fragment),s=Z(),N(o.$$.fragment),n=Z(),d&&d.c(),f=Z(),c.c(),this.h()},l(b){e=A(b,"DIV",{class:!0});var w=y(e);r=A(w,"DIV",{class:!0});var S=y(r);C(l.$$.fragment,S),t=K(S),C(i.$$.fragment,S),s=K(S),C(o.$$.fragment,S),n=K(S),d&&d.l(S),S.forEach(_),f=K(w),c.l(w),w.forEach(_),this.h()},h(){g(r,"class","flex flex-row m-4 h-8"),g(e,"class","mb-2")},m(b,w){v(b,e,w),E(e,r),B(l,r,null),E(r,t),B(i,r,null),E(r,s),B(o,r,null),E(r,n),d&&d.m(r,null),E(e,f),O[u].m(e,null),h=!0},p(b,[w]){const S={};w&33554432&&(S.$$scope={dirty:w,ctx:b}),l.$set(S);const G={};w&33554432&&(G.$$scope={dirty:w,ctx:b}),i.$set(G);const Q={};w&33554432&&(Q.$$scope={dirty:w,ctx:b}),o.$set(Q),b[3]?d?(d.p(b,w),w&8&&p(d,1)):(d=Ee(b),d.c(),p(d,1),d.m(r,null)):d&&(U(),k(d,1,1,()=>{d=null}),X());let H=u;u=R(b),u===H?O[u].p(b,w):(U(),k(O[H],1,1,()=>{O[H]=null}),X(),c=O[u],c?c.p(b,w):(c=O[u]=q[u](b),c.c()),p(c,1),c.m(e,null))},i(b){h||(p(l.$$.fragment,b),p(i.$$.fragment,b),p(o.$$.fragment,b),p(d),p(c),h=!0)},o(b){k(l.$$.fragment,b),k(i.$$.fragment,b),k(o.$$.fragment,b),k(d),k(c),h=!1},d(b){b&&_(e),D(l),D(i),D(o),d&&d.d(),O[u].d()}}}function ot(a,e,r){let l;De(a,Re,$=>r(11,l=$));let{data:t={}}=e,i="",s="",o=!1,n,f,u,c,h=!1;Je(()=>{h=!0,d()});async function d(){var m;if(!h)return;r(0,t=void 0);const $=new URLSearchParams(window.location.search);r(5,f=$.get("type")??"none"),r(4,n=$.get("id")??"none");{r(0,t=void 0);const ee=await(await te()).findRecord(f,n);r(0,t=ee.data),r(0,t=qe(t,He)),r(2,s=JSON.stringify(t,void 0,2)),r(1,i=s),u=ge.find(L=>L.name==f),r(6,c=ge.filter(L=>{var V;return(V=u==null?void 0:u.subEntities)==null?void 0:V.includes(L.name)}).map(L=>({...L,entitySubPath:`${f}/${n}/${L.name}`})));for(const L of c){const V=await(await te()).findAll(L.name,{},`/${f}/${n}`);if(!V.ok){Y({message:`failed to load ${L.name}`});continue}L.data=(m=V.data)==null?void 0:m.data,r(6,c)}}}async function q($,m,ee){if(!confirm(`Please confirm deletion of '${ee}'`))return;const V=await(await te()).deleteRecord($,m);V.ok?(Y({message:"ok",type:"info"}),pe(`${se}/entities?type=${f}`)):Y({message:`failed to delete. ${V.err}`})}function O(){let $;try{$=JSON.parse(s)}catch(m){Y({message:`Failed to parse JSON. ${m.message}`});return}r(2,s=JSON.stringify($,void 0,2)),Y({message:"ok",type:"info"})}async function R(){if(confirm("confirm save?")){O();try{const m=await(await te()).updateRecord(f,n,JSON.parse(s));r(3,o=!o),r(3,o),r(0,t=JSON.parse(s)),r(1,i=s)}catch(m){const ee=m.response.data;Y({message:ee.message})}}}const b=()=>{r(3,o=!o)},w=async()=>await q(f,n,t.name??t.id),S=()=>{Ve(i)},G=async()=>await R();function Q(){s=this.value,r(2,s)}const H=()=>{d()},ne=$=>{pe(`${se}/add?type=${$.name}&apiPostPath=${btoa($.entitySubPath)}`)},oe=async()=>await d();return a.$$set=$=>{"data"in $&&r(0,t=$.data)},a.$$.update=()=>{a.$$.dirty&2048&&d()},[t,i,s,o,n,f,c,d,q,O,R,l,b,w,S,G,Q,H,ne,oe]}class ft extends ue{constructor(e){super(),ce(this,e,ot,nt,fe,{data:0})}}function ut(a){let e,r;return e=new ft({}),{c(){N(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,t){B(e,l,t),r=!0},p:J,i(l){r||(p(e.$$.fragment,l),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){D(e,l)}}}class Pt extends ue{constructor(e){super(),ce(this,e,null,ut,fe,{})}}export{Pt as component};
