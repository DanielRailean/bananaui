import{s as de,n as T,d as m,i as p,v as L,w as Y,x as ke,y as H,z as Z,F as z,r as pe,l as b,H as J,b as w,q as B,I as P,e as y,J as j,a as O,f as A,t as D,K as we,g as G,c as I,j as Q,h as q,o as Ee}from"../chunks/scheduler.DtmLzn2i.js";import{S as ue,i as ce,d as F,t as W,a as R,e as ye,m as U,c as V,b as N,g as Me}from"../chunks/index.CMaRIr4Q.js";import{s as $,k as ze,p as x}from"../chunks/config.5Jeu0uQ-.js";import{C as Be,A as Ce}from"../chunks/ArrayWrap.tAqaftCc.js";import{g as he,b as ee,i as te,e as Le,d as le,a as Pe}from"../chunks/util.DtJGXF3T.js";import{t as K}from"../chunks/bundle-mjs.D696Ktp4.js";import{b as X,g as je}from"../chunks/entry.CneEcUK4.js";import{D as ie,t as Ae}from"../chunks/stores.iwHf9bzr.js";import{a as se}from"../chunks/requests.B-ceXCq2.js";import{p as De}from"../chunks/stores.DhaKs1XD.js";import{B as ae}from"../chunks/Button.L23fji-o.js";function We(i){let e,a,l,s,t,r=i[4].id&&i[4].title&&re(i),n=i[6].id&&i[6].desc&&oe(i),d=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=K("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let o=0;o<d.length;o+=1)f=H(f,d[o]);return{c(){e=j("svg"),r&&r.c(),a=L(),n&&n.c(),l=j("path"),this.h()},l(o){e=P(o,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=y(e);r&&r.l(_),a=L(),n&&n.l(_),l=P(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),_.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",i[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),J(e,f)},m(o,_){p(o,e,_),r&&r.m(e,null),w(e,a),n&&n.m(e,null),w(e,l)},p(o,_){o[4].id&&o[4].title?r?r.p(o,_):(r=re(o),r.c(),r.m(e,a)):r&&(r.d(1),r=null),o[6].id&&o[6].desc?n?n.p(o,_):(n=oe(o),n.c(),n.m(e,l)):n&&(n.d(1),n=null),_&32&&b(l,"stroke-width",o[5]),J(e,f=he(d,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:o[2]},_&2048&&o[11],_&4097&&s!==(s=K("shrink-0",o[9][o[0]??"md"],o[12].class))&&{class:s},_&2&&{role:o[1]},_&128&&{"aria-label":o[7]},_&256&&t!==(t=o[8]?o[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(o){o&&m(e),r&&r.d(),n&&n.d()}}}function Re(i){let e,a,l,s,t,r,n,d=i[4].id&&i[4].title&&ne(i),f=i[6].id&&i[6].desc&&fe(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=K("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let u=0;u<o.length;u+=1)_=H(_,o[u]);return{c(){e=j("svg"),d&&d.c(),a=L(),f&&f.c(),l=j("path"),this.h()},l(u){e=P(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var g=y(e);d&&d.l(g),a=L(),f&&f.l(g),l=P(g,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),g.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",i[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),J(e,_)},m(u,g){p(u,e,g),d&&d.m(e,null),w(e,a),f&&f.m(e,null),w(e,l),r||(n=[B(e,"click",i[13]),B(e,"keydown",i[14]),B(e,"keyup",i[15]),B(e,"focus",i[16]),B(e,"blur",i[17]),B(e,"mouseenter",i[18]),B(e,"mouseleave",i[19]),B(e,"mouseover",i[20]),B(e,"mouseout",i[21])],r=!0)},p(u,g){u[4].id&&u[4].title?d?d.p(u,g):(d=ne(u),d.c(),d.m(e,a)):d&&(d.d(1),d=null),u[6].id&&u[6].desc?f?f.p(u,g):(f=fe(u),f.c(),f.m(e,l)):f&&(f.d(1),f=null),g&32&&b(l,"stroke-width",u[5]),J(e,_=he(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},g&4&&{color:u[2]},g&2048&&u[11],g&4097&&s!==(s=K("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:s},g&2&&{role:u[1]},g&128&&{"aria-label":u[7]},g&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&m(e),d&&d.d(),f&&f.d(),r=!1,pe(n)}}}function re(i){let e,a=i[4].title+"",l,s;return{c(){e=j("title"),l=D(a),this.h()},l(t){e=P(t,"title",{id:!0});var r=y(e);l=A(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[4].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&O(l,a),r&16&&s!==(s=t[4].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function oe(i){let e,a=i[6].desc+"",l,s;return{c(){e=j("desc"),l=D(a),this.h()},l(t){e=P(t,"desc",{id:!0});var r=y(e);l=A(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[6].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&O(l,a),r&64&&s!==(s=t[6].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function ne(i){let e,a=i[4].title+"",l,s;return{c(){e=j("title"),l=D(a),this.h()},l(t){e=P(t,"title",{id:!0});var r=y(e);l=A(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[4].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&O(l,a),r&16&&s!==(s=t[4].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function fe(i){let e,a=i[6].desc+"",l,s;return{c(){e=j("desc"),l=D(a),this.h()},l(t){e=P(t,"desc",{id:!0});var r=y(e);l=A(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[6].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&O(l,a),r&64&&s!==(s=t[6].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function Se(i){let e;function a(t,r){return t[3]?Re:We}let l=a(i),s=l(i);return{c(){s.c(),e=L()},l(t){s.l(t),e=L()},m(t,r){s.m(t,r),p(t,e,r)},p(t,[r]){l===(l=a(t))&&s?s.p(t,r):(s.d(1),s=l(t),s&&(s.c(),s.m(e.parentNode,e)))},i:T,o:T,d(t){t&&m(e),s.d(t)}}}function Te(i,e,a){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let s=Y(e,l);const t=ke("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:n=t.size||"md"}=e,{role:d=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:o=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:u=t.strokeWidth||"2"}=e,{desc:g={}}=e,E=`${_.id||""} ${g.id||""}`,C=!1,{ariaLabel:c="refresh outline"}=e;function k(h){z.call(this,i,h)}function v(h){z.call(this,i,h)}function M(h){z.call(this,i,h)}function S(h){z.call(this,i,h)}function _e(h){z.call(this,i,h)}function me(h){z.call(this,i,h)}function ge(h){z.call(this,i,h)}function be(h){z.call(this,i,h)}function ve(h){z.call(this,i,h)}return i.$$set=h=>{a(12,e=H(H({},e),Z(h))),a(11,s=Y(e,l)),"size"in h&&a(0,n=h.size),"role"in h&&a(1,d=h.role),"color"in h&&a(2,f=h.color),"withEvents"in h&&a(3,o=h.withEvents),"title"in h&&a(4,_=h.title),"strokeWidth"in h&&a(5,u=h.strokeWidth),"desc"in h&&a(6,g=h.desc),"ariaLabel"in h&&a(7,c=h.ariaLabel)},i.$$.update=()=>{i.$$.dirty&80&&(_.id||g.id?a(8,C=!0):a(8,C=!1))},e=Z(e),[n,d,f,o,_,u,g,c,C,r,E,s,e,k,v,M,S,_e,me,ge,be,ve]}class Ie extends ue{constructor(e){super(),ce(this,e,Te,Se,de,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function qe(i){let e,a,l;return e=new Ie({props:{class:"mr-2"}}),{c(){N(e.$$.fragment),a=D(`
			Refresh`)},l(s){V(e.$$.fragment,s),a=A(s,`
			Refresh`)},m(s,t){U(e,s,t),p(s,a,t),l=!0},p:T,i(s){l||(R(e.$$.fragment,s),l=!0)},o(s){W(e.$$.fragment,s),l=!1},d(s){s&&m(a),F(e,s)}}}function Fe(i){let e,a,l,s,t,r;return l=new Be({props:{class:"mr-2"}}),{c(){e=q("a"),a=q("div"),N(l.$$.fragment),s=D(`
					Add`),this.h()},l(n){e=I(n,"A",{href:!0});var d=y(e);a=I(d,"DIV",{class:!0});var f=y(a);V(l.$$.fragment,f),s=A(f,`
					Add`),f.forEach(m),d.forEach(m),this.h()},h(){b(a,"class","flex flex-row items-center space-x-1"),b(e,"href",t=X+"/add?type="+i[1])},m(n,d){p(n,e,d),w(e,a),U(l,a,null),w(a,s),r=!0},p(n,d){(!r||d&2&&t!==(t=X+"/add?type="+n[1]))&&b(e,"href",t)},i(n){r||(R(l.$$.fragment,n),r=!0)},o(n){W(l.$$.fragment,n),r=!1},d(n){n&&m(e),F(l)}}}function Ue(i){let e,a,l=(i[1]??"")+"",s;return{c(){e=q("p"),a=D("Loading "),s=D(l),this.h()},l(t){e=I(t,"P",{class:!0});var r=y(e);a=A(r,"Loading "),s=A(r,l),r.forEach(m),this.h()},h(){b(e,"class","pl-5 pb-4 text-xl font-light")},m(t,r){p(t,e,r),w(e,a),w(e,s)},p(t,r){r&2&&l!==(l=(t[1]??"")+"")&&O(s,l)},i:T,o:T,d(t){t&&m(e)}}}function Ve(i){let e,a;return e=new Ce({props:{dataRaw:i[0],type:i[1],entity:i[2]}}),e.$on("refresh",i[6]),{c(){N(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){U(e,l,s),a=!0},p(l,s){const t={};s&1&&(t.dataRaw=l[0]),s&2&&(t.type=l[1]),s&4&&(t.entity=l[2]),e.$set(t)},i(l){a||(R(e.$$.fragment,l),a=!0)},o(l){W(e.$$.fragment,l),a=!1},d(l){F(e,l)}}}function Ne(i){let e,a,l,s,t,r,n,d,f,o,_,u;document.title=e=ee(i[1])+" "+(i[1]?"|":"")+" "+$.name,t=new ae({props:{class:" flex flex-row mr-2  items-center bg-green-500 dark:bg-green-700",$$slots:{default:[qe]},$$scope:{ctx:i}}}),t.$on("click",i[4]),n=new ae({props:{class:"flex flex-row mr-2 bg-blue-500 dark:bg-blue-600",$$slots:{default:[Fe]},$$scope:{ctx:i}}}),n.$on("click",i[5]);const g=[Ve,Ue],E=[];function C(c,k){return c[0]?0:1}return f=C(i),o=E[f]=g[f](i),{c(){a=Q(),l=q("div"),s=q("div"),N(t.$$.fragment),r=Q(),N(n.$$.fragment),d=Q(),o.c(),_=L(),this.h()},l(c){we("svelte-c4jj3",document.head).forEach(m),a=G(c),l=I(c,"DIV",{class:!0});var v=y(l);s=I(v,"DIV",{class:!0});var M=y(s);V(t.$$.fragment,M),r=G(M),V(n.$$.fragment,M),M.forEach(m),v.forEach(m),d=G(c),o.l(c),_=L(),this.h()},h(){b(s,"class","flex flex-row mb-2 h-10"),b(l,"class","flex flex-col m-4 mb-3 font-light text-2xl")},m(c,k){p(c,a,k),p(c,l,k),w(l,s),U(t,s,null),w(s,r),U(n,s,null),p(c,d,k),E[f].m(c,k),p(c,_,k),u=!0},p(c,[k]){(!u||k&2)&&e!==(e=ee(c[1])+" "+(c[1]?"|":"")+" "+$.name)&&(document.title=e);const v={};k&1024&&(v.$$scope={dirty:k,ctx:c}),t.$set(v);const M={};k&1026&&(M.$$scope={dirty:k,ctx:c}),n.$set(M);let S=f;f=C(c),f===S?E[f].p(c,k):(Me(),W(E[S],1,1,()=>{E[S]=null}),ye(),o=E[f],o?o.p(c,k):(o=E[f]=g[f](c),o.c()),R(o,1),o.m(_.parentNode,_))},i(c){u||(R(t.$$.fragment,c),R(n.$$.fragment,c),R(o),u=!0)},o(c){W(t.$$.fragment,c),W(n.$$.fragment,c),W(o),u=!1},d(c){c&&(m(a),m(l),m(d),m(_)),F(t),F(n),E[f].d(c)}}}function Oe(i,e,a){let l,s,t,r=!1,n="";De.subscribe(g=>{f()}),Ee(()=>{r=!0,f()});let d;async function f(g=!1){if(!r)return;const E=new URLSearchParams(window.location.search);d=ie.now();const C=s;a(1,s=E.get("type")??"none"),n=E.get("prefix")??"";let c=!1;C!=s&&(a(0,l=void 0),c=!0);try{if(a(2,t=ze.find(M=>M.name==s)),!t)return;let v=await(await se()).findAll(t.apiPath,{},n);if(!v.ok){Le(`failed to fetch the ${s}. ${v.err} (${v.code})`);return}a(0,l=v.data.data);var k=d;for(await le(x);v.data.next&&(v=await(await se()).request(v.data.next??"",void 0,void 0),k==d);)v.ok&&a(0,l=l.concat(v.data.data)),await le(x);Ae.set(s+ie.now().toMillis()),g&&te("refresh finished!")}catch(v){console.log(v),Pe({message:`Failed fetching the ${s}. ${v.message?v.message:""}`})}}return[l,s,t,f,()=>{f(!0),te("refresh started!")},()=>{je(`${X}/add?type=${s}`)},async()=>await f()]}class tt extends ue{constructor(e){super(),ce(this,e,Oe,Ne,de,{})}}export{tt as component};
