import{s as ne,l as C,i as v,n as J,f as _,r as ue,u as Ce,v as re,w as ce,x as M,y as Z,z as U,b as S,p as g,A as ie,h as y,B as j,C as Ne,t as I,d as V,j as te,e as A,a as H,c as W,g as q,k as Oe,o as Be,q as De,F as de,M as Fe}from"../chunks/scheduler.Bq1aPRZr.js";import{S as oe,i as fe,c as O,a as B,m as D,t as p,g as G,b as k,e as K,d as F}from"../chunks/index.dYeTvltd.js";import{e as me}from"../chunks/each.CtjI00YO.js";import{T as Je,F as Le,C as Te,A as ze}from"../chunks/ArrayWrap.B2GMWxjW.js";import{B as ee}from"../chunks/Button.LL1zcB_i.js";import{T as Ae}from"../chunks/treeWrapper.DUmsWm1A.js";import{a as le}from"../chunks/requests.eKZVNl3G.js";import{g as _e}from"../chunks/entry.B1gx68qY.js";import{p as We}from"../chunks/stores.BL_KPSZr.js";import{g as Se,w as Ie}from"../chunks/util.jCAmLx4X.js";import{a as x}from"../chunks/stores.CJOv96xK.js";import{t as se}from"../chunks/bundle-mjs.BkWO730n.js";import{P as Ve,F as je}from"../chunks/PaletteOutline.N16l27sC.js";import{k as he}from"../chunks/config.CwKg5LUm.js";function Me(a){let e,i,l,t,s,r=a[4].id&&a[4].title&&pe(a),n=a[6].id&&a[6].desc&&ge(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=se("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":s=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],d={};for(let u=0;u<o.length;u+=1)d=re(d,o[u]);return{c(){e=Z("svg"),r&&r.c(),i=C(),n&&n.c(),l=Z("path"),this.h()},l(u){e=U(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=S(e);r&&r.l(m),i=C(),n&&n.l(m),l=U(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(_),m.forEach(_),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ie(e,d)},m(u,m){v(u,e,m),r&&r.m(e,null),y(e,i),n&&n.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?r?r.p(u,m):(r=pe(u),r.c(),r.m(e,i)):r&&(r.d(1),r=null),u[6].id&&u[6].desc?n?n.p(u,m):(n=ge(u),n.c(),n.m(e,l)):n&&(n.d(1),n=null),m&32&&g(l,"stroke-width",u[5]),ie(e,d=Se(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&t!==(t=se("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:t},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&s!==(s=u[8]?u[10]:void 0)&&{"aria-describedby":s},{viewBox:"0 0 24 24"}]))},d(u){u&&_(e),r&&r.d(),n&&n.d()}}}function Re(a){let e,i,l,t,s,r,n,o=a[4].id&&a[4].title&&be(a),d=a[6].id&&a[6].desc&&ke(a),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=se("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":s=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let c=0;c<u.length;c+=1)m=re(m,u[c]);return{c(){e=Z("svg"),o&&o.c(),i=C(),d&&d.c(),l=Z("path"),this.h()},l(c){e=U(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var f=S(e);o&&o.l(f),i=C(),d&&d.l(f),l=U(f,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(_),f.forEach(_),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ie(e,m)},m(c,f){v(c,e,f),o&&o.m(e,null),y(e,i),d&&d.m(e,null),y(e,l),r||(n=[j(e,"click",a[13]),j(e,"keydown",a[14]),j(e,"keyup",a[15]),j(e,"focus",a[16]),j(e,"blur",a[17]),j(e,"mouseenter",a[18]),j(e,"mouseleave",a[19]),j(e,"mouseover",a[20]),j(e,"mouseout",a[21])],r=!0)},p(c,f){c[4].id&&c[4].title?o?o.p(c,f):(o=be(c),o.c(),o.m(e,i)):o&&(o.d(1),o=null),c[6].id&&c[6].desc?d?d.p(c,f):(d=ke(c),d.c(),d.m(e,l)):d&&(d.d(1),d=null),f&32&&g(l,"stroke-width",c[5]),ie(e,m=Se(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},f&4&&{color:c[2]},f&2048&&c[11],f&4097&&t!==(t=se("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:t},f&2&&{role:c[1]},f&128&&{"aria-label":c[7]},f&256&&s!==(s=c[8]?c[10]:void 0)&&{"aria-describedby":s},{viewBox:"0 0 24 24"}]))},d(c){c&&_(e),o&&o.d(),d&&d.d(),r=!1,Ne(n)}}}function pe(a){let e,i=a[4].title+"",l,t;return{c(){e=Z("title"),l=I(i),this.h()},l(s){e=U(s,"title",{id:!0});var r=S(e);l=V(r,i),r.forEach(_),this.h()},h(){g(e,"id",t=a[4].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&16&&i!==(i=s[4].title+"")&&te(l,i),r&16&&t!==(t=s[4].id)&&g(e,"id",t)},d(s){s&&_(e)}}}function ge(a){let e,i=a[6].desc+"",l,t;return{c(){e=Z("desc"),l=I(i),this.h()},l(s){e=U(s,"desc",{id:!0});var r=S(e);l=V(r,i),r.forEach(_),this.h()},h(){g(e,"id",t=a[6].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&64&&i!==(i=s[6].desc+"")&&te(l,i),r&64&&t!==(t=s[6].id)&&g(e,"id",t)},d(s){s&&_(e)}}}function be(a){let e,i=a[4].title+"",l,t;return{c(){e=Z("title"),l=I(i),this.h()},l(s){e=U(s,"title",{id:!0});var r=S(e);l=V(r,i),r.forEach(_),this.h()},h(){g(e,"id",t=a[4].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&16&&i!==(i=s[4].title+"")&&te(l,i),r&16&&t!==(t=s[4].id)&&g(e,"id",t)},d(s){s&&_(e)}}}function ke(a){let e,i=a[6].desc+"",l,t;return{c(){e=Z("desc"),l=I(i),this.h()},l(s){e=U(s,"desc",{id:!0});var r=S(e);l=V(r,i),r.forEach(_),this.h()},h(){g(e,"id",t=a[6].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&64&&i!==(i=s[6].desc+"")&&te(l,i),r&64&&t!==(t=s[6].id)&&g(e,"id",t)},d(s){s&&_(e)}}}function He(a){let e;function i(s,r){return s[3]?Re:Me}let l=i(a),t=l(a);return{c(){t.c(),e=C()},l(s){t.l(s),e=C()},m(s,r){t.m(s,r),v(s,e,r)},p(s,[r]){l===(l=i(s))&&t?t.p(s,r):(t.d(1),t=l(s),t&&(t.c(),t.m(e.parentNode,e)))},i:J,o:J,d(s){s&&_(e),t.d(s)}}}function qe(a,e,i){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let t=ue(e,l);const s=Ce("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:n=s.size||"md"}=e,{role:o=s.role||"img"}=e,{color:d=s.color||"currentColor"}=e,{withEvents:u=s.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:c=s.strokeWidth||"2"}=e,{desc:f={}}=e,w=`${m.id||""} ${f.id||""}`,E=!1,{ariaLabel:L="edit outline"}=e;function b(h){M.call(this,a,h)}function $(h){M.call(this,a,h)}function N(h){M.call(this,a,h)}function Q(h){M.call(this,a,h)}function Y(h){M.call(this,a,h)}function X(h){M.call(this,a,h)}function ae(h){M.call(this,a,h)}function P(h){M.call(this,a,h)}function T(h){M.call(this,a,h)}return a.$$set=h=>{i(12,e=re(re({},e),ce(h))),i(11,t=ue(e,l)),"size"in h&&i(0,n=h.size),"role"in h&&i(1,o=h.role),"color"in h&&i(2,d=h.color),"withEvents"in h&&i(3,u=h.withEvents),"title"in h&&i(4,m=h.title),"strokeWidth"in h&&i(5,c=h.strokeWidth),"desc"in h&&i(6,f=h.desc),"ariaLabel"in h&&i(7,L=h.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(m.id||f.id?i(8,E=!0):i(8,E=!1))},e=ce(e),[n,o,d,u,m,c,f,L,E,r,w,t,e,b,$,N,Q,Y,X,ae,P,T]}class Ze extends oe{constructor(e){super(),fe(this,e,qe,He,ne,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function ve(a,e,i){const l=a.slice();return l[21]=e[i],l}function Ue(a){let e,i,l;return e=new Ze({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=I("edit")},l(t){B(e.$$.fragment,t),i=V(t,"edit")},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(i),F(e,t)}}}function Xe(a){let e,i,l,t,s;return l=new Je({props:{class:"m-1"}}),{c(){e=A("div"),i=A("div"),O(l.$$.fragment),t=I(`
					delete`),this.h()},l(r){e=W(r,"DIV",{class:!0});var n=S(e);i=W(n,"DIV",{class:!0});var o=S(i);B(l.$$.fragment,o),t=V(o,`
					delete`),o.forEach(_),n.forEach(_),this.h()},h(){g(i,"class","flex flex-row items-center"),g(e,"class","text-rose-500")},m(r,n){v(r,e,n),y(e,i),D(l,i,null),y(i,t),s=!0},p:J,i(r){s||(p(l.$$.fragment,r),s=!0)},o(r){k(l.$$.fragment,r),s=!1},d(r){r&&_(e),F(l)}}}function Ge(a){let e,i,l;return e=new Le({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=I(`
			copy`)},l(t){B(e.$$.fragment,t),i=V(t,`
			copy`)},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(i),F(e,t)}}}function we(a){let e,i,l,t;e=new ee({props:{class:"mr-3",color:"blue",$$slots:{default:[Ke]},$$scope:{ctx:a}}}),e.$on("click",a[9]);let s=a[1]!=a[2]&&$e(a);return{c(){O(e.$$.fragment),i=H(),s&&s.c(),l=C()},l(r){B(e.$$.fragment,r),i=q(r),s&&s.l(r),l=C()},m(r,n){D(e,r,n),v(r,i,n),s&&s.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&16777216&&(o.$$scope={dirty:n,ctx:r}),e.$set(o),r[1]!=r[2]?s?(s.p(r,n),n&6&&p(s,1)):(s=$e(r),s.c(),p(s,1),s.m(l.parentNode,l)):s&&(G(),k(s,1,1,()=>{s=null}),K())},i(r){t||(p(e.$$.fragment,r),p(s),t=!0)},o(r){k(e.$$.fragment,r),k(s),t=!1},d(r){r&&(_(i),_(l)),F(e,r),s&&s.d(r)}}}function Ke(a){let e,i,l;return e=new Ve({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=I(`
				format and validate JSON`)},l(t){B(e.$$.fragment,t),i=V(t,`
				format and validate JSON`)},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(i),F(e,t)}}}function $e(a){let e,i;return e=new ee({props:{class:"mr-3",color:"green",$$slots:{default:[Qe]},$$scope:{ctx:a}}}),e.$on("click",a[15]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),i=!0},p(l,t){const s={};t&16777216&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){i||(p(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){F(e,l)}}}function Qe(a){let e,i,l;return e=new je({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=I(`
					save`)},l(t){B(e.$$.fragment,t),i=V(t,`
					save`)},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(i),F(e,t)}}}function Ye(a){let e,i="Loading ...";return{c(){e=A("h2"),e.textContent=i,this.h()},l(l){e=W(l,"H2",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-wq8tmm"&&(e.textContent=i),this.h()},h(){g(e,"class","text-xl text-center")},m(l,t){v(l,e,t)},p:J,i:J,o:J,d(l){l&&_(e)}}}function xe(a){let e,i,l,t;const s=[tt,et],r=[];function n(o,d){return o[3]?0:1}return e=n(a),i=r[e]=s[e](a),{c(){i.c(),l=C()},l(o){i.l(o),l=C()},m(o,d){r[e].m(o,d),v(o,l,d),t=!0},p(o,d){let u=e;e=n(o),e===u?r[e].p(o,d):(G(),k(r[u],1,1,()=>{r[u]=null}),K(),i=r[e],i?i.p(o,d):(i=r[e]=s[e](o),i.c()),p(i,1),i.m(l.parentNode,l))},i(o){t||(p(i),t=!0)},o(o){k(i),t=!1},d(o){o&&_(l),r[e].d(o)}}}function et(a){let e,i,l,t;e=new Ae({props:{data:a[0],rounded:!1}});let s=a[6]&&Ee(a);return{c(){O(e.$$.fragment),i=H(),s&&s.c(),l=C()},l(r){B(e.$$.fragment,r),i=q(r),s&&s.l(r),l=C()},m(r,n){D(e,r,n),v(r,i,n),s&&s.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&1&&(o.data=r[0]),e.$set(o),r[6]?s?(s.p(r,n),n&64&&p(s,1)):(s=Ee(r),s.c(),p(s,1),s.m(l.parentNode,l)):s&&(G(),k(s,1,1,()=>{s=null}),K())},i(r){t||(p(e.$$.fragment,r),p(s),t=!0)},o(r){k(e.$$.fragment,r),k(s),t=!1},d(r){r&&(_(i),_(l)),F(e,r),s&&s.d(r)}}}function tt(a){let e,i,l;return{c(){e=A("textarea"),this.h()},l(t){e=W(t,"TEXTAREA",{class:!0}),S(e).forEach(_),this.h()},h(){g(e,"class","dark:bg-slate-900 w-full min-h-[70vh]")},m(t,s){v(t,e,s),de(e,a[2]),i||(l=j(e,"input",a[16]),i=!0)},p(t,s){s&4&&de(e,t[2])},i:J,o:J,d(t){t&&_(e),i=!1,l()}}}function Ee(a){let e,i,l=me(a[6]),t=[];for(let r=0;r<l.length;r+=1)t[r]=Pe(ve(a,l,r));const s=r=>k(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=C()},l(r){for(let n=0;n<t.length;n+=1)t[n].l(r);e=C()},m(r,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,n);v(r,e,n),i=!0},p(r,n){if(n&192){l=me(r[6]);let o;for(o=0;o<l.length;o+=1){const d=ve(r,l,o);t[o]?(t[o].p(d,n),p(t[o],1)):(t[o]=Pe(d),t[o].c(),p(t[o],1),t[o].m(e.parentNode,e))}for(G(),o=l.length;o<t.length;o+=1)s(o);K()}},i(r){if(!i){for(let n=0;n<l.length;n+=1)p(t[n]);i=!0}},o(r){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)k(t[n]);i=!1},d(r){r&&_(e),Fe(t,r)}}}function lt(a){let e,i,l,t,s,r;return l=new Te({props:{class:"m-2"}}),{c(){e=A("a"),i=A("div"),O(l.$$.fragment),t=I(`
										add`),this.h()},l(n){e=W(n,"A",{href:!0});var o=S(e);i=W(o,"DIV",{class:!0});var d=S(i);B(l.$$.fragment,d),t=V(d,`
										add`),d.forEach(_),o.forEach(_),this.h()},h(){g(i,"class","flex flex-row items-center"),g(e,"href",s="/add?type="+a[21].name+"?apiPostPath="+btoa(a[21].entitySubPath))},m(n,o){v(n,e,o),y(e,i),D(l,i,null),y(i,t),r=!0},p(n,o){(!r||o&64&&s!==(s="/add?type="+n[21].name+"?apiPostPath="+btoa(n[21].entitySubPath)))&&g(e,"href",s)},i(n){r||(p(l.$$.fragment,n),r=!0)},o(n){k(l.$$.fragment,n),r=!1},d(n){n&&_(e),F(l)}}}function ye(a){let e,i;return e=new ze({props:{data:a[21].data,displayedFields:a[21].displayedFields,type:a[21].name,entity:a[21]}}),e.$on("refresh",a[18]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),i=!0},p(l,t){const s={};t&64&&(s.data=l[21].data),t&64&&(s.displayedFields=l[21].displayedFields),t&64&&(s.type=l[21].name),t&64&&(s.entity=l[21]),e.$set(s)},i(l){i||(p(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){F(e,l)}}}function Pe(a){let e,i,l=a[21].name+"",t,s,r,n,o,d,u;function m(){return a[17](a[21])}n=new ee({props:{color:"alternative",$$slots:{default:[lt]},$$scope:{ctx:a}}}),n.$on("click",m);let c=a[21].data&&a[21].data.length>0&&ye(a);return{c(){e=A("div"),i=A("h2"),t=I(l),s=H(),r=A("div"),O(n.$$.fragment),o=H(),c&&c.c(),d=C(),this.h()},l(f){e=W(f,"DIV",{class:!0});var w=S(e);i=W(w,"H2",{});var E=S(i);t=V(E,l),E.forEach(_),s=q(w),r=W(w,"DIV",{class:!0});var L=S(r);B(n.$$.fragment,L),L.forEach(_),w.forEach(_),o=q(f),c&&c.l(f),d=C(),this.h()},h(){g(r,"class","flex flex-row m-4 h-8"),g(e,"class","flex flex-row m-4 h-8 items-center")},m(f,w){v(f,e,w),y(e,i),y(i,t),y(e,s),y(e,r),D(n,r,null),v(f,o,w),c&&c.m(f,w),v(f,d,w),u=!0},p(f,w){a=f,(!u||w&64)&&l!==(l=a[21].name+"")&&te(t,l);const E={};w&16777280&&(E.$$scope={dirty:w,ctx:a}),n.$set(E),a[21].data&&a[21].data.length>0?c?(c.p(a,w),w&64&&p(c,1)):(c=ye(a),c.c(),p(c,1),c.m(d.parentNode,d)):c&&(G(),k(c,1,1,()=>{c=null}),K())},i(f){u||(p(n.$$.fragment,f),p(c),u=!0)},o(f){k(n.$$.fragment,f),k(c),u=!1},d(f){f&&(_(e),_(o),_(d)),F(n),c&&c.d(f)}}}function rt(a){let e,i,l,t,s,r,n,o,d,u,m,c;l=new ee({props:{class:"mr-2",$$slots:{default:[Ue]},$$scope:{ctx:a}}}),l.$on("click",a[12]),s=new ee({props:{class:"h-8 p-2 mr-2",title:"delete",color:"alternative",$$slots:{default:[Xe]},$$scope:{ctx:a}}}),s.$on("click",a[13]),n=new ee({props:{color:"alternative",class:"mr-2",$$slots:{default:[Ge]},$$scope:{ctx:a}}}),n.$on("click",a[14]);let f=a[3]&&we(a);const w=[xe,Ye],E=[];function L(b,$){return b[0]?0:1}return u=L(a),m=E[u]=w[u](a),{c(){e=A("div"),i=A("div"),O(l.$$.fragment),t=H(),O(s.$$.fragment),r=H(),O(n.$$.fragment),o=H(),f&&f.c(),d=H(),m.c(),this.h()},l(b){e=W(b,"DIV",{class:!0});var $=S(e);i=W($,"DIV",{class:!0});var N=S(i);B(l.$$.fragment,N),t=q(N),B(s.$$.fragment,N),r=q(N),B(n.$$.fragment,N),o=q(N),f&&f.l(N),N.forEach(_),d=q($),m.l($),$.forEach(_),this.h()},h(){g(i,"class","flex flex-row m-4 h-8"),g(e,"class","mb-2")},m(b,$){v(b,e,$),y(e,i),D(l,i,null),y(i,t),D(s,i,null),y(i,r),D(n,i,null),y(i,o),f&&f.m(i,null),y(e,d),E[u].m(e,null),c=!0},p(b,[$]){const N={};$&16777216&&(N.$$scope={dirty:$,ctx:b}),l.$set(N);const Q={};$&16777216&&(Q.$$scope={dirty:$,ctx:b}),s.$set(Q);const Y={};$&16777216&&(Y.$$scope={dirty:$,ctx:b}),n.$set(Y),b[3]?f?(f.p(b,$),$&8&&p(f,1)):(f=we(b),f.c(),p(f,1),f.m(i,null)):f&&(G(),k(f,1,1,()=>{f=null}),K());let X=u;u=L(b),u===X?E[u].p(b,$):(G(),k(E[X],1,1,()=>{E[X]=null}),K(),m=E[u],m?m.p(b,$):(m=E[u]=w[u](b),m.c()),p(m,1),m.m(e,null))},i(b){c||(p(l.$$.fragment,b),p(s.$$.fragment,b),p(n.$$.fragment,b),p(f),p(m),c=!0)},o(b){k(l.$$.fragment,b),k(s.$$.fragment,b),k(n.$$.fragment,b),k(f),k(m),c=!1},d(b){b&&_(e),F(l),F(s),F(n),f&&f.d(),E[u].d()}}}function it(a,e,i){let l;Oe(a,We,P=>i(11,l=P));let{data:t={}}=e,s="",r="",n=!1,o,d,u,m,c=!1;Be(()=>{c=!0,f()});async function f(){var T;if(!c)return;i(0,t=void 0);const P=new URLSearchParams(window.location.search);i(5,d=P.get("type")??"none"),i(4,o=P.get("id")??"none");{i(0,t=void 0);const h=await(await le()).findRecord(d,o);i(0,t=h.data),i(2,r=JSON.stringify(t,void 0,2)),i(1,s=r),u=he.find(z=>z.name==d),i(6,m=he.filter(z=>{var R;return(R=u==null?void 0:u.subEntities)==null?void 0:R.includes(z.name)}).map(z=>({...z,entitySubPath:`${d}/${o}/${z.name}`})));for(const z of m){const R=await(await le()).findAll(z.name,{},`/${d}/${o}`);if(!R.ok){x({message:`failed to load ${z.name}`});continue}z.data=(T=R.data)==null?void 0:T.data,i(6,m)}}}async function w(P,T,h){if(!confirm(`Please confirm deletion of '${h}'`))return;const R=await(await le()).deleteRecord(P,T);R.ok?(x({message:"ok",type:"info"}),_e(`/entities?type=${d}`)):x({message:`failed to delete. ${R.err}`})}function E(){let P;try{P=JSON.parse(r)}catch(T){x({message:`Failed to parse JSON. ${T.message}`});return}i(2,r=JSON.stringify(P,void 0,2)),x({message:"ok",type:"info"})}async function L(){if(confirm("confirm save?")){E();try{const T=await(await le()).updateRecord(d,o,JSON.parse(r));i(3,n=!n),i(3,n),i(0,t=JSON.parse(r)),i(1,s=r)}catch(T){const h=T.response.data;x({message:h.message})}}}const b=()=>{i(3,n=!n)},$=async()=>await w(d,o,t.name??t.id),N=()=>{Ie(s)},Q=async()=>await L();function Y(){r=this.value,i(2,r)}const X=P=>{_e(`/add?type=${P.name}?apiPostPath=${btoa(P.entitySubPath)}`)},ae=async()=>await f();return a.$$set=P=>{"data"in P&&i(0,t=P.data)},a.$$.update=()=>{a.$$.dirty&2048&&f()},[t,s,r,n,o,d,m,f,w,E,L,l,b,$,N,Q,Y,X,ae]}class st extends oe{constructor(e){super(),fe(this,e,it,rt,ne,{data:0})}}function at(a){let e,i;return e=new st({}),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),i=!0},p:J,i(l){i||(p(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){F(e,l)}}}class wt extends oe{constructor(e){super(),fe(this,e,null,at,ne,{})}}export{wt as component};
