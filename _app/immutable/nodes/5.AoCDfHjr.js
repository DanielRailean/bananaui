import{s as fe,l as C,i as v,n as L,f as h,y as de,z as Oe,A as re,B as me,C as j,J as q,K as Z,b as S,p as g,L as ie,h as y,r as V,u as Be,t as W,d as I,j as te,e as z,a as R,c as A,g as H,k as De,o as Je,v as Le,q as _e,M as Fe}from"../chunks/scheduler.C9BGEMar.js";import{S as ue,i as ce,c as O,a as B,m as D,t as p,g as U,b as k,e as X,d as J}from"../chunks/index.4Ydc87iW.js";import{e as he}from"../chunks/each.Bq-kqLXw.js";import{T as Te,F as ze,C as Ae,A as We}from"../chunks/ArrayWrap.DbtonWQS.js";import{B as x}from"../chunks/Button.BgCAgimh.js";import{T as Ie}from"../chunks/treeWrapper.DJbyCLl1.js";import{a as le}from"../chunks/requests.CRdRhYqy.js";import{g as pe,b as se}from"../chunks/entry.CfJbK9Xn.js";import{p as Ve}from"../chunks/stores.Dj8by5lQ.js";import{g as Ne,w as je}from"../chunks/util.BoWyuGLm.js";import{a as Y}from"../chunks/stores.D5KkekL9.js";import{t as ae}from"../chunks/bundle-mjs.BOZU2X2x.js";import{P as Me,F as Re}from"../chunks/PaletteOutline.eT_b4jh6.js";import{k as ge}from"../chunks/config.Cku55jh0.js";function He(a){let e,i,l,t,s,r=a[4].id&&a[4].title&&be(a),n=a[6].id&&a[6].desc&&ke(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":s=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],c={};for(let u=0;u<o.length;u+=1)c=re(c,o[u]);return{c(){e=q("svg"),r&&r.c(),i=C(),n&&n.c(),l=q("path"),this.h()},l(u){e=Z(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=S(e);r&&r.l(m),i=C(),n&&n.l(m),l=Z(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(h),m.forEach(h),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ie(e,c)},m(u,m){v(u,e,m),r&&r.m(e,null),y(e,i),n&&n.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?r?r.p(u,m):(r=be(u),r.c(),r.m(e,i)):r&&(r.d(1),r=null),u[6].id&&u[6].desc?n?n.p(u,m):(n=ke(u),n.c(),n.m(e,l)):n&&(n.d(1),n=null),m&32&&g(l,"stroke-width",u[5]),ie(e,c=Ne(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&t!==(t=ae("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:t},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&s!==(s=u[8]?u[10]:void 0)&&{"aria-describedby":s},{viewBox:"0 0 24 24"}]))},d(u){u&&h(e),r&&r.d(),n&&n.d()}}}function qe(a){let e,i,l,t,s,r,n,o=a[4].id&&a[4].title&&ve(a),c=a[6].id&&a[6].desc&&we(a),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":s=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let d=0;d<u.length;d+=1)m=re(m,u[d]);return{c(){e=q("svg"),o&&o.c(),i=C(),c&&c.c(),l=q("path"),this.h()},l(d){e=Z(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var f=S(e);o&&o.l(f),i=C(),c&&c.l(f),l=Z(f,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(h),f.forEach(h),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ie(e,m)},m(d,f){v(d,e,f),o&&o.m(e,null),y(e,i),c&&c.m(e,null),y(e,l),r||(n=[V(e,"click",a[13]),V(e,"keydown",a[14]),V(e,"keyup",a[15]),V(e,"focus",a[16]),V(e,"blur",a[17]),V(e,"mouseenter",a[18]),V(e,"mouseleave",a[19]),V(e,"mouseover",a[20]),V(e,"mouseout",a[21])],r=!0)},p(d,f){d[4].id&&d[4].title?o?o.p(d,f):(o=ve(d),o.c(),o.m(e,i)):o&&(o.d(1),o=null),d[6].id&&d[6].desc?c?c.p(d,f):(c=we(d),c.c(),c.m(e,l)):c&&(c.d(1),c=null),f&32&&g(l,"stroke-width",d[5]),ie(e,m=Ne(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},f&4&&{color:d[2]},f&2048&&d[11],f&4097&&t!==(t=ae("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:t},f&2&&{role:d[1]},f&128&&{"aria-label":d[7]},f&256&&s!==(s=d[8]?d[10]:void 0)&&{"aria-describedby":s},{viewBox:"0 0 24 24"}]))},d(d){d&&h(e),o&&o.d(),c&&c.d(),r=!1,Be(n)}}}function be(a){let e,i=a[4].title+"",l,t;return{c(){e=q("title"),l=W(i),this.h()},l(s){e=Z(s,"title",{id:!0});var r=S(e);l=I(r,i),r.forEach(h),this.h()},h(){g(e,"id",t=a[4].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&16&&i!==(i=s[4].title+"")&&te(l,i),r&16&&t!==(t=s[4].id)&&g(e,"id",t)},d(s){s&&h(e)}}}function ke(a){let e,i=a[6].desc+"",l,t;return{c(){e=q("desc"),l=W(i),this.h()},l(s){e=Z(s,"desc",{id:!0});var r=S(e);l=I(r,i),r.forEach(h),this.h()},h(){g(e,"id",t=a[6].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&64&&i!==(i=s[6].desc+"")&&te(l,i),r&64&&t!==(t=s[6].id)&&g(e,"id",t)},d(s){s&&h(e)}}}function ve(a){let e,i=a[4].title+"",l,t;return{c(){e=q("title"),l=W(i),this.h()},l(s){e=Z(s,"title",{id:!0});var r=S(e);l=I(r,i),r.forEach(h),this.h()},h(){g(e,"id",t=a[4].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&16&&i!==(i=s[4].title+"")&&te(l,i),r&16&&t!==(t=s[4].id)&&g(e,"id",t)},d(s){s&&h(e)}}}function we(a){let e,i=a[6].desc+"",l,t;return{c(){e=q("desc"),l=W(i),this.h()},l(s){e=Z(s,"desc",{id:!0});var r=S(e);l=I(r,i),r.forEach(h),this.h()},h(){g(e,"id",t=a[6].id)},m(s,r){v(s,e,r),y(e,l)},p(s,r){r&64&&i!==(i=s[6].desc+"")&&te(l,i),r&64&&t!==(t=s[6].id)&&g(e,"id",t)},d(s){s&&h(e)}}}function Ze(a){let e;function i(s,r){return s[3]?qe:He}let l=i(a),t=l(a);return{c(){t.c(),e=C()},l(s){t.l(s),e=C()},m(s,r){t.m(s,r),v(s,e,r)},p(s,[r]){l===(l=i(s))&&t?t.p(s,r):(t.d(1),t=l(s),t&&(t.c(),t.m(e.parentNode,e)))},i:L,o:L,d(s){s&&h(e),t.d(s)}}}function Ke(a,e,i){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let t=de(e,l);const s=Oe("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:n=s.size||"md"}=e,{role:o=s.role||"img"}=e,{color:c=s.color||"currentColor"}=e,{withEvents:u=s.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:d=s.strokeWidth||"2"}=e,{desc:f={}}=e,w=`${m.id||""} ${f.id||""}`,E=!1,{ariaLabel:F="edit outline"}=e;function b(_){j.call(this,a,_)}function $(_){j.call(this,a,_)}function N(_){j.call(this,a,_)}function G(_){j.call(this,a,_)}function Q(_){j.call(this,a,_)}function K(_){j.call(this,a,_)}function ne(_){j.call(this,a,_)}function oe(_){j.call(this,a,_)}function P(_){j.call(this,a,_)}return a.$$set=_=>{i(12,e=re(re({},e),me(_))),i(11,t=de(e,l)),"size"in _&&i(0,n=_.size),"role"in _&&i(1,o=_.role),"color"in _&&i(2,c=_.color),"withEvents"in _&&i(3,u=_.withEvents),"title"in _&&i(4,m=_.title),"strokeWidth"in _&&i(5,d=_.strokeWidth),"desc"in _&&i(6,f=_.desc),"ariaLabel"in _&&i(7,F=_.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(m.id||f.id?i(8,E=!0):i(8,E=!1))},e=me(e),[n,o,c,u,m,d,f,F,E,r,w,t,e,b,$,N,G,Q,K,ne,oe,P]}class Ue extends ue{constructor(e){super(),ce(this,e,Ke,Ze,fe,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function $e(a,e,i){const l=a.slice();return l[22]=e[i],l}function Xe(a){let e,i,l;return e=new Ue({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=W("edit")},l(t){B(e.$$.fragment,t),i=I(t,"edit")},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(i),J(e,t)}}}function Ge(a){let e,i,l,t,s;return l=new Te({props:{class:"m-1"}}),{c(){e=z("div"),i=z("div"),O(l.$$.fragment),t=W(`
					delete`),this.h()},l(r){e=A(r,"DIV",{class:!0});var n=S(e);i=A(n,"DIV",{class:!0});var o=S(i);B(l.$$.fragment,o),t=I(o,`
					delete`),o.forEach(h),n.forEach(h),this.h()},h(){g(i,"class","flex flex-row items-center"),g(e,"class","text-rose-500")},m(r,n){v(r,e,n),y(e,i),D(l,i,null),y(i,t),s=!0},p:L,i(r){s||(p(l.$$.fragment,r),s=!0)},o(r){k(l.$$.fragment,r),s=!1},d(r){r&&h(e),J(l)}}}function Qe(a){let e,i,l;return e=new ze({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=W(`
			copy`)},l(t){B(e.$$.fragment,t),i=I(t,`
			copy`)},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(i),J(e,t)}}}function Ee(a){let e,i,l,t;e=new x({props:{class:"mr-3",color:"blue",$$slots:{default:[Ye]},$$scope:{ctx:a}}}),e.$on("click",a[9]);let s=a[1]!=a[2]&&ye(a);return{c(){O(e.$$.fragment),i=R(),s&&s.c(),l=C()},l(r){B(e.$$.fragment,r),i=H(r),s&&s.l(r),l=C()},m(r,n){D(e,r,n),v(r,i,n),s&&s.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&33554432&&(o.$$scope={dirty:n,ctx:r}),e.$set(o),r[1]!=r[2]?s?(s.p(r,n),n&6&&p(s,1)):(s=ye(r),s.c(),p(s,1),s.m(l.parentNode,l)):s&&(U(),k(s,1,1,()=>{s=null}),X())},i(r){t||(p(e.$$.fragment,r),p(s),t=!0)},o(r){k(e.$$.fragment,r),k(s),t=!1},d(r){r&&(h(i),h(l)),J(e,r),s&&s.d(r)}}}function Ye(a){let e,i,l;return e=new Me({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=W(`
				format and validate JSON`)},l(t){B(e.$$.fragment,t),i=I(t,`
				format and validate JSON`)},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(i),J(e,t)}}}function ye(a){let e,i;return e=new x({props:{class:"mr-3",color:"green",$$slots:{default:[xe]},$$scope:{ctx:a}}}),e.$on("click",a[15]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),i=!0},p(l,t){const s={};t&33554432&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){i||(p(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){J(e,l)}}}function xe(a){let e,i,l;return e=new Re({props:{class:"m-2"}}),{c(){O(e.$$.fragment),i=W(`
					save`)},l(t){B(e.$$.fragment,t),i=I(t,`
					save`)},m(t,s){D(e,t,s),v(t,i,s),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(i),J(e,t)}}}function et(a){let e,i="Loading ...";return{c(){e=z("h2"),e.textContent=i,this.h()},l(l){e=A(l,"H2",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-wq8tmm"&&(e.textContent=i),this.h()},h(){g(e,"class","text-xl text-center")},m(l,t){v(l,e,t)},p:L,i:L,o:L,d(l){l&&h(e)}}}function tt(a){let e,i,l,t;const s=[rt,lt],r=[];function n(o,c){return o[3]?0:1}return e=n(a),i=r[e]=s[e](a),{c(){i.c(),l=C()},l(o){i.l(o),l=C()},m(o,c){r[e].m(o,c),v(o,l,c),t=!0},p(o,c){let u=e;e=n(o),e===u?r[e].p(o,c):(U(),k(r[u],1,1,()=>{r[u]=null}),X(),i=r[e],i?i.p(o,c):(i=r[e]=s[e](o),i.c()),p(i,1),i.m(l.parentNode,l))},i(o){t||(p(i),t=!0)},o(o){k(i),t=!1},d(o){o&&h(l),r[e].d(o)}}}function lt(a){let e,i,l,t;e=new Ie({props:{data:a[0],rounded:!1}});let s=a[6]&&Pe(a);return{c(){O(e.$$.fragment),i=R(),s&&s.c(),l=C()},l(r){B(e.$$.fragment,r),i=H(r),s&&s.l(r),l=C()},m(r,n){D(e,r,n),v(r,i,n),s&&s.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&1&&(o.data=r[0]),e.$set(o),r[6]?s?(s.p(r,n),n&64&&p(s,1)):(s=Pe(r),s.c(),p(s,1),s.m(l.parentNode,l)):s&&(U(),k(s,1,1,()=>{s=null}),X())},i(r){t||(p(e.$$.fragment,r),p(s),t=!0)},o(r){k(e.$$.fragment,r),k(s),t=!1},d(r){r&&(h(i),h(l)),J(e,r),s&&s.d(r)}}}function rt(a){let e,i,l;return{c(){e=z("textarea"),this.h()},l(t){e=A(t,"TEXTAREA",{class:!0}),S(e).forEach(h),this.h()},h(){g(e,"class","dark:bg-[#1E2021] w-full min-h-[70vh]")},m(t,s){v(t,e,s),_e(e,a[2]),i||(l=V(e,"input",a[16]),i=!0)},p(t,s){s&4&&_e(e,t[2])},i:L,o:L,d(t){t&&h(e),i=!1,l()}}}function Pe(a){let e,i,l=he(a[6]),t=[];for(let r=0;r<l.length;r+=1)t[r]=Ce($e(a,l,r));const s=r=>k(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=C()},l(r){for(let n=0;n<t.length;n+=1)t[n].l(r);e=C()},m(r,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,n);v(r,e,n),i=!0},p(r,n){if(n&224){l=he(r[6]);let o;for(o=0;o<l.length;o+=1){const c=$e(r,l,o);t[o]?(t[o].p(c,n),p(t[o],1)):(t[o]=Ce(c),t[o].c(),p(t[o],1),t[o].m(e.parentNode,e))}for(U(),o=l.length;o<t.length;o+=1)s(o);X()}},i(r){if(!i){for(let n=0;n<l.length;n+=1)p(t[n]);i=!0}},o(r){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)k(t[n]);i=!1},d(r){r&&h(e),Fe(t,r)}}}function it(a){let e,i,l,t,s,r;return l=new Ae({props:{class:"m-2"}}),{c(){e=z("a"),i=z("div"),O(l.$$.fragment),t=W(`
										add`),this.h()},l(n){e=A(n,"A",{href:!0});var o=S(e);i=A(o,"DIV",{class:!0});var c=S(i);B(l.$$.fragment,c),t=I(c,`
										add`),c.forEach(h),o.forEach(h),this.h()},h(){g(i,"class","flex flex-row items-center"),g(e,"href",s=se+"/add?type="+a[22].name+"&apiPostPath="+btoa(a[22].entitySubPath))},m(n,o){v(n,e,o),y(e,i),D(l,i,null),y(i,t),r=!0},p(n,o){(!r||o&64&&s!==(s=se+"/add?type="+n[22].name+"&apiPostPath="+btoa(n[22].entitySubPath)))&&g(e,"href",s)},i(n){r||(p(l.$$.fragment,n),r=!0)},o(n){k(l.$$.fragment,n),r=!1},d(n){n&&h(e),J(l)}}}function Se(a){let e,i;return e=new We({props:{data:a[22].data,displayedFields:a[22].displayedFields.filter(a[18]),type:a[22].name,entity:a[22]}}),e.$on("refresh",a[19]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),i=!0},p(l,t){const s={};t&64&&(s.data=l[22].data),t&96&&(s.displayedFields=l[22].displayedFields.filter(l[18])),t&64&&(s.type=l[22].name),t&64&&(s.entity=l[22]),e.$set(s)},i(l){i||(p(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){J(e,l)}}}function Ce(a){let e,i,l=a[22].name+"",t,s,r,n,o,c,u;function m(){return a[17](a[22])}n=new x({props:{color:"alternative",$$slots:{default:[it]},$$scope:{ctx:a}}}),n.$on("click",m);let d=a[22].data&&a[22].data.length>0&&Se(a);return{c(){e=z("div"),i=z("h2"),t=W(l),s=R(),r=z("div"),O(n.$$.fragment),o=R(),d&&d.c(),c=C(),this.h()},l(f){e=A(f,"DIV",{class:!0});var w=S(e);i=A(w,"H2",{});var E=S(i);t=I(E,l),E.forEach(h),s=H(w),r=A(w,"DIV",{class:!0});var F=S(r);B(n.$$.fragment,F),F.forEach(h),w.forEach(h),o=H(f),d&&d.l(f),c=C(),this.h()},h(){g(r,"class","flex flex-row m-4 h-8"),g(e,"class","flex flex-row m-4 h-8 items-center")},m(f,w){v(f,e,w),y(e,i),y(i,t),y(e,s),y(e,r),D(n,r,null),v(f,o,w),d&&d.m(f,w),v(f,c,w),u=!0},p(f,w){a=f,(!u||w&64)&&l!==(l=a[22].name+"")&&te(t,l);const E={};w&33554496&&(E.$$scope={dirty:w,ctx:a}),n.$set(E),a[22].data&&a[22].data.length>0?d?(d.p(a,w),w&64&&p(d,1)):(d=Se(a),d.c(),p(d,1),d.m(c.parentNode,c)):d&&(U(),k(d,1,1,()=>{d=null}),X())},i(f){u||(p(n.$$.fragment,f),p(d),u=!0)},o(f){k(n.$$.fragment,f),k(d),u=!1},d(f){f&&(h(e),h(o),h(c)),J(n),d&&d.d(f)}}}function st(a){let e,i,l,t,s,r,n,o,c,u,m,d;l=new x({props:{class:"mr-2",$$slots:{default:[Xe]},$$scope:{ctx:a}}}),l.$on("click",a[12]),s=new x({props:{class:"h-8 p-2 mr-2",title:"delete",color:"alternative",$$slots:{default:[Ge]},$$scope:{ctx:a}}}),s.$on("click",a[13]),n=new x({props:{color:"alternative",class:"mr-2",$$slots:{default:[Qe]},$$scope:{ctx:a}}}),n.$on("click",a[14]);let f=a[3]&&Ee(a);const w=[tt,et],E=[];function F(b,$){return b[0]?0:1}return u=F(a),m=E[u]=w[u](a),{c(){e=z("div"),i=z("div"),O(l.$$.fragment),t=R(),O(s.$$.fragment),r=R(),O(n.$$.fragment),o=R(),f&&f.c(),c=R(),m.c(),this.h()},l(b){e=A(b,"DIV",{class:!0});var $=S(e);i=A($,"DIV",{class:!0});var N=S(i);B(l.$$.fragment,N),t=H(N),B(s.$$.fragment,N),r=H(N),B(n.$$.fragment,N),o=H(N),f&&f.l(N),N.forEach(h),c=H($),m.l($),$.forEach(h),this.h()},h(){g(i,"class","flex flex-row m-4 h-8"),g(e,"class","mb-2")},m(b,$){v(b,e,$),y(e,i),D(l,i,null),y(i,t),D(s,i,null),y(i,r),D(n,i,null),y(i,o),f&&f.m(i,null),y(e,c),E[u].m(e,null),d=!0},p(b,[$]){const N={};$&33554432&&(N.$$scope={dirty:$,ctx:b}),l.$set(N);const G={};$&33554432&&(G.$$scope={dirty:$,ctx:b}),s.$set(G);const Q={};$&33554432&&(Q.$$scope={dirty:$,ctx:b}),n.$set(Q),b[3]?f?(f.p(b,$),$&8&&p(f,1)):(f=Ee(b),f.c(),p(f,1),f.m(i,null)):f&&(U(),k(f,1,1,()=>{f=null}),X());let K=u;u=F(b),u===K?E[u].p(b,$):(U(),k(E[K],1,1,()=>{E[K]=null}),X(),m=E[u],m?m.p(b,$):(m=E[u]=w[u](b),m.c()),p(m,1),m.m(e,null))},i(b){d||(p(l.$$.fragment,b),p(s.$$.fragment,b),p(n.$$.fragment,b),p(f),p(m),d=!0)},o(b){k(l.$$.fragment,b),k(s.$$.fragment,b),k(n.$$.fragment,b),k(f),k(m),d=!1},d(b){b&&h(e),J(l),J(s),J(n),f&&f.d(),E[u].d()}}}function at(a,e,i){let l;De(a,Ve,P=>i(11,l=P));let{data:t={}}=e,s="",r="",n=!1,o,c,u,m,d=!1;Je(()=>{d=!0,f()});async function f(){var _;if(!d)return;i(0,t=void 0);const P=new URLSearchParams(window.location.search);i(5,c=P.get("type")??"none"),i(4,o=P.get("id")??"none");{i(0,t=void 0);const ee=await(await le()).findRecord(c,o);i(0,t=ee.data),i(2,r=JSON.stringify(t,void 0,2)),i(1,s=r),u=ge.find(T=>T.name==c),i(6,m=ge.filter(T=>{var M;return(M=u==null?void 0:u.subEntities)==null?void 0:M.includes(T.name)}).map(T=>({...T,entitySubPath:`${c}/${o}/${T.name}`})));for(const T of m){const M=await(await le()).findAll(T.name,{},`/${c}/${o}`);if(!M.ok){Y({message:`failed to load ${T.name}`});continue}T.data=(_=M.data)==null?void 0:_.data,i(6,m)}}}async function w(P,_,ee){if(!confirm(`Please confirm deletion of '${ee}'`))return;const M=await(await le()).deleteRecord(P,_);M.ok?(Y({message:"ok",type:"info"}),pe(`${se}/entities?type=${c}`)):Y({message:`failed to delete. ${M.err}`})}function E(){let P;try{P=JSON.parse(r)}catch(_){Y({message:`Failed to parse JSON. ${_.message}`});return}i(2,r=JSON.stringify(P,void 0,2)),Y({message:"ok",type:"info"})}async function F(){if(confirm("confirm save?")){E();try{const _=await(await le()).updateRecord(c,o,JSON.parse(r));i(3,n=!n),i(3,n),i(0,t=JSON.parse(r)),i(1,s=r)}catch(_){const ee=_.response.data;Y({message:ee.message})}}}const b=()=>{i(3,n=!n)},$=async()=>await w(c,o,t.name??t.id),N=()=>{je(s)},G=async()=>await F();function Q(){r=this.value,i(2,r)}const K=P=>{pe(`${se}/add?type=${P.name}&apiPostPath=${btoa(P.entitySubPath)}`)},ne=P=>P+"s"!=c,oe=async()=>await f();return a.$$set=P=>{"data"in P&&i(0,t=P.data)},a.$$.update=()=>{a.$$.dirty&2048&&f()},[t,s,r,n,o,c,m,f,w,E,F,l,b,$,N,G,Q,K,ne,oe]}class nt extends ue{constructor(e){super(),ce(this,e,at,st,fe,{data:0})}}function ot(a){let e,i;return e=new nt({}),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),i=!0},p:L,i(l){i||(p(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){J(e,l)}}}class Et extends ue{constructor(e){super(),ce(this,e,null,ot,fe,{})}}export{Et as component};
