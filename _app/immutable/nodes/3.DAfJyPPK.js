import{s as te,l as Y,i as y,f as p,r as Z,v as R,w as x,P as we,G as oe,I as ue,J as ce,K as me,e as w,c as O,b as I,H as ee,S as Pe,h as E,T as de,U as Q,B as $,n as U,M as Ne,C as Te,t as j,d as D,F as W,j as le,x as ie,V as Ae,a as J,g as L,p as q,o as Ie,W as Je,q as Le}from"../chunks/scheduler.BQDiRXjc.js";import{S as ae,i as se,g as G,b as v,e as X,t as b,c as P,a as N,m as T,d as A,f as qe}from"../chunks/index.B1KEy29g.js";import{T as Oe}from"../chunks/treeWrapper.B83XODUn.js";import{g as je,b as De}from"../chunks/entry.CadVqWNo.js";import{a as H}from"../chunks/requests.u4oV6ZPt.js";import{B as fe}from"../chunks/Button.PWPCTRbg.js";import{g as Se}from"../chunks/util.BsWr24sc.js";import{t as Ee}from"../chunks/bundle-mjs.BkWO730n.js";import{e as _e}from"../chunks/each.BegtMz8b.js";import{a as M}from"../chunks/stores.DkPaJxIW.js";import{F as ze,P as Be}from"../chunks/PaletteOutline.CDg6DXjT.js";import{L as Fe}from"../chunks/LinkOutline.CJya4SgC.js";function Ve(i){let e;const t=i[7].default,a=oe(t,i,i[6],null);return{c(){a&&a.c()},l(l){a&&a.l(l)},m(l,r){a&&a.m(l,r),e=!0},p(l,r){a&&a.p&&(!e||r&64)&&ue(a,t,l,l[6],e?me(t,l[6],r,null):ce(l[6]),null)},i(l){e||(b(a,l),e=!0)},o(l){v(a,l),e=!1},d(l){a&&a.d(l)}}}function Ke(i){let e,t;const a=i[7].default,l=oe(a,i,i[6],null);let r=[i[3],{class:i[2]}],n={};for(let s=0;s<r.length;s+=1)n=R(n,r[s]);return{c(){e=w("label"),l&&l.c(),this.h()},l(s){e=O(s,"LABEL",{class:!0});var f=I(e);l&&l.l(f),f.forEach(p),this.h()},h(){ee(e,n)},m(s,f){y(s,e,f),l&&l.m(e,null),i[8](e),t=!0},p(s,f){l&&l.p&&(!t||f&64)&&ue(l,a,s,s[6],t?me(a,s[6],f,null):ce(s[6]),null),ee(e,n=Se(r,[f&8&&s[3],(!t||f&4)&&{class:s[2]}]))},i(s){t||(b(l,s),t=!0)},o(s){v(l,s),t=!1},d(s){s&&p(e),l&&l.d(s),i[8](null)}}}function Re(i){let e,t,a,l;const r=[Ke,Ve],n=[];function s(f,h){return f[0]?0:1}return e=s(i),t=n[e]=r[e](i),{c(){t.c(),a=Y()},l(f){t.l(f),a=Y()},m(f,h){n[e].m(f,h),y(f,a,h),l=!0},p(f,[h]){let d=e;e=s(f),e===d?n[e].p(f,h):(G(),v(n[d],1,1,()=>{n[d]=null}),X(),t=n[e],t?t.p(f,h):(t=n[e]=r[e](f),t.c()),b(t,1),t.m(a.parentNode,a))},i(f){l||(b(t),l=!0)},o(f){v(t),l=!1},d(f){f&&p(a),n[e].d(f)}}}function He(i,e,t){let a;const l=["color","defaultClass","show"];let r=Z(e,l),{$$slots:n={},$$scope:s}=e,{color:f="gray"}=e,{defaultClass:h="text-sm rtl:text-right font-medium block"}=e,{show:d=!0}=e,o;const u={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function c(_){we[_?"unshift":"push"](()=>{o=_,t(1,o)})}return i.$$set=_=>{t(10,e=R(R({},e),x(_))),t(3,r=Z(e,l)),"color"in _&&t(4,f=_.color),"defaultClass"in _&&t(5,h=_.defaultClass),"show"in _&&t(0,d=_.show),"$$scope"in _&&t(6,s=_.$$scope)},i.$$.update=()=>{if(i.$$.dirty&18){const _=o==null?void 0:o.control;t(4,f=_!=null&&_.disabled?"disabled":f)}t(2,a=Ee(h,u[f],e.class))},e=x(e),[d,o,a,r,f,h,s,n,c]}class Me extends ae{constructor(e){super(),se(this,e,He,Re,te,{color:4,defaultClass:5,show:0})}}function ge(i,e,t){const a=i.slice();return a[17]=e[t].value,a[18]=e[t].name,a}function he(i){let e,t,a;return{c(){e=w("option"),t=j(i[2]),this.h()},l(l){e=O(l,"OPTION",{});var r=I(e);t=D(r,i[2]),r.forEach(p),this.h()},h(){e.disabled=!0,e.selected=a=i[0]===void 0?!0:void 0,e.__value="",W(e,e.__value)},m(l,r){y(l,e,r),E(e,t)},p(l,r){r&4&&le(t,l[2]),r&3&&a!==(a=l[0]===void 0?!0:void 0)&&(e.selected=a)},d(l){l&&p(e)}}}function pe(i){let e;const t=i[10].default,a=oe(t,i,i[9],null);return{c(){a&&a.c()},l(l){a&&a.l(l)},m(l,r){a&&a.m(l,r),e=!0},p(l,r){a&&a.p&&(!e||r&512)&&ue(a,t,l,l[9],e?me(t,l[9],r,null):ce(l[9]),null)},i(l){e||(b(a,l),e=!0)},o(l){v(a,l),e=!1},d(l){a&&a.d(l)}}}function be(i){let e,t=i[18]+"",a,l,r;return{c(){e=w("option"),a=j(t),this.h()},l(n){e=O(n,"OPTION",{});var s=I(e);a=D(s,t),s.forEach(p),this.h()},h(){e.__value=l=i[17],W(e,e.__value),e.selected=r=i[17]===i[0]?!0:void 0},m(n,s){y(n,e,s),E(e,a)},p(n,s){s&2&&t!==(t=n[18]+"")&&le(a,t),s&2&&l!==(l=n[17])&&(e.__value=l,W(e,e.__value)),s&3&&r!==(r=n[17]===n[0]?!0:void 0)&&(e.selected=r)},d(n){n&&p(e)}}}function $e(i){let e,t,a,l,r=i[2]&&he(i),n=_e(i[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=be(ge(i,n,o));let f=null;n.length||(f=pe(i));let h=[i[4],{class:i[3]}],d={};for(let o=0;o<h.length;o+=1)d=R(d,h[o]);return{c(){e=w("select"),r&&r.c(),t=Y();for(let o=0;o<s.length;o+=1)s[o].c();f&&f.c(),this.h()},l(o){e=O(o,"SELECT",{class:!0});var u=I(e);r&&r.l(u),t=Y();for(let c=0;c<s.length;c+=1)s[c].l(u);f&&f.l(u),u.forEach(p),this.h()},h(){ee(e,d),i[0]===void 0&&Pe(()=>i[14].call(e))},m(o,u){y(o,e,u),r&&r.m(e,null),E(e,t);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);f&&f.m(e,null),"value"in d&&(d.multiple?de:Q)(e,d.value),e.autofocus&&e.focus(),Q(e,i[0],!0),a||(l=[$(e,"change",i[14]),$(e,"change",i[11]),$(e,"contextmenu",i[12]),$(e,"input",i[13])],a=!0)},p(o,[u]){if(o[2]?r?r.p(o,u):(r=he(o),r.c(),r.m(e,t)):r&&(r.d(1),r=null),u&515){n=_e(o[1]);let c;for(c=0;c<n.length;c+=1){const _=ge(o,n,c);s[c]?s[c].p(_,u):(s[c]=be(_),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=n.length,!n.length&&f?f.p(o,u):n.length?f&&(G(),v(f,1,1,()=>{f=null}),X()):(f=pe(o),f.c(),b(f,1),f.m(e,null))}ee(e,d=Se(h,[u&16&&o[4],{class:o[3]}])),u&24&&"value"in d&&(d.multiple?de:Q)(e,d.value),u&3&&Q(e,o[0])},i:U,o:U,d(o){o&&p(e),r&&r.d(),Ne(s,o),f&&f.d(),a=!1,Te(l)}}}const Ue="block w-full";function We(i,e,t){const a=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let l=Z(e,a),{$$slots:r={},$$scope:n}=e,{items:s=[]}=e,{value:f=void 0}=e,{placeholder:h="Choose option ..."}=e,{underline:d=!1}=e,{size:o="md"}=e,{defaultClass:u="text-gray-900 disabled:text-gray-400 bg-gray-50 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:disabled:text-gray-500 dark:focus:ring-primary-500 dark:focus:border-primary-500"}=e,{underlineClass:c="text-gray-500 disabled:text-gray-400 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:disabled:text-gray-500 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const _={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let m;function k(g){ie.call(this,i,g)}function K(g){ie.call(this,i,g)}function ne(g){ie.call(this,i,g)}function C(){f=Ae(this),t(0,f),t(1,s)}return i.$$set=g=>{t(16,e=R(R({},e),x(g))),t(4,l=Z(e,a)),"items"in g&&t(1,s=g.items),"value"in g&&t(0,f=g.value),"placeholder"in g&&t(2,h=g.placeholder),"underline"in g&&t(5,d=g.underline),"size"in g&&t(6,o=g.size),"defaultClass"in g&&t(7,u=g.defaultClass),"underlineClass"in g&&t(8,c=g.underlineClass),"$$scope"in g&&t(9,n=g.$$scope)},i.$$.update=()=>{t(3,m=Ee(Ue,d?c:u,_[o],d&&"!px-0",e.class))},e=x(e),[f,s,h,m,l,d,o,u,c,n,r,k,K,ne,C]}class Ge extends ae{constructor(e){super(),se(this,e,We,$e,te,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}function ke(i){let e,t,a,l,r,n,s,f,h;a=new fe({props:{color:"green",$$slots:{default:[Xe]},$$scope:{ctx:i}}}),a.$on("click",i[9]),r=new fe({props:{class:"ml-3",color:"blue",$$slots:{default:[Qe]},$$scope:{ctx:i}}}),r.$on("click",i[6]),s=new fe({props:{class:"ml-3",color:"alternative",$$slots:{default:[Ye]},$$scope:{ctx:i}}});let d=i[5]&&ve(i);return{c(){e=w("div"),t=w("div"),P(a.$$.fragment),l=J(),P(r.$$.fragment),n=J(),P(s.$$.fragment),f=J(),d&&d.c(),this.h()},l(o){e=O(o,"DIV",{class:!0});var u=I(e);t=O(u,"DIV",{class:!0});var c=I(t);N(a.$$.fragment,c),l=L(c),N(r.$$.fragment,c),n=L(c),N(s.$$.fragment,c),c.forEach(p),f=L(u),d&&d.l(u),u.forEach(p),this.h()},h(){q(t,"class","flex flex-row h-8"),q(e,"class","flex flex-col m-4")},m(o,u){y(o,e,u),E(e,t),T(a,t,null),E(t,l),T(r,t,null),E(t,n),T(s,t,null),E(e,f),d&&d.m(e,null),h=!0},p(o,u){const c={};u&65537&&(c.$$scope={dirty:u,ctx:o}),a.$set(c);const _={};u&65536&&(_.$$scope={dirty:u,ctx:o}),r.$set(_);const m={};u&65536&&(m.$$scope={dirty:u,ctx:o}),s.$set(m),o[5]?d?(d.p(o,u),u&32&&b(d,1)):(d=ve(o),d.c(),b(d,1),d.m(e,null)):d&&(G(),v(d,1,1,()=>{d=null}),X())},i(o){h||(b(a.$$.fragment,o),b(r.$$.fragment,o),b(s.$$.fragment,o),b(d),h=!0)},o(o){v(a.$$.fragment,o),v(r.$$.fragment,o),v(s.$$.fragment,o),v(d),h=!1},d(o){o&&p(e),A(a),A(r),A(s),d&&d.d()}}}function Xe(i){let e,t,a=i[0].substr(0,i[0].length-1)+"",l,r;return e=new ze({props:{class:"m-2"}}),{c(){P(e.$$.fragment),t=j(`
				save `),l=j(a)},l(n){N(e.$$.fragment,n),t=D(n,`
				save `),l=D(n,a)},m(n,s){T(e,n,s),y(n,t,s),y(n,l,s),r=!0},p(n,s){(!r||s&1)&&a!==(a=n[0].substr(0,n[0].length-1)+"")&&le(l,a)},i(n){r||(b(e.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),r=!1},d(n){n&&(p(t),p(l)),A(e,n)}}}function Qe(i){let e,t,a;return e=new Be({props:{class:"m-2"}}),{c(){P(e.$$.fragment),t=j(`
				format and validate JSON`)},l(l){N(e.$$.fragment,l),t=D(l,`
				format and validate JSON`)},m(l,r){T(e,l,r),y(l,t,r),a=!0},p:U,i(l){a||(b(e.$$.fragment,l),a=!0)},o(l){v(e.$$.fragment,l),a=!1},d(l){l&&p(t),A(e,l)}}}function Ye(i){let e,t,a,l,r;return a=new Fe({props:{class:"m-2"}}),{c(){e=w("a"),t=w("div"),P(a.$$.fragment),l=j(`
						Open Admin API Docs in new tab`),this.h()},l(n){e=O(n,"A",{target:!0,href:!0});var s=I(e);t=O(s,"DIV",{class:!0});var f=I(t);N(a.$$.fragment,f),l=D(f,`
						Open Admin API Docs in new tab`),f.forEach(p),s.forEach(p),this.h()},h(){q(t,"class","flex flex-row items-center"),q(e,"target","_blank"),q(e,"href","https://docs.konghq.com/gateway/3.7.x/admin-api/")},m(n,s){y(n,e,s),E(e,t),T(a,t,null),E(t,l),r=!0},p:U,i(n){r||(b(a.$$.fragment,n),r=!0)},o(n){v(a.$$.fragment,n),r=!1},d(n){n&&p(e),A(a)}}}function ve(i){let e,t,a;return t=new Me({props:{$$slots:{default:[Ze]},$$scope:{ctx:i}}}),{c(){e=w("div"),P(t.$$.fragment),this.h()},l(l){e=O(l,"DIV",{class:!0});var r=I(e);N(t.$$.fragment,r),r.forEach(p),this.h()},h(){q(e,"class","my-2")},m(l,r){y(l,e,r),T(t,e,null),a=!0},p(l,r){const n={};r&65584&&(n.$$scope={dirty:r,ctx:l}),t.$set(n)},i(l){a||(b(t.$$.fragment,l),a=!0)},o(l){v(t.$$.fragment,l),a=!1},d(l){l&&p(e),A(t)}}}function Ze(i){let e,t,a,l;function r(s){i[10](s)}let n={class:"mt-2",items:i[5]};return i[4]!==void 0&&(n.value=i[4]),t=new Ge({props:n}),we.push(()=>qe(t,"value",r)),t.$on("change",i[8]),{c(){e=j(`Select a plugin to load schema
					`),P(t.$$.fragment)},l(s){e=D(s,`Select a plugin to load schema
					`),N(t.$$.fragment,s)},m(s,f){y(s,e,f),T(t,s,f),l=!0},p(s,f){const h={};f&32&&(h.items=s[5]),!a&&f&16&&(a=!0,h.value=s[4],Je(()=>a=!1)),t.$set(h)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){v(t.$$.fragment,s),l=!1},d(s){s&&p(e),A(t,s)}}}function ye(i){let e,t="plugin 'config' fields:",a,l,r;return l=new Oe({props:{data:i[3],expandLevel:0,allowCopy:!1,allowKeyCopy:!0}}),{c(){e=w("h2"),e.textContent=t,a=J(),P(l.$$.fragment),this.h()},l(n){e=O(n,"H2",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-l1xq6t"&&(e.textContent=t),a=L(n),N(l.$$.fragment,n),this.h()},h(){q(e,"class","text-xl m-4")},m(n,s){y(n,e,s),y(n,a,s),T(l,n,s),r=!0},p(n,s){const f={};s&8&&(f.data=n[3]),l.$set(f)},i(n){r||(b(l.$$.fragment,n),r=!0)},o(n){v(l.$$.fragment,n),r=!1},d(n){n&&(p(e),p(a)),A(l,n)}}}function Ce(i){let e,t=i[0].substring(0,i[0].length-1)+"",a,l;return{c(){e=w("h2"),a=j(t),l=j(" schema"),this.h()},l(r){e=O(r,"H2",{class:!0});var n=I(e);a=D(n,t),l=D(n," schema"),n.forEach(p),this.h()},h(){q(e,"class","text-xl mx-4 mb-4")},m(r,n){y(r,e,n),E(e,a),E(e,l)},p(r,n){n&1&&t!==(t=r[0].substring(0,r[0].length-1)+"")&&le(a,t)},d(r){r&&p(e)}}}function xe(i){let e,t,a,l,r,n,s,f,h,d,o,u=i[0]&&ke(i),c=i[3]&&ye(i),_=i[0]&&Ce(i);return f=new Oe({props:{data:i[2],expandLevel:0,allowCopy:!1,allowKeyCopy:!0}}),{c(){u&&u.c(),e=J(),t=w("textarea"),a=J(),c&&c.c(),l=J(),r=w("br"),n=J(),_&&_.c(),s=J(),P(f.$$.fragment),this.h()},l(m){u&&u.l(m),e=L(m),t=O(m,"TEXTAREA",{class:!0}),I(t).forEach(p),a=L(m),c&&c.l(m),l=L(m),r=O(m,"BR",{}),n=L(m),_&&_.l(m),s=L(m),N(f.$$.fragment,m),this.h()},h(){q(t,"class","dark:bg-slate-900 w-full min-h-[30vh]")},m(m,k){u&&u.m(m,k),y(m,e,k),y(m,t,k),W(t,i[1]),y(m,a,k),c&&c.m(m,k),y(m,l,k),y(m,r,k),y(m,n,k),_&&_.m(m,k),y(m,s,k),T(f,m,k),h=!0,d||(o=$(t,"input",i[11]),d=!0)},p(m,[k]){m[0]?u?(u.p(m,k),k&1&&b(u,1)):(u=ke(m),u.c(),b(u,1),u.m(e.parentNode,e)):u&&(G(),v(u,1,1,()=>{u=null}),X()),k&2&&W(t,m[1]),m[3]?c?(c.p(m,k),k&8&&b(c,1)):(c=ye(m),c.c(),b(c,1),c.m(l.parentNode,l)):c&&(G(),v(c,1,1,()=>{c=null}),X()),m[0]?_?_.p(m,k):(_=Ce(m),_.c(),_.m(s.parentNode,s)):_&&(_.d(1),_=null);const K={};k&4&&(K.data=m[2]),f.$set(K)},i(m){h||(b(u),b(c),b(f.$$.fragment,m),h=!0)},o(m){v(u),v(c),v(f.$$.fragment,m),h=!1},d(m){m&&(p(e),p(t),p(a),p(l),p(r),p(n),p(s)),u&&u.d(m),c&&c.d(m),_&&_.d(m),A(f,m),d=!1,o()}}}function et(i,e,t){let a,l="",r={},n,s,f,h,d;function o(C,g){r[C]=g,u()}function u(){t(1,l=JSON.stringify(r,void 0,2))}Ie(async()=>{let C=new URLSearchParams(window.location.search),g=C.get("apiPostPath"),z=C.get("type");if(z&&t(0,a=z),g&&(n=atob(g)),a=="plugins"){const B=await(await H()).getInfo();B.ok&&B.data&&t(5,d=Object.entries(B.data.plugins.available_on_server).sort((S,F)=>F[1].priority-S[1].priority).map(S=>({name:`${S[0]} - ${S[1].priority}`,value:S[0]})))}const V=await(await H()).schema(a);if(V.ok&&V.data){t(2,s={});for(const B of V.data.fields){const S=Object.entries(B)[0],F=S[0],re=S[1];t(2,s[F]=re,s),re.required&&(r[F]=re.default??null)}u()}});function c(){let C;try{C=JSON.parse(l)}catch(g){M({message:`Failed to parse JSON. ${g.message}`});return}t(1,l=JSON.stringify(C,void 0,2)),M({message:"ok",type:"info"})}async function _(){var C;try{let g;if(n?g=await(await H()).request(n,"POST",JSON.parse(l)):g=await(await H()).createRecord(a,JSON.parse(l)),!g.ok||!g.data){M({message:((C=g.errTyped)==null?void 0:C.message)??g.err??"Error occured"});return}g.data.id&&je(`${De}/entities?type=${a}&id=${g.data.id}`)}catch(g){const z=g.response.data;M({message:z.message})}}async function m(){o("name",h);const C=await(await H()).pluginConfig(h);if(C.ok&&C.data){const g={};let z=C.data.fields.find(V=>Object.entries(V)[0][0]=="config");if(!z){M({message:`failed to load config for ${h}`});return}console.log(z),t(3,f={});for(const V of z.config.fields){const B=Object.entries(V)[0],S=B[0],F=B[1];t(3,f[S]=F,f),F.required&&(g[S]=F.default??null)}o("config",g),console.log(C.data)}}const k=async()=>await _();function K(C){h=C,t(4,h)}function ne(){l=this.value,t(1,l)}return[a,l,s,f,h,d,c,_,m,k,K,ne]}class tt extends ae{constructor(e){super(),se(this,e,et,xe,te,{})}}function lt(i){let e,t;return e=new tt({}),{c(){P(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,l){T(e,a,l),t=!0},p:U,i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){A(e,a)}}}class gt extends ae{constructor(e){super(),se(this,e,null,lt,te,{})}}export{gt as component};
