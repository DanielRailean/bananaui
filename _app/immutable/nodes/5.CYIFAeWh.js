import{s as oe,l as C,i as v,n as J,f as _,r as ce,u as Ne,v as re,w as de,x as M,y as Z,z as U,b as S,p as g,A as se,h as y,B as j,C as Oe,t as I,d as V,j as te,e as A,a as H,c as W,g as q,k as Be,o as De,q as Fe,F as me,M as Je}from"../chunks/scheduler.Bq1aPRZr.js";import{S as fe,i as ue,c as O,a as B,m as D,t as p,g as G,b as k,e as K,d as F}from"../chunks/index.dYeTvltd.js";import{e as _e}from"../chunks/each.CtjI00YO.js";import{T as Le,F as Te,C as ze,A as Ae}from"../chunks/ArrayWrap.pT3azhnT.js";import{B as ee}from"../chunks/Button.LL1zcB_i.js";import{T as We}from"../chunks/treeWrapper.Ds5YNeus.js";import{a as le}from"../chunks/requests.BCmUIPGy.js";import{g as he,b as ie}from"../chunks/entry.CZr-Zmxn.js";import{p as Ie}from"../chunks/stores.D3W6ltxw.js";import{g as Ce,w as Ve}from"../chunks/util.jCAmLx4X.js";import{a as x}from"../chunks/stores.CJOv96xK.js";import{t as ae}from"../chunks/bundle-mjs.BkWO730n.js";import{P as je,F as Me}from"../chunks/PaletteOutline.N16l27sC.js";import{k as pe}from"../chunks/config.CwKg5LUm.js";function Re(a){let e,s,l,t,i,r=a[4].id&&a[4].title&&ge(a),n=a[6].id&&a[6].desc&&be(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":i=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],d={};for(let u=0;u<o.length;u+=1)d=re(d,o[u]);return{c(){e=Z("svg"),r&&r.c(),s=C(),n&&n.c(),l=Z("path"),this.h()},l(u){e=U(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=S(e);r&&r.l(m),s=C(),n&&n.l(m),l=U(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(_),m.forEach(_),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,d)},m(u,m){v(u,e,m),r&&r.m(e,null),y(e,s),n&&n.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?r?r.p(u,m):(r=ge(u),r.c(),r.m(e,s)):r&&(r.d(1),r=null),u[6].id&&u[6].desc?n?n.p(u,m):(n=be(u),n.c(),n.m(e,l)):n&&(n.d(1),n=null),m&32&&g(l,"stroke-width",u[5]),se(e,d=Ce(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&t!==(t=ae("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:t},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&i!==(i=u[8]?u[10]:void 0)&&{"aria-describedby":i},{viewBox:"0 0 24 24"}]))},d(u){u&&_(e),r&&r.d(),n&&n.d()}}}function He(a){let e,s,l,t,i,r,n,o=a[4].id&&a[4].title&&ke(a),d=a[6].id&&a[6].desc&&ve(a),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:t=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":i=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let c=0;c<u.length;c+=1)m=re(m,u[c]);return{c(){e=Z("svg"),o&&o.c(),s=C(),d&&d.c(),l=Z("path"),this.h()},l(c){e=U(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var f=S(e);o&&o.l(f),s=C(),d&&d.l(f),l=U(f,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(_),f.forEach(_),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",a[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,m)},m(c,f){v(c,e,f),o&&o.m(e,null),y(e,s),d&&d.m(e,null),y(e,l),r||(n=[j(e,"click",a[13]),j(e,"keydown",a[14]),j(e,"keyup",a[15]),j(e,"focus",a[16]),j(e,"blur",a[17]),j(e,"mouseenter",a[18]),j(e,"mouseleave",a[19]),j(e,"mouseover",a[20]),j(e,"mouseout",a[21])],r=!0)},p(c,f){c[4].id&&c[4].title?o?o.p(c,f):(o=ke(c),o.c(),o.m(e,s)):o&&(o.d(1),o=null),c[6].id&&c[6].desc?d?d.p(c,f):(d=ve(c),d.c(),d.m(e,l)):d&&(d.d(1),d=null),f&32&&g(l,"stroke-width",c[5]),se(e,m=Ce(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},f&4&&{color:c[2]},f&2048&&c[11],f&4097&&t!==(t=ae("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:t},f&2&&{role:c[1]},f&128&&{"aria-label":c[7]},f&256&&i!==(i=c[8]?c[10]:void 0)&&{"aria-describedby":i},{viewBox:"0 0 24 24"}]))},d(c){c&&_(e),o&&o.d(),d&&d.d(),r=!1,Oe(n)}}}function ge(a){let e,s=a[4].title+"",l,t;return{c(){e=Z("title"),l=I(s),this.h()},l(i){e=U(i,"title",{id:!0});var r=S(e);l=V(r,s),r.forEach(_),this.h()},h(){g(e,"id",t=a[4].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&16&&s!==(s=i[4].title+"")&&te(l,s),r&16&&t!==(t=i[4].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function be(a){let e,s=a[6].desc+"",l,t;return{c(){e=Z("desc"),l=I(s),this.h()},l(i){e=U(i,"desc",{id:!0});var r=S(e);l=V(r,s),r.forEach(_),this.h()},h(){g(e,"id",t=a[6].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&64&&s!==(s=i[6].desc+"")&&te(l,s),r&64&&t!==(t=i[6].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function ke(a){let e,s=a[4].title+"",l,t;return{c(){e=Z("title"),l=I(s),this.h()},l(i){e=U(i,"title",{id:!0});var r=S(e);l=V(r,s),r.forEach(_),this.h()},h(){g(e,"id",t=a[4].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&16&&s!==(s=i[4].title+"")&&te(l,s),r&16&&t!==(t=i[4].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function ve(a){let e,s=a[6].desc+"",l,t;return{c(){e=Z("desc"),l=I(s),this.h()},l(i){e=U(i,"desc",{id:!0});var r=S(e);l=V(r,s),r.forEach(_),this.h()},h(){g(e,"id",t=a[6].id)},m(i,r){v(i,e,r),y(e,l)},p(i,r){r&64&&s!==(s=i[6].desc+"")&&te(l,s),r&64&&t!==(t=i[6].id)&&g(e,"id",t)},d(i){i&&_(e)}}}function qe(a){let e;function s(i,r){return i[3]?He:Re}let l=s(a),t=l(a);return{c(){t.c(),e=C()},l(i){t.l(i),e=C()},m(i,r){t.m(i,r),v(i,e,r)},p(i,[r]){l===(l=s(i))&&t?t.p(i,r):(t.d(1),t=l(i),t&&(t.c(),t.m(e.parentNode,e)))},i:J,o:J,d(i){i&&_(e),t.d(i)}}}function Ze(a,e,s){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let t=ce(e,l);const i=Ne("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:n=i.size||"md"}=e,{role:o=i.role||"img"}=e,{color:d=i.color||"currentColor"}=e,{withEvents:u=i.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:c=i.strokeWidth||"2"}=e,{desc:f={}}=e,w=`${m.id||""} ${f.id||""}`,E=!1,{ariaLabel:L="edit outline"}=e;function b(h){M.call(this,a,h)}function $(h){M.call(this,a,h)}function N(h){M.call(this,a,h)}function Q(h){M.call(this,a,h)}function Y(h){M.call(this,a,h)}function X(h){M.call(this,a,h)}function ne(h){M.call(this,a,h)}function P(h){M.call(this,a,h)}function T(h){M.call(this,a,h)}return a.$$set=h=>{s(12,e=re(re({},e),de(h))),s(11,t=ce(e,l)),"size"in h&&s(0,n=h.size),"role"in h&&s(1,o=h.role),"color"in h&&s(2,d=h.color),"withEvents"in h&&s(3,u=h.withEvents),"title"in h&&s(4,m=h.title),"strokeWidth"in h&&s(5,c=h.strokeWidth),"desc"in h&&s(6,f=h.desc),"ariaLabel"in h&&s(7,L=h.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(m.id||f.id?s(8,E=!0):s(8,E=!1))},e=de(e),[n,o,d,u,m,c,f,L,E,r,w,t,e,b,$,N,Q,Y,X,ne,P,T]}class Ue extends fe{constructor(e){super(),ue(this,e,Ze,qe,oe,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function we(a,e,s){const l=a.slice();return l[21]=e[s],l}function Xe(a){let e,s,l;return e=new Ue({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=I("edit")},l(t){B(e.$$.fragment,t),s=V(t,"edit")},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(s),F(e,t)}}}function Ge(a){let e,s,l,t,i;return l=new Le({props:{class:"m-1"}}),{c(){e=A("div"),s=A("div"),O(l.$$.fragment),t=I(`
					delete`),this.h()},l(r){e=W(r,"DIV",{class:!0});var n=S(e);s=W(n,"DIV",{class:!0});var o=S(s);B(l.$$.fragment,o),t=V(o,`
					delete`),o.forEach(_),n.forEach(_),this.h()},h(){g(s,"class","flex flex-row items-center"),g(e,"class","text-rose-500")},m(r,n){v(r,e,n),y(e,s),D(l,s,null),y(s,t),i=!0},p:J,i(r){i||(p(l.$$.fragment,r),i=!0)},o(r){k(l.$$.fragment,r),i=!1},d(r){r&&_(e),F(l)}}}function Ke(a){let e,s,l;return e=new Te({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=I(`
			copy`)},l(t){B(e.$$.fragment,t),s=V(t,`
			copy`)},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(s),F(e,t)}}}function $e(a){let e,s,l,t;e=new ee({props:{class:"mr-3",color:"blue",$$slots:{default:[Qe]},$$scope:{ctx:a}}}),e.$on("click",a[9]);let i=a[1]!=a[2]&&Ee(a);return{c(){O(e.$$.fragment),s=H(),i&&i.c(),l=C()},l(r){B(e.$$.fragment,r),s=q(r),i&&i.l(r),l=C()},m(r,n){D(e,r,n),v(r,s,n),i&&i.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&16777216&&(o.$$scope={dirty:n,ctx:r}),e.$set(o),r[1]!=r[2]?i?(i.p(r,n),n&6&&p(i,1)):(i=Ee(r),i.c(),p(i,1),i.m(l.parentNode,l)):i&&(G(),k(i,1,1,()=>{i=null}),K())},i(r){t||(p(e.$$.fragment,r),p(i),t=!0)},o(r){k(e.$$.fragment,r),k(i),t=!1},d(r){r&&(_(s),_(l)),F(e,r),i&&i.d(r)}}}function Qe(a){let e,s,l;return e=new je({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=I(`
				format and validate JSON`)},l(t){B(e.$$.fragment,t),s=V(t,`
				format and validate JSON`)},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(s),F(e,t)}}}function Ee(a){let e,s;return e=new ee({props:{class:"mr-3",color:"green",$$slots:{default:[Ye]},$$scope:{ctx:a}}}),e.$on("click",a[15]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p(l,t){const i={};t&16777216&&(i.$$scope={dirty:t,ctx:l}),e.$set(i)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){F(e,l)}}}function Ye(a){let e,s,l;return e=new Me({props:{class:"m-2"}}),{c(){O(e.$$.fragment),s=I(`
					save`)},l(t){B(e.$$.fragment,t),s=V(t,`
					save`)},m(t,i){D(e,t,i),v(t,s,i),l=!0},p:J,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&_(s),F(e,t)}}}function xe(a){let e,s="Loading ...";return{c(){e=A("h2"),e.textContent=s,this.h()},l(l){e=W(l,"H2",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-wq8tmm"&&(e.textContent=s),this.h()},h(){g(e,"class","text-xl text-center")},m(l,t){v(l,e,t)},p:J,i:J,o:J,d(l){l&&_(e)}}}function et(a){let e,s,l,t;const i=[lt,tt],r=[];function n(o,d){return o[3]?0:1}return e=n(a),s=r[e]=i[e](a),{c(){s.c(),l=C()},l(o){s.l(o),l=C()},m(o,d){r[e].m(o,d),v(o,l,d),t=!0},p(o,d){let u=e;e=n(o),e===u?r[e].p(o,d):(G(),k(r[u],1,1,()=>{r[u]=null}),K(),s=r[e],s?s.p(o,d):(s=r[e]=i[e](o),s.c()),p(s,1),s.m(l.parentNode,l))},i(o){t||(p(s),t=!0)},o(o){k(s),t=!1},d(o){o&&_(l),r[e].d(o)}}}function tt(a){let e,s,l,t;e=new We({props:{data:a[0],rounded:!1}});let i=a[6]&&ye(a);return{c(){O(e.$$.fragment),s=H(),i&&i.c(),l=C()},l(r){B(e.$$.fragment,r),s=q(r),i&&i.l(r),l=C()},m(r,n){D(e,r,n),v(r,s,n),i&&i.m(r,n),v(r,l,n),t=!0},p(r,n){const o={};n&1&&(o.data=r[0]),e.$set(o),r[6]?i?(i.p(r,n),n&64&&p(i,1)):(i=ye(r),i.c(),p(i,1),i.m(l.parentNode,l)):i&&(G(),k(i,1,1,()=>{i=null}),K())},i(r){t||(p(e.$$.fragment,r),p(i),t=!0)},o(r){k(e.$$.fragment,r),k(i),t=!1},d(r){r&&(_(s),_(l)),F(e,r),i&&i.d(r)}}}function lt(a){let e,s,l;return{c(){e=A("textarea"),this.h()},l(t){e=W(t,"TEXTAREA",{class:!0}),S(e).forEach(_),this.h()},h(){g(e,"class","dark:bg-slate-900 w-full min-h-[70vh]")},m(t,i){v(t,e,i),me(e,a[2]),s||(l=j(e,"input",a[16]),s=!0)},p(t,i){i&4&&me(e,t[2])},i:J,o:J,d(t){t&&_(e),s=!1,l()}}}function ye(a){let e,s,l=_e(a[6]),t=[];for(let r=0;r<l.length;r+=1)t[r]=Se(we(a,l,r));const i=r=>k(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=C()},l(r){for(let n=0;n<t.length;n+=1)t[n].l(r);e=C()},m(r,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,n);v(r,e,n),s=!0},p(r,n){if(n&192){l=_e(r[6]);let o;for(o=0;o<l.length;o+=1){const d=we(r,l,o);t[o]?(t[o].p(d,n),p(t[o],1)):(t[o]=Se(d),t[o].c(),p(t[o],1),t[o].m(e.parentNode,e))}for(G(),o=l.length;o<t.length;o+=1)i(o);K()}},i(r){if(!s){for(let n=0;n<l.length;n+=1)p(t[n]);s=!0}},o(r){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)k(t[n]);s=!1},d(r){r&&_(e),Je(t,r)}}}function rt(a){let e,s,l,t,i,r;return l=new ze({props:{class:"m-2"}}),{c(){e=A("a"),s=A("div"),O(l.$$.fragment),t=I(`
										add`),this.h()},l(n){e=W(n,"A",{href:!0});var o=S(e);s=W(o,"DIV",{class:!0});var d=S(s);B(l.$$.fragment,d),t=V(d,`
										add`),d.forEach(_),o.forEach(_),this.h()},h(){g(s,"class","flex flex-row items-center"),g(e,"href",i=ie+"/add?type="+a[21].name+"?apiPostPath="+btoa(a[21].entitySubPath))},m(n,o){v(n,e,o),y(e,s),D(l,s,null),y(s,t),r=!0},p(n,o){(!r||o&64&&i!==(i=ie+"/add?type="+n[21].name+"?apiPostPath="+btoa(n[21].entitySubPath)))&&g(e,"href",i)},i(n){r||(p(l.$$.fragment,n),r=!0)},o(n){k(l.$$.fragment,n),r=!1},d(n){n&&_(e),F(l)}}}function Pe(a){let e,s;return e=new Ae({props:{data:a[21].data,displayedFields:a[21].displayedFields,type:a[21].name,entity:a[21]}}),e.$on("refresh",a[18]),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p(l,t){const i={};t&64&&(i.data=l[21].data),t&64&&(i.displayedFields=l[21].displayedFields),t&64&&(i.type=l[21].name),t&64&&(i.entity=l[21]),e.$set(i)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){F(e,l)}}}function Se(a){let e,s,l=a[21].name+"",t,i,r,n,o,d,u;function m(){return a[17](a[21])}n=new ee({props:{color:"alternative",$$slots:{default:[rt]},$$scope:{ctx:a}}}),n.$on("click",m);let c=a[21].data&&a[21].data.length>0&&Pe(a);return{c(){e=A("div"),s=A("h2"),t=I(l),i=H(),r=A("div"),O(n.$$.fragment),o=H(),c&&c.c(),d=C(),this.h()},l(f){e=W(f,"DIV",{class:!0});var w=S(e);s=W(w,"H2",{});var E=S(s);t=V(E,l),E.forEach(_),i=q(w),r=W(w,"DIV",{class:!0});var L=S(r);B(n.$$.fragment,L),L.forEach(_),w.forEach(_),o=q(f),c&&c.l(f),d=C(),this.h()},h(){g(r,"class","flex flex-row m-4 h-8"),g(e,"class","flex flex-row m-4 h-8 items-center")},m(f,w){v(f,e,w),y(e,s),y(s,t),y(e,i),y(e,r),D(n,r,null),v(f,o,w),c&&c.m(f,w),v(f,d,w),u=!0},p(f,w){a=f,(!u||w&64)&&l!==(l=a[21].name+"")&&te(t,l);const E={};w&16777280&&(E.$$scope={dirty:w,ctx:a}),n.$set(E),a[21].data&&a[21].data.length>0?c?(c.p(a,w),w&64&&p(c,1)):(c=Pe(a),c.c(),p(c,1),c.m(d.parentNode,d)):c&&(G(),k(c,1,1,()=>{c=null}),K())},i(f){u||(p(n.$$.fragment,f),p(c),u=!0)},o(f){k(n.$$.fragment,f),k(c),u=!1},d(f){f&&(_(e),_(o),_(d)),F(n),c&&c.d(f)}}}function st(a){let e,s,l,t,i,r,n,o,d,u,m,c;l=new ee({props:{class:"mr-2",$$slots:{default:[Xe]},$$scope:{ctx:a}}}),l.$on("click",a[12]),i=new ee({props:{class:"h-8 p-2 mr-2",title:"delete",color:"alternative",$$slots:{default:[Ge]},$$scope:{ctx:a}}}),i.$on("click",a[13]),n=new ee({props:{color:"alternative",class:"mr-2",$$slots:{default:[Ke]},$$scope:{ctx:a}}}),n.$on("click",a[14]);let f=a[3]&&$e(a);const w=[et,xe],E=[];function L(b,$){return b[0]?0:1}return u=L(a),m=E[u]=w[u](a),{c(){e=A("div"),s=A("div"),O(l.$$.fragment),t=H(),O(i.$$.fragment),r=H(),O(n.$$.fragment),o=H(),f&&f.c(),d=H(),m.c(),this.h()},l(b){e=W(b,"DIV",{class:!0});var $=S(e);s=W($,"DIV",{class:!0});var N=S(s);B(l.$$.fragment,N),t=q(N),B(i.$$.fragment,N),r=q(N),B(n.$$.fragment,N),o=q(N),f&&f.l(N),N.forEach(_),d=q($),m.l($),$.forEach(_),this.h()},h(){g(s,"class","flex flex-row m-4 h-8"),g(e,"class","mb-2")},m(b,$){v(b,e,$),y(e,s),D(l,s,null),y(s,t),D(i,s,null),y(s,r),D(n,s,null),y(s,o),f&&f.m(s,null),y(e,d),E[u].m(e,null),c=!0},p(b,[$]){const N={};$&16777216&&(N.$$scope={dirty:$,ctx:b}),l.$set(N);const Q={};$&16777216&&(Q.$$scope={dirty:$,ctx:b}),i.$set(Q);const Y={};$&16777216&&(Y.$$scope={dirty:$,ctx:b}),n.$set(Y),b[3]?f?(f.p(b,$),$&8&&p(f,1)):(f=$e(b),f.c(),p(f,1),f.m(s,null)):f&&(G(),k(f,1,1,()=>{f=null}),K());let X=u;u=L(b),u===X?E[u].p(b,$):(G(),k(E[X],1,1,()=>{E[X]=null}),K(),m=E[u],m?m.p(b,$):(m=E[u]=w[u](b),m.c()),p(m,1),m.m(e,null))},i(b){c||(p(l.$$.fragment,b),p(i.$$.fragment,b),p(n.$$.fragment,b),p(f),p(m),c=!0)},o(b){k(l.$$.fragment,b),k(i.$$.fragment,b),k(n.$$.fragment,b),k(f),k(m),c=!1},d(b){b&&_(e),F(l),F(i),F(n),f&&f.d(),E[u].d()}}}function it(a,e,s){let l;Be(a,Ie,P=>s(11,l=P));let{data:t={}}=e,i="",r="",n=!1,o,d,u,m,c=!1;De(()=>{c=!0,f()});async function f(){var T;if(!c)return;s(0,t=void 0);const P=new URLSearchParams(window.location.search);s(5,d=P.get("type")??"none"),s(4,o=P.get("id")??"none");{s(0,t=void 0);const h=await(await le()).findRecord(d,o);s(0,t=h.data),s(2,r=JSON.stringify(t,void 0,2)),s(1,i=r),u=pe.find(z=>z.name==d),s(6,m=pe.filter(z=>{var R;return(R=u==null?void 0:u.subEntities)==null?void 0:R.includes(z.name)}).map(z=>({...z,entitySubPath:`${d}/${o}/${z.name}`})));for(const z of m){const R=await(await le()).findAll(z.name,{},`/${d}/${o}`);if(!R.ok){x({message:`failed to load ${z.name}`});continue}z.data=(T=R.data)==null?void 0:T.data,s(6,m)}}}async function w(P,T,h){if(!confirm(`Please confirm deletion of '${h}'`))return;const R=await(await le()).deleteRecord(P,T);R.ok?(x({message:"ok",type:"info"}),he(`${ie}/entities?type=${d}`)):x({message:`failed to delete. ${R.err}`})}function E(){let P;try{P=JSON.parse(r)}catch(T){x({message:`Failed to parse JSON. ${T.message}`});return}s(2,r=JSON.stringify(P,void 0,2)),x({message:"ok",type:"info"})}async function L(){if(confirm("confirm save?")){E();try{const T=await(await le()).updateRecord(d,o,JSON.parse(r));s(3,n=!n),s(3,n),s(0,t=JSON.parse(r)),s(1,i=r)}catch(T){const h=T.response.data;x({message:h.message})}}}const b=()=>{s(3,n=!n)},$=async()=>await w(d,o,t.name??t.id),N=()=>{Ve(i)},Q=async()=>await L();function Y(){r=this.value,s(2,r)}const X=P=>{he(`${ie}/add?type=${P.name}?apiPostPath=${btoa(P.entitySubPath)}`)},ne=async()=>await f();return a.$$set=P=>{"data"in P&&s(0,t=P.data)},a.$$.update=()=>{a.$$.dirty&2048&&f()},[t,i,r,n,o,d,m,f,w,E,L,l,b,$,N,Q,Y,X,ne]}class at extends fe{constructor(e){super(),ue(this,e,it,st,oe,{data:0})}}function nt(a){let e,s;return e=new at({}),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p:J,i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){F(e,l)}}}class $t extends fe{constructor(e){super(),ue(this,e,null,nt,oe,{})}}export{$t as component};
