import{s as pe,v as P,i as y,n as G,f as v,w as oe,x as Me,y as H,z as ne,A as C,J as T,K as D,b as E,l as _,L as Q,h as p,u as L,r as we,t as W,d as R,j as V,a as x,e as j,M as ze,g as $,c as S,k as Be,o as Ce}from"../chunks/scheduler.BSW9XCdM.js";import{S as Ee,i as ye,c as ee,a as te,m as le,b as O,e as Ae,t as I,d as ie,g as Pe}from"../chunks/index.C72GILm6.js";import{s as fe,k as Te,p as de}from"../chunks/config.n4gmJunM.js";import{C as De,A as We}from"../chunks/ArrayWrap.CNrmRJoO.js";import{g as Le,c as ue,d as ce}from"../chunks/util.BSQYK1U1.js";import{t as X}from"../chunks/bundle-mjs.D696Ktp4.js";import{b as ae,g as Re}from"../chunks/entry.D9hAROwT.js";import{D as he,t as je,i as _e,a as Se}from"../chunks/stores.CBiANZDg.js";import{a as me}from"../chunks/requests.BHT8YcI-.js";import{p as Ue}from"../chunks/stores.4QJHJnC2.js";function Ne(l){let e,s,i,r,t,a=l[4].id&&l[4].title&&be(l),m=l[6].id&&l[6].desc&&ve(l),c=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:l[2]},l[11],{class:r=X("shrink-0",l[9][l[0]??"md"],l[12].class)},{role:l[1]},{"aria-label":l[7]},{"aria-describedby":t=l[8]?l[10]:void 0},{viewBox:"0 0 24 24"}],d={};for(let n=0;n<c.length;n+=1)d=H(d,c[n]);return{c(){e=T("svg"),a&&a.c(),s=P(),m&&m.c(),i=T("path"),this.h()},l(n){e=D(n,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var u=E(e);a&&a.l(u),s=P(),m&&m.l(u),i=D(u,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),E(i).forEach(v),u.forEach(v),this.h()},h(){_(i,"stroke","currentColor"),_(i,"stroke-linecap","round"),_(i,"stroke-linejoin","round"),_(i,"stroke-width",l[5]),_(i,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),Q(e,d)},m(n,u){y(n,e,u),a&&a.m(e,null),p(e,s),m&&m.m(e,null),p(e,i)},p(n,u){n[4].id&&n[4].title?a?a.p(n,u):(a=be(n),a.c(),a.m(e,s)):a&&(a.d(1),a=null),n[6].id&&n[6].desc?m?m.p(n,u):(m=ve(n),m.c(),m.m(e,i)):m&&(m.d(1),m=null),u&32&&_(i,"stroke-width",n[5]),Q(e,d=Le(c,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},u&4&&{color:n[2]},u&2048&&n[11],u&4097&&r!==(r=X("shrink-0",n[9][n[0]??"md"],n[12].class))&&{class:r},u&2&&{role:n[1]},u&128&&{"aria-label":n[7]},u&256&&t!==(t=n[8]?n[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(n){n&&v(e),a&&a.d(),m&&m.d()}}}function Oe(l){let e,s,i,r,t,a,m,c=l[4].id&&l[4].title&&ge(l),d=l[6].id&&l[6].desc&&ke(l),n=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:l[2]},l[11],{class:r=X("shrink-0",l[9][l[0]??"md"],l[12].class)},{role:l[1]},{"aria-label":l[7]},{"aria-describedby":t=l[8]?l[10]:void 0},{viewBox:"0 0 24 24"}],u={};for(let f=0;f<n.length;f+=1)u=H(u,n[f]);return{c(){e=T("svg"),c&&c.c(),s=P(),d&&d.c(),i=T("path"),this.h()},l(f){e=D(f,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var b=E(e);c&&c.l(b),s=P(),d&&d.l(b),i=D(b,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),E(i).forEach(v),b.forEach(v),this.h()},h(){_(i,"stroke","currentColor"),_(i,"stroke-linecap","round"),_(i,"stroke-linejoin","round"),_(i,"stroke-width",l[5]),_(i,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),Q(e,u)},m(f,b){y(f,e,b),c&&c.m(e,null),p(e,s),d&&d.m(e,null),p(e,i),a||(m=[L(e,"click",l[13]),L(e,"keydown",l[14]),L(e,"keyup",l[15]),L(e,"focus",l[16]),L(e,"blur",l[17]),L(e,"mouseenter",l[18]),L(e,"mouseleave",l[19]),L(e,"mouseover",l[20]),L(e,"mouseout",l[21])],a=!0)},p(f,b){f[4].id&&f[4].title?c?c.p(f,b):(c=ge(f),c.c(),c.m(e,s)):c&&(c.d(1),c=null),f[6].id&&f[6].desc?d?d.p(f,b):(d=ke(f),d.c(),d.m(e,i)):d&&(d.d(1),d=null),b&32&&_(i,"stroke-width",f[5]),Q(e,u=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},b&4&&{color:f[2]},b&2048&&f[11],b&4097&&r!==(r=X("shrink-0",f[9][f[0]??"md"],f[12].class))&&{class:r},b&2&&{role:f[1]},b&128&&{"aria-label":f[7]},b&256&&t!==(t=f[8]?f[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(f){f&&v(e),c&&c.d(),d&&d.d(),a=!1,we(m)}}}function be(l){let e,s=l[4].title+"",i,r;return{c(){e=T("title"),i=W(s),this.h()},l(t){e=D(t,"title",{id:!0});var a=E(e);i=R(a,s),a.forEach(v),this.h()},h(){_(e,"id",r=l[4].id)},m(t,a){y(t,e,a),p(e,i)},p(t,a){a&16&&s!==(s=t[4].title+"")&&V(i,s),a&16&&r!==(r=t[4].id)&&_(e,"id",r)},d(t){t&&v(e)}}}function ve(l){let e,s=l[6].desc+"",i,r;return{c(){e=T("desc"),i=W(s),this.h()},l(t){e=D(t,"desc",{id:!0});var a=E(e);i=R(a,s),a.forEach(v),this.h()},h(){_(e,"id",r=l[6].id)},m(t,a){y(t,e,a),p(e,i)},p(t,a){a&64&&s!==(s=t[6].desc+"")&&V(i,s),a&64&&r!==(r=t[6].id)&&_(e,"id",r)},d(t){t&&v(e)}}}function ge(l){let e,s=l[4].title+"",i,r;return{c(){e=T("title"),i=W(s),this.h()},l(t){e=D(t,"title",{id:!0});var a=E(e);i=R(a,s),a.forEach(v),this.h()},h(){_(e,"id",r=l[4].id)},m(t,a){y(t,e,a),p(e,i)},p(t,a){a&16&&s!==(s=t[4].title+"")&&V(i,s),a&16&&r!==(r=t[4].id)&&_(e,"id",r)},d(t){t&&v(e)}}}function ke(l){let e,s=l[6].desc+"",i,r;return{c(){e=T("desc"),i=W(s),this.h()},l(t){e=D(t,"desc",{id:!0});var a=E(e);i=R(a,s),a.forEach(v),this.h()},h(){_(e,"id",r=l[6].id)},m(t,a){y(t,e,a),p(e,i)},p(t,a){a&64&&s!==(s=t[6].desc+"")&&V(i,s),a&64&&r!==(r=t[6].id)&&_(e,"id",r)},d(t){t&&v(e)}}}function Ie(l){let e;function s(t,a){return t[3]?Oe:Ne}let i=s(l),r=i(l);return{c(){r.c(),e=P()},l(t){r.l(t),e=P()},m(t,a){r.m(t,a),y(t,e,a)},p(t,[a]){i===(i=s(t))&&r?r.p(t,a):(r.d(1),r=i(t),r&&(r.c(),r.m(e.parentNode,e)))},i:G,o:G,d(t){t&&v(e),r.d(t)}}}function Ve(l,e,s){const i=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let r=oe(e,i);const t=Me("iconCtx")??{},a={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:m=t.size||"md"}=e,{role:c=t.role||"img"}=e,{color:d=t.color||"currentColor"}=e,{withEvents:n=t.withEvents||!1}=e,{title:u={}}=e,{strokeWidth:f=t.strokeWidth||"2"}=e,{desc:b={}}=e,A=`${u.id||""} ${b.id||""}`,M=!1,{ariaLabel:k="refresh outline"}=e;function w(o){C.call(this,l,o)}function g(o){C.call(this,l,o)}function z(o){C.call(this,l,o)}function N(o){C.call(this,l,o)}function q(o){C.call(this,l,o)}function F(o){C.call(this,l,o)}function B(o){C.call(this,l,o)}function J(o){C.call(this,l,o)}function h(o){C.call(this,l,o)}return l.$$set=o=>{s(12,e=H(H({},e),ne(o))),s(11,r=oe(e,i)),"size"in o&&s(0,m=o.size),"role"in o&&s(1,c=o.role),"color"in o&&s(2,d=o.color),"withEvents"in o&&s(3,n=o.withEvents),"title"in o&&s(4,u=o.title),"strokeWidth"in o&&s(5,f=o.strokeWidth),"desc"in o&&s(6,b=o.desc),"ariaLabel"in o&&s(7,k=o.ariaLabel)},l.$$.update=()=>{l.$$.dirty&80&&(u.id||b.id?s(8,M=!0):s(8,M=!1))},e=ne(e),[m,c,d,n,u,f,b,k,M,a,A,r,e,w,g,z,N,q,F,B,J,h]}class qe extends Ee{constructor(e){super(),ye(this,e,Ve,Ie,pe,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Fe(l){let e,s,i=(l[1]??"")+"",r;return{c(){e=j("p"),s=W("Loading "),r=W(i),this.h()},l(t){e=S(t,"P",{class:!0});var a=E(e);s=R(a,"Loading "),r=R(a,i),a.forEach(v),this.h()},h(){_(e,"class","pl-5 pb-4 text-xl font-light")},m(t,a){y(t,e,a),p(e,s),p(e,r)},p(t,a){a&2&&i!==(i=(t[1]??"")+"")&&V(r,i)},i:G,o:G,d(t){t&&v(e)}}}function Je(l){let e,s;return e=new We({props:{dataRaw:l[0],type:l[1],entity:l[2]}}),e.$on("refresh",l[7]),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,r){le(e,i,r),s=!0},p(i,r){const t={};r&1&&(t.dataRaw=i[0]),r&2&&(t.type=i[1]),r&4&&(t.entity=i[2]),e.$set(t)},i(i){s||(I(e.$$.fragment,i),s=!0)},o(i){O(e.$$.fragment,i),s=!1},d(i){ie(e,i)}}}function Ke(l){let e,s,i,r,t,a,m,c,d,n,u,f,b,A,M,k,w,g,z,N,q;document.title=e=fe.name+" - "+ue(l[1]),a=new qe({}),f=new De({props:{class:"mr-[2px]"}});const F=[Je,Fe],B=[];function J(h,o){return h[0]?0:1}return k=J(l),w=B[k]=F[k](l),{c(){s=x(),i=j("div"),r=j("div"),t=j("button"),ee(a.$$.fragment),m=W(`
			Refresh`),c=x(),d=j("button"),n=j("a"),u=j("div"),ee(f.$$.fragment),b=W(`
					Add`),M=x(),w.c(),g=P(),this.h()},l(h){ze("svelte-f4u3pm",document.head).forEach(v),s=$(h),i=S(h,"DIV",{class:!0});var U=E(i);r=S(U,"DIV",{class:!0});var K=E(r);t=S(K,"BUTTON",{color:!0,class:!0});var Y=E(t);te(a.$$.fragment,Y),m=R(Y,`
			Refresh`),Y.forEach(v),c=$(K),d=S(K,"BUTTON",{class:!0,color:!0});var se=E(d);n=S(se,"A",{href:!0});var re=E(n);u=S(re,"DIV",{class:!0});var Z=E(u);te(f.$$.fragment,Z),b=R(Z,`
					Add`),Z.forEach(v),re.forEach(v),se.forEach(v),K.forEach(v),U.forEach(v),M=$(h),w.l(h),g=P(),this.h()},h(){_(t,"color","alternative"),_(t,"class","flex flex-row mr-2 text-emerald-600 items-center"),_(u,"class","flex flex-row items-center space-x-1"),_(n,"href",A=ae+"/add?type="+l[1]),_(d,"class","flex flex-row mr-2 text-blue-700 items-center"),_(d,"color","alternative"),_(r,"class","flex flex-row mb-2 h-10"),_(i,"class","flex flex-col m-4 mb-3 font-light text-2xl")},m(h,o){y(h,s,o),y(h,i,o),p(i,r),p(r,t),le(a,t,null),p(t,m),p(r,c),p(r,d),p(d,n),p(n,u),le(f,u,null),p(u,b),y(h,M,o),B[k].m(h,o),y(h,g,o),z=!0,N||(q=[L(t,"click",l[5]),L(d,"click",l[6])],N=!0)},p(h,[o]){(!z||o&2)&&e!==(e=fe.name+" - "+ue(h[1]))&&(document.title=e),(!z||o&2&&A!==(A=ae+"/add?type="+h[1]))&&_(n,"href",A);let U=k;k=J(h),k===U?B[k].p(h,o):(Pe(),O(B[U],1,1,()=>{B[U]=null}),Ae(),w=B[k],w?w.p(h,o):(w=B[k]=F[k](h),w.c()),I(w,1),w.m(g.parentNode,g))},i(h){z||(I(a.$$.fragment,h),I(f.$$.fragment,h),I(w),z=!0)},o(h){O(a.$$.fragment,h),O(f.$$.fragment,h),O(w),z=!1},d(h){h&&(v(s),v(i),v(M),v(g)),ie(a),ie(f),B[k].d(h),N=!1,we(q)}}}function Ge(l,e,s){let i;Be(l,Ue,b=>s(4,i=b));let r,t,a,m=!1;Ce(()=>{m=!0,d()});let c;async function d(b=!1){if(!m)return;const A=new URLSearchParams(window.location.search);c=he.now();const M=t;s(1,t=A.get("type")??"none");let k=!1;M!=t&&(s(0,r=void 0),k=!0);try{if(s(2,a=Te.find(z=>z.name==t)),!a)return;let g=await(await me()).findAll(a.apiPath,{});s(0,r=g.data.data);var w=c;for(await ce(de);g.data.next&&(g=await(await me()).request(g.data.next??"",void 0,void 0),w==c);)g.ok&&(s(0,r=r.concat(g.data.data)),k&&je.set(he.now())),await ce(de);b&&_e("refresh finished!")}catch(g){console.log(g),Se({message:`Failed fetching the ${t}. ${g.message?g.message:""}`})}}const n=()=>{d(!0),_e("refresh started!")},u=()=>{Re(`${ae}/add?type=${t}`)},f=async()=>await d();return l.$$.update=()=>{l.$$.dirty&16&&d()},[r,t,a,d,i,n,u,f]}class it extends Ee{constructor(e){super(),ye(this,e,Ge,Ke,pe,{})}}export{it as component};
