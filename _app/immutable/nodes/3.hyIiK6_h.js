import{s as x,l as B,i as v,f as h,r as Q,v as K,w as Y,P as Ce,G as oe,I as fe,J as ue,K as ce,e as E,c as P,b as N,H as Z,S as Ee,h as T,T as me,U as X,B as H,n as U,M as Pe,C as Ne,t as z,d as F,F as W,j as de,x as re,V as Te,a as q,g as D,p as V,o as Ae,W as Ie,q as Je}from"../chunks/scheduler.Bq1aPRZr.js";import{S as ee,i as te,g as $,b,e as G,t as p,c as C,a as O,m as S,d as w,f as Le}from"../chunks/index.dYeTvltd.js";import{T as Oe}from"../chunks/treeWrapper.DeTzRZjg.js";import{g as je}from"../chunks/entry.CAsWKPi7.js";import{a as M}from"../chunks/requests.Cweu3if8.js";import{B as ie}from"../chunks/Button.LL1zcB_i.js";import{g as Se}from"../chunks/util.jCAmLx4X.js";import{t as we}from"../chunks/bundle-mjs.BkWO730n.js";import{e as _e}from"../chunks/each.CtjI00YO.js";import{a as R}from"../chunks/stores.CJOv96xK.js";import{F as qe,P as De}from"../chunks/PaletteOutline.N16l27sC.js";import{L as ze}from"../chunks/LinkOutline.BaPMgW5x.js";function Fe(i){let e;const t=i[7].default,a=oe(t,i,i[6],null);return{c(){a&&a.c()},l(l){a&&a.l(l)},m(l,r){a&&a.m(l,r),e=!0},p(l,r){a&&a.p&&(!e||r&64)&&fe(a,t,l,l[6],e?ce(t,l[6],r,null):ue(l[6]),null)},i(l){e||(p(a,l),e=!0)},o(l){b(a,l),e=!1},d(l){a&&a.d(l)}}}function Ve(i){let e,t;const a=i[7].default,l=oe(a,i,i[6],null);let r=[i[3],{class:i[2]}],n={};for(let s=0;s<r.length;s+=1)n=K(n,r[s]);return{c(){e=E("label"),l&&l.c(),this.h()},l(s){e=P(s,"LABEL",{class:!0});var f=N(e);l&&l.l(f),f.forEach(h),this.h()},h(){Z(e,n)},m(s,f){v(s,e,f),l&&l.m(e,null),i[8](e),t=!0},p(s,f){l&&l.p&&(!t||f&64)&&fe(l,a,s,s[6],t?ce(a,s[6],f,null):ue(s[6]),null),Z(e,n=Se(r,[f&8&&s[3],(!t||f&4)&&{class:s[2]}]))},i(s){t||(p(l,s),t=!0)},o(s){b(l,s),t=!1},d(s){s&&h(e),l&&l.d(s),i[8](null)}}}function Be(i){let e,t,a,l;const r=[Ve,Fe],n=[];function s(f,_){return f[0]?0:1}return e=s(i),t=n[e]=r[e](i),{c(){t.c(),a=B()},l(f){t.l(f),a=B()},m(f,_){n[e].m(f,_),v(f,a,_),l=!0},p(f,[_]){let c=e;e=s(f),e===c?n[e].p(f,_):($(),b(n[c],1,1,()=>{n[c]=null}),G(),t=n[e],t?t.p(f,_):(t=n[e]=r[e](f),t.c()),p(t,1),t.m(a.parentNode,a))},i(f){l||(p(t),l=!0)},o(f){b(t),l=!1},d(f){f&&h(a),n[e].d(f)}}}function Ke(i,e,t){let a;const l=["color","defaultClass","show"];let r=Q(e,l),{$$slots:n={},$$scope:s}=e,{color:f="gray"}=e,{defaultClass:_="text-sm rtl:text-right font-medium block"}=e,{show:c=!0}=e,o;const u={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function d(g){Ce[g?"unshift":"push"](()=>{o=g,t(1,o)})}return i.$$set=g=>{t(10,e=K(K({},e),Y(g))),t(3,r=Q(e,l)),"color"in g&&t(4,f=g.color),"defaultClass"in g&&t(5,_=g.defaultClass),"show"in g&&t(0,c=g.show),"$$scope"in g&&t(6,s=g.$$scope)},i.$$.update=()=>{if(i.$$.dirty&18){const g=o==null?void 0:o.control;t(4,f=g!=null&&g.disabled?"disabled":f)}t(2,a=we(_,u[f],e.class))},e=Y(e),[c,o,a,r,f,_,s,n,d]}class Me extends ee{constructor(e){super(),te(this,e,Ke,Be,x,{color:4,defaultClass:5,show:0})}}function ge(i,e,t){const a=i.slice();return a[17]=e[t].value,a[18]=e[t].name,a}function he(i){let e,t,a;return{c(){e=E("option"),t=z(i[2]),this.h()},l(l){e=P(l,"OPTION",{});var r=N(e);t=F(r,i[2]),r.forEach(h),this.h()},h(){e.disabled=!0,e.selected=a=i[0]===void 0?!0:void 0,e.__value="",W(e,e.__value)},m(l,r){v(l,e,r),T(e,t)},p(l,r){r&4&&de(t,l[2]),r&3&&a!==(a=l[0]===void 0?!0:void 0)&&(e.selected=a)},d(l){l&&h(e)}}}function pe(i){let e;const t=i[10].default,a=oe(t,i,i[9],null);return{c(){a&&a.c()},l(l){a&&a.l(l)},m(l,r){a&&a.m(l,r),e=!0},p(l,r){a&&a.p&&(!e||r&512)&&fe(a,t,l,l[9],e?ce(t,l[9],r,null):ue(l[9]),null)},i(l){e||(p(a,l),e=!0)},o(l){b(a,l),e=!1},d(l){a&&a.d(l)}}}function be(i){let e,t=i[18]+"",a,l,r;return{c(){e=E("option"),a=z(t),this.h()},l(n){e=P(n,"OPTION",{});var s=N(e);a=F(s,t),s.forEach(h),this.h()},h(){e.__value=l=i[17],W(e,e.__value),e.selected=r=i[17]===i[0]?!0:void 0},m(n,s){v(n,e,s),T(e,a)},p(n,s){s&2&&t!==(t=n[18]+"")&&de(a,t),s&2&&l!==(l=n[17])&&(e.__value=l,W(e,e.__value)),s&3&&r!==(r=n[17]===n[0]?!0:void 0)&&(e.selected=r)},d(n){n&&h(e)}}}function Re(i){let e,t,a,l,r=i[2]&&he(i),n=_e(i[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=be(ge(i,n,o));let f=null;n.length||(f=pe(i));let _=[i[4],{class:i[3]}],c={};for(let o=0;o<_.length;o+=1)c=K(c,_[o]);return{c(){e=E("select"),r&&r.c(),t=B();for(let o=0;o<s.length;o+=1)s[o].c();f&&f.c(),this.h()},l(o){e=P(o,"SELECT",{class:!0});var u=N(e);r&&r.l(u),t=B();for(let d=0;d<s.length;d+=1)s[d].l(u);f&&f.l(u),u.forEach(h),this.h()},h(){Z(e,c),i[0]===void 0&&Ee(()=>i[14].call(e))},m(o,u){v(o,e,u),r&&r.m(e,null),T(e,t);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(e,null);f&&f.m(e,null),"value"in c&&(c.multiple?me:X)(e,c.value),e.autofocus&&e.focus(),X(e,i[0],!0),a||(l=[H(e,"change",i[14]),H(e,"change",i[11]),H(e,"contextmenu",i[12]),H(e,"input",i[13])],a=!0)},p(o,[u]){if(o[2]?r?r.p(o,u):(r=he(o),r.c(),r.m(e,t)):r&&(r.d(1),r=null),u&515){n=_e(o[1]);let d;for(d=0;d<n.length;d+=1){const g=ge(o,n,d);s[d]?s[d].p(g,u):(s[d]=be(g),s[d].c(),s[d].m(e,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=n.length,!n.length&&f?f.p(o,u):n.length?f&&($(),b(f,1,1,()=>{f=null}),G()):(f=pe(o),f.c(),p(f,1),f.m(e,null))}Z(e,c=Se(_,[u&16&&o[4],{class:o[3]}])),u&24&&"value"in c&&(c.multiple?me:X)(e,c.value),u&3&&X(e,o[0])},i:U,o:U,d(o){o&&h(e),r&&r.d(),Pe(s,o),f&&f.d(),a=!1,Ne(l)}}}const He="block w-full";function Ue(i,e,t){const a=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let l=Q(e,a),{$$slots:r={},$$scope:n}=e,{items:s=[]}=e,{value:f=void 0}=e,{placeholder:_="Choose option ..."}=e,{underline:c=!1}=e,{size:o="md"}=e,{defaultClass:u="text-gray-900 disabled:text-gray-400 bg-gray-50 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:disabled:text-gray-500 dark:focus:ring-primary-500 dark:focus:border-primary-500"}=e,{underlineClass:d="text-gray-500 disabled:text-gray-400 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:disabled:text-gray-500 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const g={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let L;function le(m){re.call(this,i,m)}function ae(m){re.call(this,i,m)}function se(m){re.call(this,i,m)}function k(){f=Te(this),t(0,f),t(1,s)}return i.$$set=m=>{t(16,e=K(K({},e),Y(m))),t(4,l=Q(e,a)),"items"in m&&t(1,s=m.items),"value"in m&&t(0,f=m.value),"placeholder"in m&&t(2,_=m.placeholder),"underline"in m&&t(5,c=m.underline),"size"in m&&t(6,o=m.size),"defaultClass"in m&&t(7,u=m.defaultClass),"underlineClass"in m&&t(8,d=m.underlineClass),"$$scope"in m&&t(9,n=m.$$scope)},i.$$.update=()=>{t(3,L=we(He,c?d:u,g[o],c&&"!px-0",e.class))},e=Y(e),[f,s,_,L,l,c,o,u,d,n,r,le,ae,se,k]}class We extends ee{constructor(e){super(),te(this,e,Ue,Re,x,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}function ke(i){let e,t,a,l,r,n,s,f,_;a=new ie({props:{color:"green",$$slots:{default:[$e]},$$scope:{ctx:i}}}),a.$on("click",i[9]),r=new ie({props:{class:"ml-3",color:"blue",$$slots:{default:[Ge]},$$scope:{ctx:i}}}),r.$on("click",i[6]),s=new ie({props:{class:"ml-3",color:"alternative",$$slots:{default:[Xe]},$$scope:{ctx:i}}});let c=i[5]&&ve(i);return{c(){e=E("div"),t=E("div"),C(a.$$.fragment),l=q(),C(r.$$.fragment),n=q(),C(s.$$.fragment),f=q(),c&&c.c(),this.h()},l(o){e=P(o,"DIV",{class:!0});var u=N(e);t=P(u,"DIV",{class:!0});var d=N(t);O(a.$$.fragment,d),l=D(d),O(r.$$.fragment,d),n=D(d),O(s.$$.fragment,d),d.forEach(h),f=D(u),c&&c.l(u),u.forEach(h),this.h()},h(){V(t,"class","flex flex-row h-8"),V(e,"class","flex flex-col m-4")},m(o,u){v(o,e,u),T(e,t),S(a,t,null),T(t,l),S(r,t,null),T(t,n),S(s,t,null),T(e,f),c&&c.m(e,null),_=!0},p(o,u){const d={};u&65537&&(d.$$scope={dirty:u,ctx:o}),a.$set(d);const g={};u&65536&&(g.$$scope={dirty:u,ctx:o}),r.$set(g);const L={};u&65536&&(L.$$scope={dirty:u,ctx:o}),s.$set(L),o[5]?c?(c.p(o,u),u&32&&p(c,1)):(c=ve(o),c.c(),p(c,1),c.m(e,null)):c&&($(),b(c,1,1,()=>{c=null}),G())},i(o){_||(p(a.$$.fragment,o),p(r.$$.fragment,o),p(s.$$.fragment,o),p(c),_=!0)},o(o){b(a.$$.fragment,o),b(r.$$.fragment,o),b(s.$$.fragment,o),b(c),_=!1},d(o){o&&h(e),w(a),w(r),w(s),c&&c.d()}}}function $e(i){let e,t,a=i[0].substr(0,i[0].length-1)+"",l,r;return e=new qe({props:{class:"m-2"}}),{c(){C(e.$$.fragment),t=z(`
				save `),l=z(a)},l(n){O(e.$$.fragment,n),t=F(n,`
				save `),l=F(n,a)},m(n,s){S(e,n,s),v(n,t,s),v(n,l,s),r=!0},p(n,s){(!r||s&1)&&a!==(a=n[0].substr(0,n[0].length-1)+"")&&de(l,a)},i(n){r||(p(e.$$.fragment,n),r=!0)},o(n){b(e.$$.fragment,n),r=!1},d(n){n&&(h(t),h(l)),w(e,n)}}}function Ge(i){let e,t,a;return e=new De({props:{class:"m-2"}}),{c(){C(e.$$.fragment),t=z(`
				format and validate JSON`)},l(l){O(e.$$.fragment,l),t=F(l,`
				format and validate JSON`)},m(l,r){S(e,l,r),v(l,t,r),a=!0},p:U,i(l){a||(p(e.$$.fragment,l),a=!0)},o(l){b(e.$$.fragment,l),a=!1},d(l){l&&h(t),w(e,l)}}}function Xe(i){let e,t,a,l,r;return a=new ze({props:{class:"m-2"}}),{c(){e=E("a"),t=E("div"),C(a.$$.fragment),l=z(`
						Open Admin API Docs`),this.h()},l(n){e=P(n,"A",{href:!0});var s=N(e);t=P(s,"DIV",{class:!0});var f=N(t);O(a.$$.fragment,f),l=F(f,`
						Open Admin API Docs`),f.forEach(h),s.forEach(h),this.h()},h(){V(t,"class","flex flex-row items-center"),V(e,"href","https://docs.konghq.com/gateway/3.7.x/admin-api/")},m(n,s){v(n,e,s),T(e,t),S(a,t,null),T(t,l),r=!0},p:U,i(n){r||(p(a.$$.fragment,n),r=!0)},o(n){b(a.$$.fragment,n),r=!1},d(n){n&&h(e),w(a)}}}function ve(i){let e,t,a;return t=new Me({props:{$$slots:{default:[Qe]},$$scope:{ctx:i}}}),{c(){e=E("div"),C(t.$$.fragment),this.h()},l(l){e=P(l,"DIV",{class:!0});var r=N(e);O(t.$$.fragment,r),r.forEach(h),this.h()},h(){V(e,"class","my-2")},m(l,r){v(l,e,r),S(t,e,null),a=!0},p(l,r){const n={};r&65584&&(n.$$scope={dirty:r,ctx:l}),t.$set(n)},i(l){a||(p(t.$$.fragment,l),a=!0)},o(l){b(t.$$.fragment,l),a=!1},d(l){l&&h(e),w(t)}}}function Qe(i){let e,t,a,l;function r(s){i[10](s)}let n={class:"mt-2",items:i[5]};return i[4]!==void 0&&(n.value=i[4]),t=new We({props:n}),Ce.push(()=>Le(t,"value",r)),t.$on("change",i[8]),{c(){e=z(`Select a plugin to load schema
					`),C(t.$$.fragment)},l(s){e=F(s,`Select a plugin to load schema
					`),O(t.$$.fragment,s)},m(s,f){v(s,e,f),S(t,s,f),l=!0},p(s,f){const _={};f&32&&(_.items=s[5]),!a&&f&16&&(a=!0,_.value=s[4],Ie(()=>a=!1)),t.$set(_)},i(s){l||(p(t.$$.fragment,s),l=!0)},o(s){b(t.$$.fragment,s),l=!1},d(s){s&&h(e),w(t,s)}}}function ye(i){let e,t="Configuration parameters:",a,l,r;return l=new Oe({props:{data:i[3],expandLevel:0,allowCopy:!1,allowKeyCopy:!0}}),{c(){e=E("h2"),e.textContent=t,a=q(),C(l.$$.fragment),this.h()},l(n){e=P(n,"H2",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1be10yr"&&(e.textContent=t),a=D(n),O(l.$$.fragment,n),this.h()},h(){V(e,"class","m-4")},m(n,s){v(n,e,s),v(n,a,s),S(l,n,s),r=!0},p(n,s){const f={};s&8&&(f.data=n[3]),l.$set(f)},i(n){r||(p(l.$$.fragment,n),r=!0)},o(n){b(l.$$.fragment,n),r=!1},d(n){n&&(h(e),h(a)),w(l,n)}}}function Ye(i){let e,t,a,l,r,n,s,f,_,c=i[0]&&ke(i);l=new Oe({props:{data:i[2],expandLevel:0,allowCopy:!1,allowKeyCopy:!0}});let o=i[3]&&ye(i);return{c(){c&&c.c(),e=q(),t=E("textarea"),a=q(),C(l.$$.fragment),r=q(),o&&o.c(),n=B(),this.h()},l(u){c&&c.l(u),e=D(u),t=P(u,"TEXTAREA",{class:!0}),N(t).forEach(h),a=D(u),O(l.$$.fragment,u),r=D(u),o&&o.l(u),n=B(),this.h()},h(){V(t,"class","dark:bg-slate-900 w-full min-h-[30vh]")},m(u,d){c&&c.m(u,d),v(u,e,d),v(u,t,d),W(t,i[1]),v(u,a,d),S(l,u,d),v(u,r,d),o&&o.m(u,d),v(u,n,d),s=!0,f||(_=H(t,"input",i[11]),f=!0)},p(u,[d]){u[0]?c?(c.p(u,d),d&1&&p(c,1)):(c=ke(u),c.c(),p(c,1),c.m(e.parentNode,e)):c&&($(),b(c,1,1,()=>{c=null}),G()),d&2&&W(t,u[1]);const g={};d&4&&(g.data=u[2]),l.$set(g),u[3]?o?(o.p(u,d),d&8&&p(o,1)):(o=ye(u),o.c(),p(o,1),o.m(n.parentNode,n)):o&&($(),b(o,1,1,()=>{o=null}),G())},i(u){s||(p(c),p(l.$$.fragment,u),p(o),s=!0)},o(u){b(c),b(l.$$.fragment,u),b(o),s=!1},d(u){u&&(h(e),h(t),h(a),h(r),h(n)),c&&c.d(u),w(l,u),o&&o.d(u),f=!1,_()}}}function Ze(i,e,t){let a,l="",r={},n,s,f,_,c;function o(k,m){r[k]=m,u()}function u(){t(1,l=JSON.stringify(r,void 0,2))}Ae(async()=>{let k=new URLSearchParams(window.location.search),m=k.get("apiPostPath"),A=k.get("type");if(A&&t(0,a=A),m&&(n=atob(m)),a=="plugins"){const I=await(await M()).getInfo();I.ok&&I.data&&t(5,c=Object.entries(I.data.plugins.available_on_server).sort((y,J)=>J[1].priority-y[1].priority).map(y=>({name:`${y[0]} - ${y[1].priority}`,value:y[0]})))}const j=await(await M()).schema(a);if(j.ok&&j.data){t(2,s={});for(const I of j.data.fields){const y=Object.entries(I)[0],J=y[0],ne=y[1];t(2,s[J]=ne,s),ne.required&&(r[J]=ne.default??null)}u()}});function d(){let k;try{k=JSON.parse(l)}catch(m){R({message:`Failed to parse JSON. ${m.message}`});return}t(1,l=JSON.stringify(k,void 0,2)),R({message:"ok",type:"info"})}async function g(){var k;try{let m;if(n?m=await(await M()).request(n,"POST",JSON.parse(l)):m=await(await M()).createRecord(a,JSON.parse(l)),!m.ok||!m.data){R({message:((k=m.errTyped)==null?void 0:k.message)??m.err??"Error occured"});return}m.data.id&&je(`/${a}/${m.data.id}`)}catch(m){const A=m.response.data;R({message:A.message})}}async function L(){o("name",_);const k=await(await M()).pluginConfig(_);if(k.ok&&k.data){const m={};let A=k.data.fields.find(j=>Object.entries(j)[0][0]=="config");if(!A){R({message:`failed to load config for ${_}`});return}console.log(A),t(3,f={});for(const j of A.config.fields){const I=Object.entries(j)[0],y=I[0],J=I[1];t(3,f[y]=J,f),J.required&&(m[y]=J.default??null)}o("config",m),console.log(k.data)}}const le=async()=>await g();function ae(k){_=k,t(4,_)}function se(){l=this.value,t(1,l)}return[a,l,s,f,_,c,d,g,L,le,ae,se]}class xe extends ee{constructor(e){super(),te(this,e,Ze,Ye,x,{})}}function et(i){let e,t;return e=new xe({}),{c(){C(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,l){S(e,a,l),t=!0},p:U,i(a){t||(p(e.$$.fragment,a),t=!0)},o(a){b(e.$$.fragment,a),t=!1},d(a){w(e,a)}}}class mt extends ee{constructor(e){super(),te(this,e,null,et,x,{})}}export{mt as component};
