import{s as de,n as q,d as m,i as p,v as C,w as Z,x as pe,y as J,z as $,F as L,r as we,l as b,J as K,b as w,q as z,K as P,e as y,L as A,a as O,f as D,t as W,M as Ee,g as H,c as T,j as Q,h as F,o as ye}from"../chunks/scheduler.O70vblwn.js";import{S as ce,i as he,d as I,t as R,a as j,e as Me,m as U,c as V,b as N,g as Le}from"../chunks/index.CxlHvX_L.js";import{s as x,k as ze,p as ee}from"../chunks/config.B2KbV0fc.js";import{C as Be,A as Ce}from"../chunks/ArrayWrap.DKmg2eOE.js";import{g as _e,b as te,i as le,d as ie,a as Pe}from"../chunks/util.PhYJd6D_.js";import{t as G}from"../chunks/bundle-mjs.D696Ktp4.js";import{b as Y,g as Ae}from"../chunks/entry.DPp5jgJk.js";import{D as X,t as se}from"../chunks/stores.DhXFRU3T.js";import{a as ae}from"../chunks/requests.CuCNY5B3.js";import{p as De}from"../chunks/stores.CAY-jcFE.js";import{B as re}from"../chunks/Button.Bvtc6_gv.js";function We(i){let e,a,l,s,t,r=i[4].id&&i[4].title&&oe(i),n=i[6].id&&i[6].desc&&ne(i),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=G("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let o=0;o<u.length;o+=1)f=J(f,u[o]);return{c(){e=A("svg"),r&&r.c(),a=C(),n&&n.c(),l=A("path"),this.h()},l(o){e=P(o,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=y(e);r&&r.l(_),a=C(),n&&n.l(_),l=P(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),_.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",i[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),K(e,f)},m(o,_){p(o,e,_),r&&r.m(e,null),w(e,a),n&&n.m(e,null),w(e,l)},p(o,_){o[4].id&&o[4].title?r?r.p(o,_):(r=oe(o),r.c(),r.m(e,a)):r&&(r.d(1),r=null),o[6].id&&o[6].desc?n?n.p(o,_):(n=ne(o),n.c(),n.m(e,l)):n&&(n.d(1),n=null),_&32&&b(l,"stroke-width",o[5]),K(e,f=_e(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:o[2]},_&2048&&o[11],_&4097&&s!==(s=G("shrink-0",o[9][o[0]??"md"],o[12].class))&&{class:s},_&2&&{role:o[1]},_&128&&{"aria-label":o[7]},_&256&&t!==(t=o[8]?o[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(o){o&&m(e),r&&r.d(),n&&n.d()}}}function Re(i){let e,a,l,s,t,r,n,u=i[4].id&&i[4].title&&fe(i),f=i[6].id&&i[6].desc&&ue(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=G("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let d=0;d<o.length;d+=1)_=J(_,o[d]);return{c(){e=A("svg"),u&&u.c(),a=C(),f&&f.c(),l=A("path"),this.h()},l(d){e=P(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var g=y(e);u&&u.l(g),a=C(),f&&f.l(g),l=P(g,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),g.forEach(m),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",i[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),K(e,_)},m(d,g){p(d,e,g),u&&u.m(e,null),w(e,a),f&&f.m(e,null),w(e,l),r||(n=[z(e,"click",i[13]),z(e,"keydown",i[14]),z(e,"keyup",i[15]),z(e,"focus",i[16]),z(e,"blur",i[17]),z(e,"mouseenter",i[18]),z(e,"mouseleave",i[19]),z(e,"mouseover",i[20]),z(e,"mouseout",i[21])],r=!0)},p(d,g){d[4].id&&d[4].title?u?u.p(d,g):(u=fe(d),u.c(),u.m(e,a)):u&&(u.d(1),u=null),d[6].id&&d[6].desc?f?f.p(d,g):(f=ue(d),f.c(),f.m(e,l)):f&&(f.d(1),f=null),g&32&&b(l,"stroke-width",d[5]),K(e,_=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},g&4&&{color:d[2]},g&2048&&d[11],g&4097&&s!==(s=G("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:s},g&2&&{role:d[1]},g&128&&{"aria-label":d[7]},g&256&&t!==(t=d[8]?d[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(d){d&&m(e),u&&u.d(),f&&f.d(),r=!1,we(n)}}}function oe(i){let e,a=i[4].title+"",l,s;return{c(){e=A("title"),l=W(a),this.h()},l(t){e=P(t,"title",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[4].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&O(l,a),r&16&&s!==(s=t[4].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function ne(i){let e,a=i[6].desc+"",l,s;return{c(){e=A("desc"),l=W(a),this.h()},l(t){e=P(t,"desc",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[6].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&O(l,a),r&64&&s!==(s=t[6].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function fe(i){let e,a=i[4].title+"",l,s;return{c(){e=A("title"),l=W(a),this.h()},l(t){e=P(t,"title",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[4].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&O(l,a),r&16&&s!==(s=t[4].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function ue(i){let e,a=i[6].desc+"",l,s;return{c(){e=A("desc"),l=W(a),this.h()},l(t){e=P(t,"desc",{id:!0});var r=y(e);l=D(r,a),r.forEach(m),this.h()},h(){b(e,"id",s=i[6].id)},m(t,r){p(t,e,r),w(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&O(l,a),r&64&&s!==(s=t[6].id)&&b(e,"id",s)},d(t){t&&m(e)}}}function je(i){let e;function a(t,r){return t[3]?Re:We}let l=a(i),s=l(i);return{c(){s.c(),e=C()},l(t){s.l(t),e=C()},m(t,r){s.m(t,r),p(t,e,r)},p(t,[r]){l===(l=a(t))&&s?s.p(t,r):(s.d(1),s=l(t),s&&(s.c(),s.m(e.parentNode,e)))},i:q,o:q,d(t){t&&m(e),s.d(t)}}}function Se(i,e,a){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let s=Z(e,l);const t=pe("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:n=t.size||"md"}=e,{role:u=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:o=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:d=t.strokeWidth||"2"}=e,{desc:g={}}=e,E=`${_.id||""} ${g.id||""}`,B=!1,{ariaLabel:c="refresh outline"}=e;function v(h){L.call(this,i,h)}function k(h){L.call(this,i,h)}function M(h){L.call(this,i,h)}function S(h){L.call(this,i,h)}function me(h){L.call(this,i,h)}function ge(h){L.call(this,i,h)}function be(h){L.call(this,i,h)}function ve(h){L.call(this,i,h)}function ke(h){L.call(this,i,h)}return i.$$set=h=>{a(12,e=J(J({},e),$(h))),a(11,s=Z(e,l)),"size"in h&&a(0,n=h.size),"role"in h&&a(1,u=h.role),"color"in h&&a(2,f=h.color),"withEvents"in h&&a(3,o=h.withEvents),"title"in h&&a(4,_=h.title),"strokeWidth"in h&&a(5,d=h.strokeWidth),"desc"in h&&a(6,g=h.desc),"ariaLabel"in h&&a(7,c=h.ariaLabel)},i.$$.update=()=>{i.$$.dirty&80&&(_.id||g.id?a(8,B=!0):a(8,B=!1))},e=$(e),[n,u,f,o,_,d,g,c,B,r,E,s,e,v,k,M,S,me,ge,be,ve,ke]}class qe extends ce{constructor(e){super(),he(this,e,Se,je,de,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Te(i){let e,a,l;return e=new qe({props:{class:"mr-2"}}),{c(){N(e.$$.fragment),a=W(`
			Refresh`)},l(s){V(e.$$.fragment,s),a=D(s,`
			Refresh`)},m(s,t){U(e,s,t),p(s,a,t),l=!0},p:q,i(s){l||(j(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){s&&m(a),I(e,s)}}}function Fe(i){let e,a,l,s,t,r;return l=new Be({props:{class:"mr-2"}}),{c(){e=F("a"),a=F("div"),N(l.$$.fragment),s=W(`
					Add`),this.h()},l(n){e=T(n,"A",{href:!0});var u=y(e);a=T(u,"DIV",{class:!0});var f=y(a);V(l.$$.fragment,f),s=D(f,`
					Add`),f.forEach(m),u.forEach(m),this.h()},h(){b(a,"class","flex flex-row items-center space-x-1"),b(e,"href",t=Y+"/add?type="+i[1])},m(n,u){p(n,e,u),w(e,a),U(l,a,null),w(a,s),r=!0},p(n,u){(!r||u&2&&t!==(t=Y+"/add?type="+n[1]))&&b(e,"href",t)},i(n){r||(j(l.$$.fragment,n),r=!0)},o(n){R(l.$$.fragment,n),r=!1},d(n){n&&m(e),I(l)}}}function Ie(i){let e,a,l=(i[1]??"")+"",s;return{c(){e=F("p"),a=W("Loading "),s=W(l),this.h()},l(t){e=T(t,"P",{class:!0});var r=y(e);a=D(r,"Loading "),s=D(r,l),r.forEach(m),this.h()},h(){b(e,"class","pl-5 pb-4 text-xl font-light")},m(t,r){p(t,e,r),w(e,a),w(e,s)},p(t,r){r&2&&l!==(l=(t[1]??"")+"")&&O(s,l)},i:q,o:q,d(t){t&&m(e)}}}function Ue(i){let e,a;return e=new Ce({props:{dataRaw:i[0],type:i[1],entity:i[2]}}),e.$on("refresh",i[6]),{c(){N(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){U(e,l,s),a=!0},p(l,s){const t={};s&1&&(t.dataRaw=l[0]),s&2&&(t.type=l[1]),s&4&&(t.entity=l[2]),e.$set(t)},i(l){a||(j(e.$$.fragment,l),a=!0)},o(l){R(e.$$.fragment,l),a=!1},d(l){I(e,l)}}}function Ve(i){let e,a,l,s,t,r,n,u,f,o,_,d;document.title=e=te(i[1])+" | "+x.name,t=new re({props:{color:"green",class:" flex flex-row mr-2  items-center",$$slots:{default:[Te]},$$scope:{ctx:i}}}),t.$on("click",i[4]),n=new re({props:{class:"flex flex-row mr-2 ",color:"blue",$$slots:{default:[Fe]},$$scope:{ctx:i}}}),n.$on("click",i[5]);const g=[Ue,Ie],E=[];function B(c,v){return c[0]?0:1}return f=B(i),o=E[f]=g[f](i),{c(){a=Q(),l=F("div"),s=F("div"),N(t.$$.fragment),r=Q(),N(n.$$.fragment),u=Q(),o.c(),_=C(),this.h()},l(c){Ee("svelte-evaqx7",document.head).forEach(m),a=H(c),l=T(c,"DIV",{class:!0});var k=y(l);s=T(k,"DIV",{class:!0});var M=y(s);V(t.$$.fragment,M),r=H(M),V(n.$$.fragment,M),M.forEach(m),k.forEach(m),u=H(c),o.l(c),_=C(),this.h()},h(){b(s,"class","flex flex-row mb-2 h-10"),b(l,"class","flex flex-col m-4 mb-3 font-light text-2xl")},m(c,v){p(c,a,v),p(c,l,v),w(l,s),U(t,s,null),w(s,r),U(n,s,null),p(c,u,v),E[f].m(c,v),p(c,_,v),d=!0},p(c,[v]){(!d||v&2)&&e!==(e=te(c[1])+" | "+x.name)&&(document.title=e);const k={};v&1024&&(k.$$scope={dirty:v,ctx:c}),t.$set(k);const M={};v&1026&&(M.$$scope={dirty:v,ctx:c}),n.$set(M);let S=f;f=B(c),f===S?E[f].p(c,v):(Le(),R(E[S],1,1,()=>{E[S]=null}),Me(),o=E[f],o?o.p(c,v):(o=E[f]=g[f](c),o.c()),j(o,1),o.m(_.parentNode,_))},i(c){d||(j(t.$$.fragment,c),j(n.$$.fragment,c),j(o),d=!0)},o(c){R(t.$$.fragment,c),R(n.$$.fragment,c),R(o),d=!1},d(c){c&&(m(a),m(l),m(u),m(_)),I(t),I(n),E[f].d(c)}}}function Ne(i,e,a){let l,s,t,r=!1,n="";De.subscribe(g=>{f()}),ye(()=>{r=!0,f()});let u;async function f(g=!1){if(!r)return;const E=new URLSearchParams(window.location.search);u=X.now();const B=s;a(1,s=E.get("type")??"none"),n=E.get("prefix")??"";let c=!1;B!=s&&(a(0,l=void 0),c=!0);try{if(a(2,t=ze.find(M=>M.name==s)),!t)return;let k=await(await ae()).findAll(t.apiPath,{},n);a(0,l=k.data.data);var v=u;for(await ie(ee);k.data.next&&(k=await(await ae()).request(k.data.next??"",void 0,void 0),v==u);)k.ok&&(a(0,l=l.concat(k.data.data)),c&&se.set(s+X.now().toMillis())),await ie(ee);se.set(s+X.now().toMillis()),g&&le("refresh finished!")}catch(k){console.log(k),Pe({message:`Failed fetching the ${s}. ${k.message?k.message:""}`})}}return[l,s,t,f,()=>{f(!0),le("refresh started!")},()=>{Ae(`${Y}/add?type=${s}`)},async()=>await f()]}class et extends ce{constructor(e){super(),he(this,e,Ne,Ve,de,{})}}export{et as component};
