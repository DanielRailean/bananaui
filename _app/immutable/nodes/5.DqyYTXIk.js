import{s as ce,v as B,i as v,n as I,f as m,w as _e,x as je,y as le,z as he,A as V,J as H,K as q,b as y,l as h,L as re,h as P,u as A,r as De,t as W,d as R,j as ie,e as z,a as Z,c as J,g as K,k as Ae,o as Ie,P as pe,p as We,q as ge,S as Re}from"../chunks/scheduler.BSW9XCdM.js";import{S as de,i as me,c as C,a as N,m as D,g as Y,b as k,e as x,t as g,d as T}from"../chunks/index.C72GILm6.js";import{e as be}from"../chunks/each.d6BMAjLi.js";import{T as Ve,F as Fe,C as Me,A as He}from"../chunks/ArrayWrap.CNrmRJoO.js";import{B as ee}from"../chunks/Button.B6aQXq6i.js";import{T as qe}from"../chunks/treeWrapper.DjUqLT60.js";import{a as te}from"../chunks/requests.BHT8YcI-.js";import{g as ke,b as se}from"../chunks/entry.D9hAROwT.js";import{p as Ze}from"../chunks/stores.4QJHJnC2.js";import{g as Te,w as Ke}from"../chunks/util.BSQYK1U1.js";import{a as Q,i as Ue}from"../chunks/stores.CBiANZDg.js";import{t as ae}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as Xe,F as Ge}from"../chunks/PaletteOutline.CxRw6cSS.js";import{a as Qe,k as ve,f as Ye}from"../chunks/config.n4gmJunM.js";function xe(i){let e,a,l,s,t,r=i[4].id&&i[4].title&&we(i),o=i[6].id&&i[6].desc&&$e(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=ae("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let c=0;c<n.length;c+=1)f=le(f,n[c]);return{c(){e=H("svg"),r&&r.c(),a=B(),o&&o.c(),l=H("path"),this.h()},l(c){e=q(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=y(e);r&&r.l(_),a=B(),o&&o.l(_),l=q(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),_.forEach(m),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",i[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),re(e,f)},m(c,_){v(c,e,_),r&&r.m(e,null),P(e,a),o&&o.m(e,null),P(e,l)},p(c,_){c[4].id&&c[4].title?r?r.p(c,_):(r=we(c),r.c(),r.m(e,a)):r&&(r.d(1),r=null),c[6].id&&c[6].desc?o?o.p(c,_):(o=$e(c),o.c(),o.m(e,l)):o&&(o.d(1),o=null),_&32&&h(l,"stroke-width",c[5]),re(e,f=Te(n,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:c[2]},_&2048&&c[11],_&4097&&s!==(s=ae("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:s},_&2&&{role:c[1]},_&128&&{"aria-label":c[7]},_&256&&t!==(t=c[8]?c[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(c){c&&m(e),r&&r.d(),o&&o.d()}}}function et(i){let e,a,l,s,t,r,o,n=i[4].id&&i[4].title&&Ee(i),f=i[6].id&&i[6].desc&&ye(i),c=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:i[2]},i[11],{class:s=ae("shrink-0",i[9][i[0]??"md"],i[12].class)},{role:i[1]},{"aria-label":i[7]},{"aria-describedby":t=i[8]?i[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let u=0;u<c.length;u+=1)_=le(_,c[u]);return{c(){e=H("svg"),n&&n.c(),a=B(),f&&f.c(),l=H("path"),this.h()},l(u){e=q(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var d=y(e);n&&n.l(d),a=B(),f&&f.l(d),l=q(d,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),d.forEach(m),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",i[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),re(e,_)},m(u,d){v(u,e,d),n&&n.m(e,null),P(e,a),f&&f.m(e,null),P(e,l),r||(o=[A(e,"click",i[13]),A(e,"keydown",i[14]),A(e,"keyup",i[15]),A(e,"focus",i[16]),A(e,"blur",i[17]),A(e,"mouseenter",i[18]),A(e,"mouseleave",i[19]),A(e,"mouseover",i[20]),A(e,"mouseout",i[21])],r=!0)},p(u,d){u[4].id&&u[4].title?n?n.p(u,d):(n=Ee(u),n.c(),n.m(e,a)):n&&(n.d(1),n=null),u[6].id&&u[6].desc?f?f.p(u,d):(f=ye(u),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d&32&&h(l,"stroke-width",u[5]),re(e,_=Te(c,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},d&4&&{color:u[2]},d&2048&&u[11],d&4097&&s!==(s=ae("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:s},d&2&&{role:u[1]},d&128&&{"aria-label":u[7]},d&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&m(e),n&&n.d(),f&&f.d(),r=!1,De(o)}}}function we(i){let e,a=i[4].title+"",l,s;return{c(){e=H("title"),l=W(a),this.h()},l(t){e=q(t,"title",{id:!0});var r=y(e);l=R(r,a),r.forEach(m),this.h()},h(){h(e,"id",s=i[4].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&ie(l,a),r&16&&s!==(s=t[4].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function $e(i){let e,a=i[6].desc+"",l,s;return{c(){e=H("desc"),l=W(a),this.h()},l(t){e=q(t,"desc",{id:!0});var r=y(e);l=R(r,a),r.forEach(m),this.h()},h(){h(e,"id",s=i[6].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&ie(l,a),r&64&&s!==(s=t[6].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function Ee(i){let e,a=i[4].title+"",l,s;return{c(){e=H("title"),l=W(a),this.h()},l(t){e=q(t,"title",{id:!0});var r=y(e);l=R(r,a),r.forEach(m),this.h()},h(){h(e,"id",s=i[4].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&16&&a!==(a=t[4].title+"")&&ie(l,a),r&16&&s!==(s=t[4].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function ye(i){let e,a=i[6].desc+"",l,s;return{c(){e=H("desc"),l=W(a),this.h()},l(t){e=q(t,"desc",{id:!0});var r=y(e);l=R(r,a),r.forEach(m),this.h()},h(){h(e,"id",s=i[6].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&64&&a!==(a=t[6].desc+"")&&ie(l,a),r&64&&s!==(s=t[6].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function tt(i){let e;function a(t,r){return t[3]?et:xe}let l=a(i),s=l(i);return{c(){s.c(),e=B()},l(t){s.l(t),e=B()},m(t,r){s.m(t,r),v(t,e,r)},p(t,[r]){l===(l=a(t))&&s?s.p(t,r):(s.d(1),s=l(t),s&&(s.c(),s.m(e.parentNode,e)))},i:I,o:I,d(t){t&&m(e),s.d(t)}}}function lt(i,e,a){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let s=_e(e,l);const t=je("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:n=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:c=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:u=t.strokeWidth||"2"}=e,{desc:d={}}=e,$=`${_.id||""} ${d.id||""}`,O=!1,{ariaLabel:F="edit outline"}=e;function b(p){V.call(this,i,p)}function w(p){V.call(this,i,p)}function S(p){V.call(this,i,p)}function U(p){V.call(this,i,p)}function X(p){V.call(this,i,p)}function ne(p){V.call(this,i,p)}function oe(p){V.call(this,i,p)}function fe(p){V.call(this,i,p)}function ue(p){V.call(this,i,p)}return i.$$set=p=>{a(12,e=le(le({},e),he(p))),a(11,s=_e(e,l)),"size"in p&&a(0,o=p.size),"role"in p&&a(1,n=p.role),"color"in p&&a(2,f=p.color),"withEvents"in p&&a(3,c=p.withEvents),"title"in p&&a(4,_=p.title),"strokeWidth"in p&&a(5,u=p.strokeWidth),"desc"in p&&a(6,d=p.desc),"ariaLabel"in p&&a(7,F=p.ariaLabel)},i.$$.update=()=>{i.$$.dirty&80&&(_.id||d.id?a(8,O=!0):a(8,O=!1))},e=he(e),[o,n,f,c,_,u,d,F,O,r,$,s,e,b,w,S,U,X,ne,oe,fe,ue]}class rt extends de{constructor(e){super(),me(this,e,lt,tt,ce,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Pe(i,e,a){const l=i.slice();return l[28]=e[a],l}function st(i){let e,a,l;return e=new rt({props:{class:"m-2"}}),{c(){C(e.$$.fragment),a=W("edit")},l(s){N(e.$$.fragment,s),a=R(s,"edit")},m(s,t){D(e,s,t),v(s,a,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(a),T(e,s)}}}function at(i){let e,a,l,s;return e=new ee({props:{class:"h-10 m-1",color:"blue",disabled:i[1]==i[2],$$slots:{default:[nt]},$$scope:{ctx:i}}}),e.$on("click",i[11]),l=new ee({props:{class:"h-10 m-1",disabled:i[1]==i[2],color:"green",$$slots:{default:[ot]},$$scope:{ctx:i}}}),l.$on("click",i[18]),{c(){C(e.$$.fragment),a=Z(),C(l.$$.fragment)},l(t){N(e.$$.fragment,t),a=K(t),N(l.$$.fragment,t)},m(t,r){D(e,t,r),v(t,a,r),D(l,t,r),s=!0},p(t,r){const o={};r[0]&6&&(o.disabled=t[1]==t[2]),r[1]&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o);const n={};r[0]&6&&(n.disabled=t[1]==t[2]),r[1]&1&&(n.$$scope={dirty:r,ctx:t}),l.$set(n)},i(t){s||(g(e.$$.fragment,t),g(l.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),s=!1},d(t){t&&m(a),T(e,t),T(l,t)}}}function it(i){let e,a,l,s;return e=new ee({props:{class:"h-10 m-1",title:"delete",color:"alternative",$$slots:{default:[ft]},$$scope:{ctx:i}}}),e.$on("click",i[16]),l=new ee({props:{color:"alternative",class:"h-10 m-1",$$slots:{default:[ut]},$$scope:{ctx:i}}}),l.$on("click",i[17]),{c(){C(e.$$.fragment),a=Z(),C(l.$$.fragment)},l(t){N(e.$$.fragment,t),a=K(t),N(l.$$.fragment,t)},m(t,r){D(e,t,r),v(t,a,r),D(l,t,r),s=!0},p(t,r){const o={};r[1]&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o);const n={};r[1]&1&&(n.$$scope={dirty:r,ctx:t}),l.$set(n)},i(t){s||(g(e.$$.fragment,t),g(l.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),s=!1},d(t){t&&m(a),T(e,t),T(l,t)}}}function nt(i){let e,a,l;return e=new Xe({props:{class:"m-2"}}),{c(){C(e.$$.fragment),a=W(`
				format and validate JSON`)},l(s){N(e.$$.fragment,s),a=R(s,`
				format and validate JSON`)},m(s,t){D(e,s,t),v(s,a,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(a),T(e,s)}}}function ot(i){let e,a,l;return e=new Ge({props:{class:"m-2"}}),{c(){C(e.$$.fragment),a=W(`
				save`)},l(s){N(e.$$.fragment,s),a=R(s,`
				save`)},m(s,t){D(e,s,t),v(s,a,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(a),T(e,s)}}}function ft(i){let e,a,l,s,t;return l=new Ve({props:{class:"m-1"}}),{c(){e=z("div"),a=z("div"),C(l.$$.fragment),s=W(`
						delete`),this.h()},l(r){e=J(r,"DIV",{class:!0});var o=y(e);a=J(o,"DIV",{class:!0});var n=y(a);N(l.$$.fragment,n),s=R(n,`
						delete`),n.forEach(m),o.forEach(m),this.h()},h(){h(a,"class","flex flex-row items-center"),h(e,"class","text-rose-500")},m(r,o){v(r,e,o),P(e,a),D(l,a,null),P(a,s),t=!0},p:I,i(r){t||(g(l.$$.fragment,r),t=!0)},o(r){k(l.$$.fragment,r),t=!1},d(r){r&&m(e),T(l)}}}function ut(i){let e,a,l;return e=new Fe({props:{class:"m-2"}}),{c(){C(e.$$.fragment),a=W(`
				copy`)},l(s){N(e.$$.fragment,s),a=R(s,`
				copy`)},m(s,t){D(e,s,t),v(s,a,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(a),T(e,s)}}}function ct(i){let e,a="Loading ...";return{c(){e=z("h2"),e.textContent=a,this.h()},l(l){e=J(l,"H2",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-wq8tmm"&&(e.textContent=a),this.h()},h(){h(e,"class","text-xl text-center")},m(l,s){v(l,e,s)},p:I,i:I,o:I,d(l){l&&m(e)}}}function dt(i){let e,a,l,s,t,r,o,n,f,c,_,u=!i[3]&&Oe(i);return{c(){e=z("div"),a=z("pre"),l=z("code"),s=Z(),t=z("textarea"),o=Z(),u&&u.c(),n=B(),this.h()},l(d){e=J(d,"DIV",{class:!0});var $=y(e);a=J($,"PRE",{class:!0});var O=y(a);l=J(O,"CODE",{class:!0}),y(l).forEach(m),O.forEach(m),s=K($),t=J($,"TEXTAREA",{spellcheck:!0,wrap:!0,autocorrect:!0,autocapitalize:!0,translate:!0,class:!0}),y(t).forEach(m),$.forEach(m),o=K(d),u&&u.l(d),n=B(),this.h()},h(){h(l,"class","svelte-1c016cv"),h(a,"class","language-json svelte-1c016cv"),h(t,"spellcheck","false"),h(t,"wrap","hard"),h(t,"autocorrect","off"),h(t,"autocapitalize","off"),h(t,"translate","no"),h(t,"class","relative svelte-1c016cv"),h(e,"class",r="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(i[3]?"grid":"hidden")+" svelte-1c016cv")},m(d,$){v(d,e,$),P(e,a),P(a,l),i[19](l),P(e,s),P(e,t),i[20](t),ge(t,i[2]),v(d,o,$),u&&u.m(d,$),v(d,n,$),f=!0,c||(_=[A(t,"input",i[21]),A(t,"input",i[22])],c=!0)},p(d,$){$[0]&4&&ge(t,d[2]),(!f||$[0]&8&&r!==(r="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(d[3]?"grid":"hidden")+" svelte-1c016cv"))&&h(e,"class",r),d[3]?u&&(Y(),k(u,1,1,()=>{u=null}),x()):u?(u.p(d,$),$[0]&8&&g(u,1)):(u=Oe(d),u.c(),g(u,1),u.m(n.parentNode,n))},i(d){f||(g(u),f=!0)},o(d){k(u),f=!1},d(d){d&&(m(e),m(o),m(n)),i[19](null),i[20](null),u&&u.d(d),c=!1,De(_)}}}function Oe(i){let e,a,l,s;e=new qe({props:{data:i[0],rounded:!1,type:i[5]}}),e.$on("refresh",i[23]);let t=i[6]&&Se(i);return{c(){C(e.$$.fragment),a=Z(),t&&t.c(),l=B()},l(r){N(e.$$.fragment,r),a=K(r),t&&t.l(r),l=B()},m(r,o){D(e,r,o),v(r,a,o),t&&t.m(r,o),v(r,l,o),s=!0},p(r,o){const n={};o[0]&1&&(n.data=r[0]),o[0]&32&&(n.type=r[5]),e.$set(n),r[6]?t?(t.p(r,o),o[0]&64&&g(t,1)):(t=Se(r),t.c(),g(t,1),t.m(l.parentNode,l)):t&&(Y(),k(t,1,1,()=>{t=null}),x())},i(r){s||(g(e.$$.fragment,r),g(t),s=!0)},o(r){k(e.$$.fragment,r),k(t),s=!1},d(r){r&&(m(a),m(l)),T(e,r),t&&t.d(r)}}}function Se(i){let e,a,l=be(i[6]),s=[];for(let r=0;r<l.length;r+=1)s[r]=Ne(Pe(i,l,r));const t=r=>k(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=B()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=B()},m(r,o){for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(r,o);v(r,e,o),a=!0},p(r,o){if(o[0]&576){l=be(r[6]);let n;for(n=0;n<l.length;n+=1){const f=Pe(r,l,n);s[n]?(s[n].p(f,o),g(s[n],1)):(s[n]=Ne(f),s[n].c(),g(s[n],1),s[n].m(e.parentNode,e))}for(Y(),n=l.length;n<s.length;n+=1)t(n);x()}},i(r){if(!a){for(let o=0;o<l.length;o+=1)g(s[o]);a=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)k(s[o]);a=!1},d(r){r&&m(e),Re(s,r)}}}function mt(i){let e,a,l,s,t,r;return l=new Me({props:{class:"m-2"}}),{c(){e=z("a"),a=z("div"),C(l.$$.fragment),s=W(`
										add`),this.h()},l(o){e=J(o,"A",{href:!0});var n=y(e);a=J(n,"DIV",{class:!0});var f=y(a);N(l.$$.fragment,f),s=R(f,`
										add`),f.forEach(m),n.forEach(m),this.h()},h(){h(a,"class","flex flex-row items-center"),h(e,"href",t=se+"/add?type="+i[28].name+"&apiPostPath="+btoa(i[28].entitySubPath))},m(o,n){v(o,e,n),P(e,a),D(l,a,null),P(a,s),r=!0},p(o,n){(!r||n[0]&64&&t!==(t=se+"/add?type="+o[28].name+"&apiPostPath="+btoa(o[28].entitySubPath)))&&h(e,"href",t)},i(o){r||(g(l.$$.fragment,o),r=!0)},o(o){k(l.$$.fragment,o),r=!1},d(o){o&&m(e),T(l)}}}function Ce(i){let e,a;return e=new He({props:{dataRaw:i[28].data,type:i[28].name,entity:i[28]}}),e.$on("refresh",i[25]),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,s){D(e,l,s),a=!0},p(l,s){const t={};s[0]&64&&(t.dataRaw=l[28].data),s[0]&64&&(t.type=l[28].name),s[0]&64&&(t.entity=l[28]),e.$set(t)},i(l){a||(g(e.$$.fragment,l),a=!0)},o(l){k(e.$$.fragment,l),a=!1},d(l){T(e,l)}}}function Ne(i){let e,a,l,s,t,r;function o(){return i[24](i[28])}l=new ee({props:{color:"alternative",$$slots:{default:[mt]},$$scope:{ctx:i}}}),l.$on("click",o);let n=i[28].data&&i[28].data.length>0&&Ce(i);return{c(){e=z("div"),a=z("div"),C(l.$$.fragment),s=Z(),n&&n.c(),t=B(),this.h()},l(f){e=J(f,"DIV",{class:!0});var c=y(e);a=J(c,"DIV",{class:!0});var _=y(a);N(l.$$.fragment,_),_.forEach(m),c.forEach(m),s=K(f),n&&n.l(f),t=B(),this.h()},h(){h(a,"class","flex flex-row h-8"),h(e,"class","flex flex-row m-4 h-8 items-center")},m(f,c){v(f,e,c),P(e,a),D(l,a,null),v(f,s,c),n&&n.m(f,c),v(f,t,c),r=!0},p(f,c){i=f;const _={};c[0]&64|c[1]&1&&(_.$$scope={dirty:c,ctx:i}),l.$set(_),i[28].data&&i[28].data.length>0?n?(n.p(i,c),c[0]&64&&g(n,1)):(n=Ce(i),n.c(),g(n,1),n.m(t.parentNode,t)):n&&(Y(),k(n,1,1,()=>{n=null}),x())},i(f){r||(g(l.$$.fragment,f),g(n),r=!0)},o(f){k(l.$$.fragment,f),k(n),r=!1},d(f){f&&(m(e),m(s),m(t)),T(l),n&&n.d(f)}}}function _t(i){let e,a,l,s,t,r,o,n,f,c;l=new ee({props:{class:"h-10 m-1 focus:shadow-none",$$slots:{default:[st]},$$scope:{ctx:i}}}),l.$on("click",i[15]);const _=[it,at],u=[];function d(b,w){return b[3]?1:0}t=d(i),r=u[t]=_[t](i);const $=[dt,ct],O=[];function F(b,w){return b[0]?0:1}return n=F(i),f=O[n]=$[n](i),{c(){e=z("div"),a=z("div"),C(l.$$.fragment),s=Z(),r.c(),o=Z(),f.c(),this.h()},l(b){e=J(b,"DIV",{class:!0});var w=y(e);a=J(w,"DIV",{class:!0});var S=y(a);N(l.$$.fragment,S),s=K(S),r.l(S),S.forEach(m),o=K(w),f.l(w),w.forEach(m),this.h()},h(){h(a,"class","flex flex-row flex-wrap m-2"),h(e,"class","mb-2")},m(b,w){v(b,e,w),P(e,a),D(l,a,null),P(a,s),u[t].m(a,null),P(e,o),O[n].m(e,null),c=!0},p(b,w){const S={};w[1]&1&&(S.$$scope={dirty:w,ctx:b}),l.$set(S);let U=t;t=d(b),t===U?u[t].p(b,w):(Y(),k(u[U],1,1,()=>{u[U]=null}),x(),r=u[t],r?r.p(b,w):(r=u[t]=_[t](b),r.c()),g(r,1),r.m(a,null));let X=n;n=F(b),n===X?O[n].p(b,w):(Y(),k(O[X],1,1,()=>{O[X]=null}),x(),f=O[n],f?f.p(b,w):(f=O[n]=$[n](b),f.c()),g(f,1),f.m(e,null))},i(b){c||(g(l.$$.fragment,b),g(r),g(f),c=!0)},o(b){k(l.$$.fragment,b),k(r),k(f),c=!1},d(b){b&&m(e),T(l),u[t].d(),O[n].d()}}}function ht(i,e,a){let l;Ae(i,Ze,E=>a(14,l=E));let{data:s={}}=e,t="",r="",o=!1,n,f,c,_,u=!1;Ie(()=>{u=!0,d()});async function d(){var L;if(!u)return;a(0,s=void 0);const E=new URLSearchParams(window.location.search);a(5,f=E.get("type")??"none"),a(4,n=E.get("id")??"none");{a(0,s=void 0);const G=await(await te()).findRecord(f,n);a(0,s=G.data),a(0,s=Qe(s,Ye)),a(2,r=JSON.stringify(s,void 0,2)),a(1,t=r),c=ve.find(j=>j.name==f),a(6,_=ve.filter(j=>{var M;return(M=c==null?void 0:c.subEntities)==null?void 0:M.includes(j.name)}).map(j=>({...j,entitySubPath:`${f}/${n}/${j.name}`})));for(const j of _){const M=await(await te()).findAll(j.name,{},`/${f}/${n}`);if(!M.ok){Q({message:`failed to load ${j.name}`});continue}j.data=(L=M.data)==null?void 0:L.data,a(6,_)}}S()}async function $(E,L,G){if(!confirm(`Please confirm deletion of '${G}'`))return;const M=await(await te()).deleteRecord(E,L);M.ok?(Q({message:"ok",type:"info"}),ke(`${se}/entities?type=${f}`)):Q({message:`failed to delete. ${M.err}`})}function O(){let E;try{E=JSON.parse(r)}catch(L){Q({message:`Failed to parse JSON. ${L.message}`});return}a(2,r=JSON.stringify(E,void 0,2)),S(),Q({message:"json is valid",type:"info"})}async function F(){var G;if(!confirm("confirm save?"))return;O();const L=await(await te()).updateRecord(f,n,JSON.parse(r));if(console.log(L),L.ok)Ue("entity successfully updated");else{Q({message:`API error (${L.code}): `+(((G=L.errTyped)==null?void 0:G.message)??L.err),timeout:15e3});return}a(3,o=!o),a(3,o),a(0,s=JSON.parse(r)),a(1,t=r)}let b,w;async function S(){a(2,r=r.replace(/\t/g,"  ")),a(2,r=r.replace(/\s\n$/g,`
 `)),w&&(a(8,w.textContent=r,w),globalThis.Prism.highlightElement(w))}const U=()=>{a(3,o=!o),S()},X=async()=>await $(f,n,s.name??s.id),ne=()=>{Ke(t)},oe=async()=>await F();function fe(E){pe[E?"unshift":"push"](()=>{w=E,a(8,w)})}function ue(E){pe[E?"unshift":"push"](()=>{b=E,a(7,b)})}function p(){r=this.value,a(2,r)}const Be=()=>{S()},ze=()=>{d()},Je=E=>{ke(`${se}/add?type=${E.name}&apiPostPath=${btoa(E.entitySubPath)}`)},Le=async()=>await d();return i.$$set=E=>{"data"in E&&a(0,s=E.data)},i.$$.update=()=>{i.$$.dirty[0]&16384&&d()},[s,t,r,o,n,f,_,b,w,d,$,O,F,S,l,U,X,ne,oe,fe,ue,p,Be,ze,Je,Le]}class pt extends de{constructor(e){super(),me(this,e,ht,_t,ce,{data:0},null,[-1,-1])}}function gt(i){let e,a;return e=new pt({}),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,s){D(e,l,s),a=!0},p:I,i(l){a||(g(e.$$.fragment,l),a=!0)},o(l){k(e.$$.fragment,l),a=!1},d(l){T(e,l)}}}class Bt extends de{constructor(e){super(),me(this,e,null,gt,ce,{})}}export{Bt as component};
