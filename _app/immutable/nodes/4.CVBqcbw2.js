import{s as fe,a as j,e as D,t as O,l as ee,m as ue,f as g,g as q,c as C,b as V,d as U,p as y,i as I,h as b,q as te,r as ae,j as se,u as de,k as pe,o as me,v as he,n as G}from"../chunks/scheduler.C9BGEMar.js";import{S as _e,i as ge,c as z,a as J,m as Q,b as M,e as $e,t as N,d as W,g as ve}from"../chunks/index.4Ydc87iW.js";import{s as ne,k as K,p as re}from"../chunks/config.Cku55jh0.js";import{C as we,A as be}from"../chunks/ArrayWrap.DbtonWQS.js";import{b as X,g as ye}from"../chunks/entry.CfJbK9Xn.js";import{B as le}from"../chunks/Button.BgCAgimh.js";import{D as oe,t as ke,a as Se,i as Ee}from"../chunks/stores.D5KkekL9.js";import{a as ie}from"../chunks/requests.CRdRhYqy.js";import{p as Pe}from"../chunks/stores.Dj8by5lQ.js";import{c as H,d as ce}from"../chunks/util.BoWyuGLm.js";function De(r){let e;return{c(){e=O(`Refresh
		`)},l(s){e=U(s,`Refresh
		`)},m(s,n){I(s,e,n)},d(s){s&&g(e)}}}function Ce(r){let e,s,n,t,l,o;return n=new we({props:{class:"m-2"}}),{c(){e=D("a"),s=D("div"),z(n.$$.fragment),t=O(`
					add`),this.h()},l(i){e=C(i,"A",{href:!0});var d=V(e);s=C(d,"DIV",{class:!0});var u=V(s);J(n.$$.fragment,u),t=U(u,`
					add`),u.forEach(g),d.forEach(g),this.h()},h(){y(s,"class","flex flex-row items-center"),y(e,"href",l=X+"/add?type="+r[0])},m(i,d){I(i,e,d),b(e,s),Q(n,s,null),b(s,t),o=!0},p(i,d){(!o||d&1&&l!==(l=X+"/add?type="+i[0]))&&y(e,"href",l)},i(i){o||(N(n.$$.fragment,i),o=!0)},o(i){M(n.$$.fragment,i),o=!1},d(i){i&&g(e),W(n)}}}function Le(r){let e,s='<h2 class="text-xl text-center mb-10">No entries</h2>';return{c(){e=D("div"),e.innerHTML=s,this.h()},l(n){e=C(n,"DIV",{class:!0,"data-svelte-h":!0}),he(e)!=="svelte-1ktrhtt"&&(e.innerHTML=s),this.h()},h(){y(e,"class","flex w-full justify-center items-center")},m(n,t){I(n,e,t)},p:G,i:G,o:G,d(n){n&&g(e)}}}function Te(r){var n;let e,s;return e=new be({props:{displayedFields:(n=K.find(r[12]))==null?void 0:n.displayedFields,data:r[3],type:r[0],entity:r[1]}}),e.$on("refresh",r[13]),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){Q(e,t,l),s=!0},p(t,l){var i;const o={};l&1&&(o.displayedFields=(i=K.find(t[12]))==null?void 0:i.displayedFields),l&8&&(o.data=t[3]),l&1&&(o.type=t[0]),l&2&&(o.entity=t[1]),e.$set(o)},i(t){s||(N(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function Fe(r){let e,s,n,t,l=(r[3]?r[3].length:0)+"",o,i,d=H(r[0])+"",u,L,$,w,p,R,E,v,A,m,h,c,k,_,B;document.title=e=ne.name+" - "+H(r[0]),w=new le({props:{color:"alternative",class:"mr-2",$$slots:{default:[De]},$$scope:{ctx:r}}}),w.$on("click",r[8]),p=new le({props:{class:"border-stone-300 mr-2",color:"alternative",$$slots:{default:[Ce]},$$scope:{ctx:r}}}),p.$on("click",r[9]);const Y=[Te,Le],P=[];function Z(a,f){return a[3]&&a[3].length>0?0:1}return m=Z(r),h=P[m]=Y[m](r),{c(){s=j(),n=D("div"),t=D("h1"),o=O(l),i=j(),u=O(d),L=j(),$=D("div"),z(w.$$.fragment),z(p.$$.fragment),R=j(),E=D("div"),v=D("input"),A=j(),h.c(),c=ee(),this.h()},l(a){ue("svelte-f4u3pm",document.head).forEach(g),s=q(a),n=C(a,"DIV",{class:!0});var S=V(n);t=C(S,"H1",{class:!0});var T=V(t);o=U(T,l),i=q(T),u=U(T,d),T.forEach(g),L=q(S),$=C(S,"DIV",{class:!0});var F=V($);J(w.$$.fragment,F),J(p.$$.fragment,F),F.forEach(g),R=q(S),E=C(S,"DIV",{class:!0});var x=V(E);v=C(x,"INPUT",{class:!0,type:!0,placeholder:!0}),x.forEach(g),S.forEach(g),A=q(a),h.l(a),c=ee(),this.h()},h(){y(t,"class","text-xl mb-3 ml-1 dark:text-zinc-300"),y($,"class","flex flex-row mb-2 h-10"),y(v,"class","bg-transparent rounded-lg dark:border-stone-700 border-stone-300"),y(v,"type","text"),y(v,"placeholder","search any field"),y(E,"class","w-20 mb-2"),y(n,"class","flex flex-col mx-4 mt-4")},m(a,f){I(a,s,f),I(a,n,f),b(n,t),b(t,o),b(t,i),b(t,u),b(n,L),b(n,$),Q(w,$,null),Q(p,$,null),b(n,R),b(n,E),b(E,v),te(v,r[2]),I(a,A,f),P[m].m(a,f),I(a,c,f),k=!0,_||(B=[ae(v,"input",r[10]),ae(v,"input",r[11])],_=!0)},p(a,[f]){(!k||f&1)&&e!==(e=ne.name+" - "+H(a[0]))&&(document.title=e),(!k||f&8)&&l!==(l=(a[3]?a[3].length:0)+"")&&se(o,l),(!k||f&1)&&d!==(d=H(a[0])+"")&&se(u,d);const S={};f&131072&&(S.$$scope={dirty:f,ctx:a}),w.$set(S);const T={};f&131073&&(T.$$scope={dirty:f,ctx:a}),p.$set(T),f&4&&v.value!==a[2]&&te(v,a[2]);let F=m;m=Z(a),m===F?P[m].p(a,f):(ve(),M(P[F],1,1,()=>{P[F]=null}),$e(),h=P[m],h?h.p(a,f):(h=P[m]=Y[m](a),h.c()),N(h,1),h.m(c.parentNode,c))},i(a){k||(N(w.$$.fragment,a),N(p.$$.fragment,a),N(h),k=!0)},o(a){M(w.$$.fragment,a),M(p.$$.fragment,a),M(h),k=!1},d(a){a&&(g(s),g(n),g(A),g(c)),W(w),W(p),P[m].d(a),_=!1,de(B)}}}function Ie(r,e,s){let n;pe(r,Pe,c=>s(7,n=c));let t,l,o,i=!1;me(()=>{i=!0,$()});let d,u="",L;async function $(){if(!i)return;t=void 0;const c=new URLSearchParams(window.location.search);d=oe.now(),s(0,l=c.get("type")??"none"),s(2,u=c.get("search")??"");try{if(s(1,o=K.find(B=>B.name==l)),!o)return;let _=await(await ie()).findAll(o.apiPath,{});t=_.data.data,p();var k=d;for(await ce(re);_.data.next&&(_=await(await ie()).request(_.data.next??"",void 0,void 0),k==d);)_.ok&&(t=t.concat(_.data.data),p(),ke.set(oe.now())),await ce(re)}catch(_){console.log(_),Se({message:`Failed fetching the ${l}. ${_.message?_.message:""}`})}}function w(){const c=new URL(window.location.toString());u.length>0?c.searchParams.set("search",u):c.searchParams.delete("search"),history.pushState(null,"",c)}function p(){u.length==0&&s(3,L=t),s(3,L=t.filter(c=>JSON.stringify(Object.values(c)).toLowerCase().includes(u.toLowerCase())))}const R=()=>{$(),Ee("refreshed!")},E=()=>{ye(`${X}/add?type=${l}`)};function v(){u=this.value,s(2,u)}const A=()=>{w(),p()},m=c=>c.name==l,h=async()=>await $();return r.$$.update=()=>{r.$$.dirty&128&&$()},[l,o,u,L,$,w,p,n,R,E,v,A,m,h]}class Ue extends _e{constructor(e){super(),ge(this,e,Ie,Fe,fe,{})}}export{Ue as component};
