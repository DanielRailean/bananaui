import{s as de,n as Q,d as g,i as w,x as A,y as Y,z as ke,A as N,B as Z,H as B,u as pe,l as b,J as O,b as M,p as L,K as D,e as y,L as j,a as J,f as V,t as U,M as we,g as K,c as q,j as G,h as F,o as Ee}from"../chunks/scheduler.BZuy4PaE.js";import{S as ue,i as ce,d as W,t as C,a as P,c as ye,m as R,b as T,e as I,g as Me}from"../chunks/index.D3mKWTgf.js";import{s as $,k as Be,p as x}from"../chunks/config.DOx3JIpB.js";import{C as Le,A as ze}from"../chunks/ArrayWrap.B7yt1QM0.js";import{g as he,i as ee,e as Ce,a as Pe}from"../chunks/toastStore.Bxy57eWq.js";import{t as H}from"../chunks/bundle-mjs.D696Ktp4.js";import{b as X,g as Ae}from"../chunks/entry.BEtSY_wd.js";import{D as te,t as De}from"../chunks/stores.s1iyYYHd.js";import{c as le,a as ie,d as re,b as je}from"../chunks/util.DdPgSX0c.js";import{p as Se}from"../chunks/stores.CK-rq9ij.js";import{B as ae}from"../chunks/Button.DWlZ-FNh.js";import{S as We}from"../chunks/Spinner.iDecAC9I.js";function Re(r){let e,a,l,i,t,s=r[4].id&&r[4].title&&se(r),o=r[6].id&&r[6].desc&&ne(r),d=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:i=H("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let n=0;n<d.length;n+=1)f=N(f,d[n]);return{c(){e=j("svg"),s&&s.c(),a=A(),o&&o.c(),l=j("path"),this.h()},l(n){e=D(n,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=y(e);s&&s.l(_),a=A(),o&&o.l(_),l=D(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(g),_.forEach(g),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",r[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),O(e,f)},m(n,_){w(n,e,_),s&&s.m(e,null),M(e,a),o&&o.m(e,null),M(e,l)},p(n,_){n[4].id&&n[4].title?s?s.p(n,_):(s=se(n),s.c(),s.m(e,a)):s&&(s.d(1),s=null),n[6].id&&n[6].desc?o?o.p(n,_):(o=ne(n),o.c(),o.m(e,l)):o&&(o.d(1),o=null),_&32&&b(l,"stroke-width",n[5]),O(e,f=he(d,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:n[2]},_&2048&&n[11],_&4097&&i!==(i=H("shrink-0",n[9][n[0]??"md"],n[12].class))&&{class:i},_&2&&{role:n[1]},_&128&&{"aria-label":n[7]},_&256&&t!==(t=n[8]?n[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(n){n&&g(e),s&&s.d(),o&&o.d()}}}function Te(r){let e,a,l,i,t,s,o,d=r[4].id&&r[4].title&&oe(r),f=r[6].id&&r[6].desc&&fe(r),n=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:i=H("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let u=0;u<n.length;u+=1)_=N(_,n[u]);return{c(){e=j("svg"),d&&d.c(),a=A(),f&&f.c(),l=j("path"),this.h()},l(u){e=D(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=y(e);d&&d.l(m),a=A(),f&&f.l(m),l=D(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(g),m.forEach(g),this.h()},h(){b(l,"stroke","currentColor"),b(l,"stroke-linecap","round"),b(l,"stroke-linejoin","round"),b(l,"stroke-width",r[5]),b(l,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),O(e,_)},m(u,m){w(u,e,m),d&&d.m(e,null),M(e,a),f&&f.m(e,null),M(e,l),s||(o=[L(e,"click",r[13]),L(e,"keydown",r[14]),L(e,"keyup",r[15]),L(e,"focus",r[16]),L(e,"blur",r[17]),L(e,"mouseenter",r[18]),L(e,"mouseleave",r[19]),L(e,"mouseover",r[20]),L(e,"mouseout",r[21])],s=!0)},p(u,m){u[4].id&&u[4].title?d?d.p(u,m):(d=oe(u),d.c(),d.m(e,a)):d&&(d.d(1),d=null),u[6].id&&u[6].desc?f?f.p(u,m):(f=fe(u),f.c(),f.m(e,l)):f&&(f.d(1),f=null),m&32&&b(l,"stroke-width",u[5]),O(e,_=he(n,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&i!==(i=H("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:i},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&g(e),d&&d.d(),f&&f.d(),s=!1,pe(o)}}}function se(r){let e,a=r[4].title+"",l,i;return{c(){e=j("title"),l=U(a),this.h()},l(t){e=D(t,"title",{id:!0});var s=y(e);l=V(s,a),s.forEach(g),this.h()},h(){b(e,"id",i=r[4].id)},m(t,s){w(t,e,s),M(e,l)},p(t,s){s&16&&a!==(a=t[4].title+"")&&J(l,a),s&16&&i!==(i=t[4].id)&&b(e,"id",i)},d(t){t&&g(e)}}}function ne(r){let e,a=r[6].desc+"",l,i;return{c(){e=j("desc"),l=U(a),this.h()},l(t){e=D(t,"desc",{id:!0});var s=y(e);l=V(s,a),s.forEach(g),this.h()},h(){b(e,"id",i=r[6].id)},m(t,s){w(t,e,s),M(e,l)},p(t,s){s&64&&a!==(a=t[6].desc+"")&&J(l,a),s&64&&i!==(i=t[6].id)&&b(e,"id",i)},d(t){t&&g(e)}}}function oe(r){let e,a=r[4].title+"",l,i;return{c(){e=j("title"),l=U(a),this.h()},l(t){e=D(t,"title",{id:!0});var s=y(e);l=V(s,a),s.forEach(g),this.h()},h(){b(e,"id",i=r[4].id)},m(t,s){w(t,e,s),M(e,l)},p(t,s){s&16&&a!==(a=t[4].title+"")&&J(l,a),s&16&&i!==(i=t[4].id)&&b(e,"id",i)},d(t){t&&g(e)}}}function fe(r){let e,a=r[6].desc+"",l,i;return{c(){e=j("desc"),l=U(a),this.h()},l(t){e=D(t,"desc",{id:!0});var s=y(e);l=V(s,a),s.forEach(g),this.h()},h(){b(e,"id",i=r[6].id)},m(t,s){w(t,e,s),M(e,l)},p(t,s){s&64&&a!==(a=t[6].desc+"")&&J(l,a),s&64&&i!==(i=t[6].id)&&b(e,"id",i)},d(t){t&&g(e)}}}function Ie(r){let e;function a(t,s){return t[3]?Te:Re}let l=a(r),i=l(r);return{c(){i.c(),e=A()},l(t){i.l(t),e=A()},m(t,s){i.m(t,s),w(t,e,s)},p(t,[s]){l===(l=a(t))&&i?i.p(t,s):(i.d(1),i=l(t),i&&(i.c(),i.m(e.parentNode,e)))},i:Q,o:Q,d(t){t&&g(e),i.d(t)}}}function Ve(r,e,a){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let i=Y(e,l);const t=ke("iconCtx")??{},s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:d=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:n=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:u=t.strokeWidth||"2"}=e,{desc:m={}}=e,E=`${_.id||""} ${m.id||""}`,z=!1,{ariaLabel:c="refresh outline"}=e;function k(h){B.call(this,r,h)}function v(h){B.call(this,r,h)}function p(h){B.call(this,r,h)}function S(h){B.call(this,r,h)}function _e(h){B.call(this,r,h)}function me(h){B.call(this,r,h)}function ge(h){B.call(this,r,h)}function be(h){B.call(this,r,h)}function ve(h){B.call(this,r,h)}return r.$$set=h=>{a(12,e=N(N({},e),Z(h))),a(11,i=Y(e,l)),"size"in h&&a(0,o=h.size),"role"in h&&a(1,d=h.role),"color"in h&&a(2,f=h.color),"withEvents"in h&&a(3,n=h.withEvents),"title"in h&&a(4,_=h.title),"strokeWidth"in h&&a(5,u=h.strokeWidth),"desc"in h&&a(6,m=h.desc),"ariaLabel"in h&&a(7,c=h.ariaLabel)},r.$$.update=()=>{r.$$.dirty&80&&(_.id||m.id?a(8,z=!0):a(8,z=!1))},e=Z(e),[o,d,f,n,_,u,m,c,z,s,E,i,e,k,v,p,S,_e,me,ge,be,ve]}class Ue extends ue{constructor(e){super(),ce(this,e,Ve,Ie,de,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function qe(r){let e,a,l;return e=new Ue({props:{class:"mr-2"}}),{c(){I(e.$$.fragment),a=U(`
			Refresh`)},l(i){T(e.$$.fragment,i),a=V(i,`
			Refresh`)},m(i,t){R(e,i,t),w(i,a,t),l=!0},p:Q,i(i){l||(P(e.$$.fragment,i),l=!0)},o(i){C(e.$$.fragment,i),l=!1},d(i){i&&g(a),W(e,i)}}}function Fe(r){let e,a,l,i,t,s;return l=new Le({props:{class:"mr-2"}}),{c(){e=F("a"),a=F("div"),I(l.$$.fragment),i=U(`
					Add`),this.h()},l(o){e=q(o,"A",{href:!0});var d=y(e);a=q(d,"DIV",{class:!0});var f=y(a);T(l.$$.fragment,f),i=V(f,`
					Add`),f.forEach(g),d.forEach(g),this.h()},h(){b(a,"class","flex flex-row items-center space-x-1"),b(e,"href",t=X+"/add?type="+r[1])},m(o,d){w(o,e,d),M(e,a),R(l,a,null),M(a,i),s=!0},p(o,d){(!s||d&2&&t!==(t=X+"/add?type="+o[1]))&&b(e,"href",t)},i(o){s||(P(l.$$.fragment,o),s=!0)},o(o){C(l.$$.fragment,o),s=!1},d(o){o&&g(e),W(l)}}}function Ne(r){let e,a,l;return a=new We({props:{text:"Loading "+(r[1]??"")}}),{c(){e=F("div"),I(a.$$.fragment),this.h()},l(i){e=q(i,"DIV",{class:!0});var t=y(e);T(a.$$.fragment,t),t.forEach(g),this.h()},h(){b(e,"class","flex flex-row items-center pl-5 pb-4")},m(i,t){w(i,e,t),R(a,e,null),l=!0},p(i,t){const s={};t&2&&(s.text="Loading "+(i[1]??"")),a.$set(s)},i(i){l||(P(a.$$.fragment,i),l=!0)},o(i){C(a.$$.fragment,i),l=!1},d(i){i&&g(e),W(a)}}}function Oe(r){let e,a;return e=new ze({props:{dataRaw:r[0],type:r[1],entity:r[2]}}),e.$on("refresh",r[6]),{c(){I(e.$$.fragment)},l(l){T(e.$$.fragment,l)},m(l,i){R(e,l,i),a=!0},p(l,i){const t={};i&1&&(t.dataRaw=l[0]),i&2&&(t.type=l[1]),i&4&&(t.entity=l[2]),e.$set(t)},i(l){a||(P(e.$$.fragment,l),a=!0)},o(l){C(e.$$.fragment,l),a=!1},d(l){W(e,l)}}}function He(r){let e,a,l,i,t,s,o,d,f,n,_,u;document.title=e=le(r[1])+" "+(r[1]?"|":"")+" "+$.name,t=new ae({props:{class:" flex flex-row mr-2  items-center bg-green-500 dark:bg-green-700",$$slots:{default:[qe]},$$scope:{ctx:r}}}),t.$on("click",r[4]),o=new ae({props:{class:"flex flex-row mr-2 bg-blue-500 dark:bg-blue-600",$$slots:{default:[Fe]},$$scope:{ctx:r}}}),o.$on("click",r[5]);const m=[Oe,Ne],E=[];function z(c,k){return c[0]?0:1}return f=z(r),n=E[f]=m[f](r),{c(){a=G(),l=F("div"),i=F("div"),I(t.$$.fragment),s=G(),I(o.$$.fragment),d=G(),n.c(),_=A(),this.h()},l(c){we("svelte-c4jj3",document.head).forEach(g),a=K(c),l=q(c,"DIV",{class:!0});var v=y(l);i=q(v,"DIV",{class:!0});var p=y(i);T(t.$$.fragment,p),s=K(p),T(o.$$.fragment,p),p.forEach(g),v.forEach(g),d=K(c),n.l(c),_=A(),this.h()},h(){b(i,"class","flex flex-row mb-2 h-10"),b(l,"class","flex flex-col m-4 mb-3 font-light text-2xl")},m(c,k){w(c,a,k),w(c,l,k),M(l,i),R(t,i,null),M(i,s),R(o,i,null),w(c,d,k),E[f].m(c,k),w(c,_,k),u=!0},p(c,[k]){(!u||k&2)&&e!==(e=le(c[1])+" "+(c[1]?"|":"")+" "+$.name)&&(document.title=e);const v={};k&2048&&(v.$$scope={dirty:k,ctx:c}),t.$set(v);const p={};k&2050&&(p.$$scope={dirty:k,ctx:c}),o.$set(p);let S=f;f=z(c),f===S?E[f].p(c,k):(Me(),C(E[S],1,1,()=>{E[S]=null}),ye(),n=E[f],n?n.p(c,k):(n=E[f]=m[f](c),n.c()),P(n,1),n.m(_.parentNode,_))},i(c){u||(P(t.$$.fragment,c),P(o.$$.fragment,c),P(n),u=!0)},o(c){C(t.$$.fragment,c),C(o.$$.fragment,c),C(n),u=!1},d(c){c&&(g(a),g(l),g(d),g(_)),W(t),W(o),E[f].d(c)}}}function Je(r,e,a){let l,i,t,s=!1,o="";Se.subscribe(m=>{f()}),Ee(()=>{s=!0,f()});let d;async function f(m=!1){if(!s)return;const E=new URLSearchParams(window.location.search);d=te.now();const z=i;a(1,i=E.get("type")??"none"),o=E.get("prefix")??"";let c=!1;z!=i&&(a(0,l=void 0),c=!0);try{if(a(2,t=Be.find(p=>p.name==i)),!t)return;let v=await(await ie()).findAll(t.apiPath,{},o,m);if(!v.ok){Ce(`failed to fetch the ${i}. ${v.err} (${v.code})`);return}a(0,l=v.data.data);var k=d;for(await re(x);v.data.next&&(v=await(await ie()).request(v.data.next??"",void 0,void 0),k==d);)v.ok&&a(0,l=l.concat(v.data.data)),await re(x);if(t.apiPath==="clustering/data-planes")for(const p of l){const S={code:200,ok:!0,data:p};je[`/dataplanes/${p.id}`]=S}De.set(i+te.now().toMillis()),m&&ee("refresh finished!")}catch(v){console.error(v),Pe({message:`Failed fetching ${i}. ${v.message?v.message:""}`})}}return[l,i,t,f,()=>{f(!0),ee("refresh started!")},()=>{Ae(`${X}/add?type=${i}`)},async()=>await f(!0)]}class rt extends ue{constructor(e){super(),ce(this,e,Je,He,de,{})}}export{rt as component};
