import{s as de,v as B,i as v,n as I,f as _,w as he,x as Ae,y as re,z as pe,A as V,J as H,K as q,b as P,l as h,L as se,h as y,u as A,r as Te,t as W,d as R,j as ee,e as z,a as Z,c as J,g as K,k as Ie,o as We,P as ge,p as Re,q as be,S as Ve}from"../chunks/scheduler.COIS6eYE.js";import{S as me,i as _e,c as C,a as N,m as D,g as Q,b as k,e as Y,t as g,d as T}from"../chunks/index.e2hCl6E0.js";import{e as ke}from"../chunks/each.Bo7YYQGF.js";import{T as Fe,F as Me,C as He,A as qe}from"../chunks/ArrayWrap.Df4CBFko.js";import{B as x}from"../chunks/Button.CaK02vgf.js";import{T as Ze}from"../chunks/treeWrapper.BZWdMrnw.js";import{a as te}from"../chunks/requests.DbvmTp4F.js";import{g as ve,b as ne}from"../chunks/entry.DB8BVyHw.js";import{p as Ke}from"../chunks/stores.D7C4VTzt.js";import{g as Be,e as le,b as ce,w as Ue}from"../chunks/util.C36Z39_g.js";import{t as ae}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as Xe,F as Ge}from"../chunks/PaletteOutline.Bn1GGJMb.js";import{a as Qe,k as we,f as Ye}from"../chunks/config.DgbcnDvX.js";function xe(a){let e,n,l,s,t,r=a[4].id&&a[4].title&&$e(a),f=a[6].id&&a[6].desc&&Ee(a),i=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:s=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":t=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],o={};for(let u=0;u<i.length;u+=1)o=re(o,i[u]);return{c(){e=H("svg"),r&&r.c(),n=B(),f&&f.c(),l=H("path"),this.h()},l(u){e=q(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=P(e);r&&r.l(m),n=B(),f&&f.l(m),l=q(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(l).forEach(_),m.forEach(_),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",a[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,o)},m(u,m){v(u,e,m),r&&r.m(e,null),y(e,n),f&&f.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?r?r.p(u,m):(r=$e(u),r.c(),r.m(e,n)):r&&(r.d(1),r=null),u[6].id&&u[6].desc?f?f.p(u,m):(f=Ee(u),f.c(),f.m(e,l)):f&&(f.d(1),f=null),m&32&&h(l,"stroke-width",u[5]),se(e,o=Be(i,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&s!==(s=ae("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:s},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&_(e),r&&r.d(),f&&f.d()}}}function et(a){let e,n,l,s,t,r,f,i=a[4].id&&a[4].title&&ye(a),o=a[6].id&&a[6].desc&&Pe(a),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:s=ae("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":t=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let c=0;c<u.length;c+=1)m=re(m,u[c]);return{c(){e=H("svg"),i&&i.c(),n=B(),o&&o.c(),l=H("path"),this.h()},l(c){e=q(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var d=P(e);i&&i.l(d),n=B(),o&&o.l(d),l=q(d,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(l).forEach(_),d.forEach(_),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",a[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,m)},m(c,d){v(c,e,d),i&&i.m(e,null),y(e,n),o&&o.m(e,null),y(e,l),r||(f=[A(e,"click",a[13]),A(e,"keydown",a[14]),A(e,"keyup",a[15]),A(e,"focus",a[16]),A(e,"blur",a[17]),A(e,"mouseenter",a[18]),A(e,"mouseleave",a[19]),A(e,"mouseover",a[20]),A(e,"mouseout",a[21])],r=!0)},p(c,d){c[4].id&&c[4].title?i?i.p(c,d):(i=ye(c),i.c(),i.m(e,n)):i&&(i.d(1),i=null),c[6].id&&c[6].desc?o?o.p(c,d):(o=Pe(c),o.c(),o.m(e,l)):o&&(o.d(1),o=null),d&32&&h(l,"stroke-width",c[5]),se(e,m=Be(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},d&4&&{color:c[2]},d&2048&&c[11],d&4097&&s!==(s=ae("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:s},d&2&&{role:c[1]},d&128&&{"aria-label":c[7]},d&256&&t!==(t=c[8]?c[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(c){c&&_(e),i&&i.d(),o&&o.d(),r=!1,Te(f)}}}function $e(a){let e,n=a[4].title+"",l,s;return{c(){e=H("title"),l=W(n),this.h()},l(t){e=q(t,"title",{id:!0});var r=P(e);l=R(r,n),r.forEach(_),this.h()},h(){h(e,"id",s=a[4].id)},m(t,r){v(t,e,r),y(e,l)},p(t,r){r&16&&n!==(n=t[4].title+"")&&ee(l,n),r&16&&s!==(s=t[4].id)&&h(e,"id",s)},d(t){t&&_(e)}}}function Ee(a){let e,n=a[6].desc+"",l,s;return{c(){e=H("desc"),l=W(n),this.h()},l(t){e=q(t,"desc",{id:!0});var r=P(e);l=R(r,n),r.forEach(_),this.h()},h(){h(e,"id",s=a[6].id)},m(t,r){v(t,e,r),y(e,l)},p(t,r){r&64&&n!==(n=t[6].desc+"")&&ee(l,n),r&64&&s!==(s=t[6].id)&&h(e,"id",s)},d(t){t&&_(e)}}}function ye(a){let e,n=a[4].title+"",l,s;return{c(){e=H("title"),l=W(n),this.h()},l(t){e=q(t,"title",{id:!0});var r=P(e);l=R(r,n),r.forEach(_),this.h()},h(){h(e,"id",s=a[4].id)},m(t,r){v(t,e,r),y(e,l)},p(t,r){r&16&&n!==(n=t[4].title+"")&&ee(l,n),r&16&&s!==(s=t[4].id)&&h(e,"id",s)},d(t){t&&_(e)}}}function Pe(a){let e,n=a[6].desc+"",l,s;return{c(){e=H("desc"),l=W(n),this.h()},l(t){e=q(t,"desc",{id:!0});var r=P(e);l=R(r,n),r.forEach(_),this.h()},h(){h(e,"id",s=a[6].id)},m(t,r){v(t,e,r),y(e,l)},p(t,r){r&64&&n!==(n=t[6].desc+"")&&ee(l,n),r&64&&s!==(s=t[6].id)&&h(e,"id",s)},d(t){t&&_(e)}}}function tt(a){let e;function n(t,r){return t[3]?et:xe}let l=n(a),s=l(a);return{c(){s.c(),e=B()},l(t){s.l(t),e=B()},m(t,r){s.m(t,r),v(t,e,r)},p(t,[r]){l===(l=n(t))&&s?s.p(t,r):(s.d(1),s=l(t),s&&(s.c(),s.m(e.parentNode,e)))},i:I,o:I,d(t){t&&_(e),s.d(t)}}}function lt(a,e,n){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let s=he(e,l);const t=Ae("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:f=t.size||"md"}=e,{role:i=t.role||"img"}=e,{color:o=t.color||"currentColor"}=e,{withEvents:u=t.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:c=t.strokeWidth||"2"}=e,{desc:d={}}=e,$=`${m.id||""} ${d.id||""}`,O=!1,{ariaLabel:F="edit outline"}=e;function b(p){V.call(this,a,p)}function w(p){V.call(this,a,p)}function S(p){V.call(this,a,p)}function U(p){V.call(this,a,p)}function X(p){V.call(this,a,p)}function ie(p){V.call(this,a,p)}function oe(p){V.call(this,a,p)}function fe(p){V.call(this,a,p)}function ue(p){V.call(this,a,p)}return a.$$set=p=>{n(12,e=re(re({},e),pe(p))),n(11,s=he(e,l)),"size"in p&&n(0,f=p.size),"role"in p&&n(1,i=p.role),"color"in p&&n(2,o=p.color),"withEvents"in p&&n(3,u=p.withEvents),"title"in p&&n(4,m=p.title),"strokeWidth"in p&&n(5,c=p.strokeWidth),"desc"in p&&n(6,d=p.desc),"ariaLabel"in p&&n(7,F=p.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(m.id||d.id?n(8,O=!0):n(8,O=!1))},e=pe(e),[f,i,o,u,m,c,d,F,O,r,$,s,e,b,w,S,U,X,ie,oe,fe,ue]}class rt extends me{constructor(e){super(),_e(this,e,lt,tt,de,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Oe(a,e,n){const l=a.slice();return l[28]=e[n],l}function st(a){let e,n,l;return e=new rt({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W("edit")},l(s){N(e.$$.fragment,s),n=R(s,"edit")},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&_(n),T(e,s)}}}function nt(a){let e,n,l,s;return e=new x({props:{class:"h-10 m-1",color:"blue",disabled:a[1]==a[2],$$slots:{default:[it]},$$scope:{ctx:a}}}),e.$on("click",a[11]),l=new x({props:{class:"h-10 m-1",disabled:a[1]==a[2],color:"green",$$slots:{default:[ot]},$$scope:{ctx:a}}}),l.$on("click",a[18]),{c(){C(e.$$.fragment),n=Z(),C(l.$$.fragment)},l(t){N(e.$$.fragment,t),n=K(t),N(l.$$.fragment,t)},m(t,r){D(e,t,r),v(t,n,r),D(l,t,r),s=!0},p(t,r){const f={};r[0]&6&&(f.disabled=t[1]==t[2]),r[1]&1&&(f.$$scope={dirty:r,ctx:t}),e.$set(f);const i={};r[0]&6&&(i.disabled=t[1]==t[2]),r[1]&1&&(i.$$scope={dirty:r,ctx:t}),l.$set(i)},i(t){s||(g(e.$$.fragment,t),g(l.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),s=!1},d(t){t&&_(n),T(e,t),T(l,t)}}}function at(a){let e,n,l,s;return e=new x({props:{class:"h-10 m-1",title:"delete",color:"alternative",$$slots:{default:[ft]},$$scope:{ctx:a}}}),e.$on("click",a[16]),l=new x({props:{color:"alternative",class:"h-10 m-1",$$slots:{default:[ut]},$$scope:{ctx:a}}}),l.$on("click",a[17]),{c(){C(e.$$.fragment),n=Z(),C(l.$$.fragment)},l(t){N(e.$$.fragment,t),n=K(t),N(l.$$.fragment,t)},m(t,r){D(e,t,r),v(t,n,r),D(l,t,r),s=!0},p(t,r){const f={};r[1]&1&&(f.$$scope={dirty:r,ctx:t}),e.$set(f);const i={};r[1]&1&&(i.$$scope={dirty:r,ctx:t}),l.$set(i)},i(t){s||(g(e.$$.fragment,t),g(l.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),s=!1},d(t){t&&_(n),T(e,t),T(l,t)}}}function it(a){let e,n,l;return e=new Xe({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W(`
				format and validate JSON`)},l(s){N(e.$$.fragment,s),n=R(s,`
				format and validate JSON`)},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&_(n),T(e,s)}}}function ot(a){let e,n,l;return e=new Ge({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W(`
				save`)},l(s){N(e.$$.fragment,s),n=R(s,`
				save`)},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&_(n),T(e,s)}}}function ft(a){let e,n,l,s,t;return l=new Fe({props:{class:"m-1"}}),{c(){e=z("div"),n=z("div"),C(l.$$.fragment),s=W(`
						delete`),this.h()},l(r){e=J(r,"DIV",{class:!0});var f=P(e);n=J(f,"DIV",{class:!0});var i=P(n);N(l.$$.fragment,i),s=R(i,`
						delete`),i.forEach(_),f.forEach(_),this.h()},h(){h(n,"class","flex flex-row items-center"),h(e,"class","text-rose-500")},m(r,f){v(r,e,f),y(e,n),D(l,n,null),y(n,s),t=!0},p:I,i(r){t||(g(l.$$.fragment,r),t=!0)},o(r){k(l.$$.fragment,r),t=!1},d(r){r&&_(e),T(l)}}}function ut(a){let e,n,l;return e=new Me({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W(`
				copy`)},l(s){N(e.$$.fragment,s),n=R(s,`
				copy`)},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&_(n),T(e,s)}}}function ct(a){let e,n="Loading ...";return{c(){e=z("h2"),e.textContent=n,this.h()},l(l){e=J(l,"H2",{class:!0,"data-svelte-h":!0}),Re(e)!=="svelte-wq8tmm"&&(e.textContent=n),this.h()},h(){h(e,"class","text-xl text-center")},m(l,s){v(l,e,s)},p:I,i:I,o:I,d(l){l&&_(e)}}}function dt(a){let e,n,l,s,t,r,f,i,o,u,m,c=!a[3]&&Se(a);return{c(){e=z("div"),n=z("pre"),l=z("code"),s=Z(),t=z("textarea"),f=Z(),c&&c.c(),i=B(),this.h()},l(d){e=J(d,"DIV",{class:!0});var $=P(e);n=J($,"PRE",{class:!0});var O=P(n);l=J(O,"CODE",{class:!0}),P(l).forEach(_),O.forEach(_),s=K($),t=J($,"TEXTAREA",{spellcheck:!0,wrap:!0,autocorrect:!0,autocapitalize:!0,translate:!0,class:!0}),P(t).forEach(_),$.forEach(_),f=K(d),c&&c.l(d),i=B(),this.h()},h(){h(l,"class","svelte-1c016cv"),h(n,"class","language-json svelte-1c016cv"),h(t,"spellcheck","false"),h(t,"wrap","hard"),h(t,"autocorrect","off"),h(t,"autocapitalize","off"),h(t,"translate","no"),h(t,"class","relative svelte-1c016cv"),h(e,"class",r="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(a[3]?"grid":"hidden")+" svelte-1c016cv")},m(d,$){v(d,e,$),y(e,n),y(n,l),a[19](l),y(e,s),y(e,t),a[20](t),be(t,a[2]),v(d,f,$),c&&c.m(d,$),v(d,i,$),o=!0,u||(m=[A(t,"input",a[21]),A(t,"input",a[22])],u=!0)},p(d,$){$[0]&4&&be(t,d[2]),(!o||$[0]&8&&r!==(r="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(d[3]?"grid":"hidden")+" svelte-1c016cv"))&&h(e,"class",r),d[3]?c&&(Q(),k(c,1,1,()=>{c=null}),Y()):c?(c.p(d,$),$[0]&8&&g(c,1)):(c=Se(d),c.c(),g(c,1),c.m(i.parentNode,i))},i(d){o||(g(c),o=!0)},o(d){k(c),o=!1},d(d){d&&(_(e),_(f),_(i)),a[19](null),a[20](null),c&&c.d(d),u=!1,Te(m)}}}function Se(a){let e,n,l,s;e=new Ze({props:{data:a[0],rounded:!1,type:a[5]}}),e.$on("refresh",a[23]);let t=a[6]&&Ce(a);return{c(){C(e.$$.fragment),n=Z(),t&&t.c(),l=B()},l(r){N(e.$$.fragment,r),n=K(r),t&&t.l(r),l=B()},m(r,f){D(e,r,f),v(r,n,f),t&&t.m(r,f),v(r,l,f),s=!0},p(r,f){const i={};f[0]&1&&(i.data=r[0]),f[0]&32&&(i.type=r[5]),e.$set(i),r[6]?t?(t.p(r,f),f[0]&64&&g(t,1)):(t=Ce(r),t.c(),g(t,1),t.m(l.parentNode,l)):t&&(Q(),k(t,1,1,()=>{t=null}),Y())},i(r){s||(g(e.$$.fragment,r),g(t),s=!0)},o(r){k(e.$$.fragment,r),k(t),s=!1},d(r){r&&(_(n),_(l)),T(e,r),t&&t.d(r)}}}function Ce(a){let e,n,l=ke(a[6]),s=[];for(let r=0;r<l.length;r+=1)s[r]=De(Oe(a,l,r));const t=r=>k(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=B()},l(r){for(let f=0;f<s.length;f+=1)s[f].l(r);e=B()},m(r,f){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(r,f);v(r,e,f),n=!0},p(r,f){if(f[0]&576){l=ke(r[6]);let i;for(i=0;i<l.length;i+=1){const o=Oe(r,l,i);s[i]?(s[i].p(o,f),g(s[i],1)):(s[i]=De(o),s[i].c(),g(s[i],1),s[i].m(e.parentNode,e))}for(Q(),i=l.length;i<s.length;i+=1)t(i);Y()}},i(r){if(!n){for(let f=0;f<l.length;f+=1)g(s[f]);n=!0}},o(r){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)k(s[f]);n=!1},d(r){r&&_(e),Ve(s,r)}}}function mt(a){let e,n,l,s,t=a[28].name+"",r,f,i;return l=new He({props:{class:"m-2"}}),{c(){e=z("a"),n=z("div"),C(l.$$.fragment),s=W(`
										add `),r=W(t),this.h()},l(o){e=J(o,"A",{href:!0});var u=P(e);n=J(u,"DIV",{class:!0});var m=P(n);N(l.$$.fragment,m),s=R(m,`
										add `),r=R(m,t),m.forEach(_),u.forEach(_),this.h()},h(){h(n,"class","flex flex-row items-center"),h(e,"href",f=ne+"/add?type="+a[28].name+"&apiPostPath="+btoa(a[28].entitySubPath))},m(o,u){v(o,e,u),y(e,n),D(l,n,null),y(n,s),y(n,r),i=!0},p(o,u){(!i||u[0]&64)&&t!==(t=o[28].name+"")&&ee(r,t),(!i||u[0]&64&&f!==(f=ne+"/add?type="+o[28].name+"&apiPostPath="+btoa(o[28].entitySubPath)))&&h(e,"href",f)},i(o){i||(g(l.$$.fragment,o),i=!0)},o(o){k(l.$$.fragment,o),i=!1},d(o){o&&_(e),T(l)}}}function Ne(a){let e,n;return e=new qe({props:{dataRaw:a[28].data,type:a[28].name,entity:a[28]}}),e.$on("refresh",a[25]),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,s){D(e,l,s),n=!0},p(l,s){const t={};s[0]&64&&(t.dataRaw=l[28].data),s[0]&64&&(t.type=l[28].name),s[0]&64&&(t.entity=l[28]),e.$set(t)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function De(a){let e,n,l,s,t,r;function f(){return a[24](a[28])}l=new x({props:{color:"alternative",$$slots:{default:[mt]},$$scope:{ctx:a}}}),l.$on("click",f);let i=a[28].data&&a[28].data.length>0&&Ne(a);return{c(){e=z("div"),n=z("div"),C(l.$$.fragment),s=Z(),i&&i.c(),t=B(),this.h()},l(o){e=J(o,"DIV",{class:!0});var u=P(e);n=J(u,"DIV",{class:!0});var m=P(n);N(l.$$.fragment,m),m.forEach(_),u.forEach(_),s=K(o),i&&i.l(o),t=B(),this.h()},h(){h(n,"class","flex flex-row h-10"),h(e,"class","flex flex-row m-4 h-8 items-center")},m(o,u){v(o,e,u),y(e,n),D(l,n,null),v(o,s,u),i&&i.m(o,u),v(o,t,u),r=!0},p(o,u){a=o;const m={};u[0]&64|u[1]&1&&(m.$$scope={dirty:u,ctx:a}),l.$set(m),a[28].data&&a[28].data.length>0?i?(i.p(a,u),u[0]&64&&g(i,1)):(i=Ne(a),i.c(),g(i,1),i.m(t.parentNode,t)):i&&(Q(),k(i,1,1,()=>{i=null}),Y())},i(o){r||(g(l.$$.fragment,o),g(i),r=!0)},o(o){k(l.$$.fragment,o),k(i),r=!1},d(o){o&&(_(e),_(s),_(t)),T(l),i&&i.d(o)}}}function _t(a){let e,n,l,s,t,r,f,i,o,u;l=new x({props:{class:"h-10 m-1 focus:shadow-none",$$slots:{default:[st]},$$scope:{ctx:a}}}),l.$on("click",a[15]);const m=[at,nt],c=[];function d(b,w){return b[3]?1:0}t=d(a),r=c[t]=m[t](a);const $=[dt,ct],O=[];function F(b,w){return b[0]?0:1}return i=F(a),o=O[i]=$[i](a),{c(){e=z("div"),n=z("div"),C(l.$$.fragment),s=Z(),r.c(),f=Z(),o.c(),this.h()},l(b){e=J(b,"DIV",{class:!0});var w=P(e);n=J(w,"DIV",{class:!0});var S=P(n);N(l.$$.fragment,S),s=K(S),r.l(S),S.forEach(_),f=K(w),o.l(w),w.forEach(_),this.h()},h(){h(n,"class","flex flex-row flex-wrap m-2"),h(e,"class","mb-2")},m(b,w){v(b,e,w),y(e,n),D(l,n,null),y(n,s),c[t].m(n,null),y(e,f),O[i].m(e,null),u=!0},p(b,w){const S={};w[1]&1&&(S.$$scope={dirty:w,ctx:b}),l.$set(S);let U=t;t=d(b),t===U?c[t].p(b,w):(Q(),k(c[U],1,1,()=>{c[U]=null}),Y(),r=c[t],r?r.p(b,w):(r=c[t]=m[t](b),r.c()),g(r,1),r.m(n,null));let X=i;i=F(b),i===X?O[i].p(b,w):(Q(),k(O[X],1,1,()=>{O[X]=null}),Y(),o=O[i],o?o.p(b,w):(o=O[i]=$[i](b),o.c()),g(o,1),o.m(e,null))},i(b){u||(g(l.$$.fragment,b),g(r),g(o),u=!0)},o(b){k(l.$$.fragment,b),k(r),k(o),u=!1},d(b){b&&_(e),T(l),c[t].d(),O[i].d()}}}function ht(a,e,n){let l;Ie(a,Ke,E=>n(14,l=E));let{data:s={}}=e,t="",r="",f=!1,i,o,u,m,c=!1;We(()=>{c=!0,d()});async function d(){var L;if(!c)return;n(0,s=void 0);const E=new URLSearchParams(window.location.search);n(5,o=E.get("type")??"none"),n(4,i=E.get("id")??"none");{n(0,s=void 0);const G=await(await te()).findRecord(o,i);n(0,s=G.data),n(0,s=Qe(s,Ye)),n(2,r=JSON.stringify(s,void 0,2)),n(1,t=r),u=we.find(j=>j.name==o),n(6,m=we.filter(j=>{var M;return(M=u==null?void 0:u.subEntities)==null?void 0:M.includes(j.name)}).map(j=>({...j,entitySubPath:`${o}/${i}/${j.name}`})));for(const j of m){const M=await(await te()).findAll(j.name,{},`/${o}/${i}`);if(!M.ok){le(`failed to load ${j.name}`);continue}j.data=(L=M.data)==null?void 0:L.data,n(6,m)}}S()}async function $(E,L,G){if(!confirm(`Please confirm deletion of '${G}'`))return;const M=await(await te()).deleteRecord(E,L);M.ok?(ce("deleted"),ve(`${ne}/entities?type=${o}`)):le(`failed to delete. ${M.err}`)}function O(){let E;try{E=JSON.parse(r)}catch(L){le(`Failed to parse JSON. ${L.message}`);return}n(2,r=JSON.stringify(E,void 0,2)),S(),ce("json is valid")}async function F(){var G;if(!confirm("confirm save?"))return;O();const L=await(await te()).updateRecord(o,i,JSON.parse(r));if(console.log(L),L.ok)ce("entity successfully updated");else{le(`API error (${L.code}): `+(((G=L.errTyped)==null?void 0:G.message)??L.err),!0,15e3);return}n(3,f=!f),n(3,f),n(0,s=JSON.parse(r)),n(1,t=r)}let b,w;async function S(){n(2,r=r.replace(/\t/g,"  ")),n(2,r=r.replace(/\s\n$/g,`
 `)),w&&(n(8,w.textContent=r,w),globalThis.Prism.highlightElement(w))}const U=()=>{n(3,f=!f),S()},X=async()=>await $(o,i,s.name??s.id),ie=()=>{Ue(t)},oe=async()=>await F();function fe(E){ge[E?"unshift":"push"](()=>{w=E,n(8,w)})}function ue(E){ge[E?"unshift":"push"](()=>{b=E,n(7,b)})}function p(){r=this.value,n(2,r)}const ze=()=>{S()},Je=()=>{d()},Le=E=>{ve(`${ne}/add?type=${E.name}&apiPostPath=${btoa(E.entitySubPath)}`)},je=async()=>await d();return a.$$set=E=>{"data"in E&&n(0,s=E.data)},a.$$.update=()=>{a.$$.dirty[0]&16384&&d()},[s,t,r,f,i,o,m,b,w,d,$,O,F,S,l,U,X,ie,oe,fe,ue,p,ze,Je,Le,je]}class pt extends me{constructor(e){super(),_e(this,e,ht,_t,de,{data:0},null,[-1,-1])}}function gt(a){let e,n;return e=new pt({}),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,s){D(e,l,s),n=!0},p:I,i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}class Tt extends me{constructor(e){super(),_e(this,e,null,gt,de,{})}}export{Tt as component};
