import{s as _e,n as K,d as m,i as v,v as J,w as ge,x as Fe,y as fe,z as be,F as H,r as Je,l as p,H as ue,b as P,q as W,I as X,e as y,J as G,a as ne,f as A,t as F,K as Me,g as q,c as L,j as U,h as j,k as He,o as qe,p as ke,L as ve,T as Ue}from"../chunks/scheduler.BcKSNpAY.js";import{S as he,i as pe,t as $,a as b,g as ee,c as te,d as O,m as N,b as C,e as D}from"../chunks/index.DxnxjsIE.js";import{e as we}from"../chunks/each.fCCtyf2a.js";import{T as Ze,F as Ke,C as Xe,A as Ge}from"../chunks/ArrayWrap.Bf-2amDC.js";import{B as le}from"../chunks/Button.Buwpr5CI.js";import{T as Qe}from"../chunks/treeWrapper.DJgl2ijR.js";import{a as oe}from"../chunks/requests.DNW2VWKr.js";import{g as de,b as se}from"../chunks/entry.SD0oM-HJ.js";import{p as Ye}from"../chunks/stores.khO4jiJ0.js";import{w as xe}from"../chunks/util.UN72V8S8.js";import{g as Be,e as ie,c as me}from"../chunks/toastStore.DQsilM7O.js";import{t as ce}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as et,F as tt}from"../chunks/PaletteOutline.DH0es8NQ.js";import{s as $e,a as lt,k as Ee,f as rt}from"../chunks/config.Cr9fxf2z.js";import{S as it}from"../chunks/Spinner.D7KB-26a.js";function st(n){let e,s,r,l,t,i=n[4].id&&n[4].title&&ye(n),o=n[6].id&&n[6].desc&&Pe(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:l=ce("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":t=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let u=0;u<a.length;u+=1)f=fe(f,a[u]);return{c(){e=G("svg"),i&&i.c(),s=J(),o&&o.c(),r=G("path"),this.h()},l(u){e=X(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var c=y(e);i&&i.l(c),s=J(),o&&o.l(c),r=X(c,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(r).forEach(m),c.forEach(m),this.h()},h(){p(r,"stroke","currentColor"),p(r,"stroke-linecap","round"),p(r,"stroke-linejoin","round"),p(r,"stroke-width",n[5]),p(r,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ue(e,f)},m(u,c){v(u,e,c),i&&i.m(e,null),P(e,s),o&&o.m(e,null),P(e,r)},p(u,c){u[4].id&&u[4].title?i?i.p(u,c):(i=ye(u),i.c(),i.m(e,s)):i&&(i.d(1),i=null),u[6].id&&u[6].desc?o?o.p(u,c):(o=Pe(u),o.c(),o.m(e,r)):o&&(o.d(1),o=null),c&32&&p(r,"stroke-width",u[5]),ue(e,f=Be(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},c&4&&{color:u[2]},c&2048&&u[11],c&4097&&l!==(l=ce("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:l},c&2&&{role:u[1]},c&128&&{"aria-label":u[7]},c&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&m(e),i&&i.d(),o&&o.d()}}}function nt(n){let e,s,r,l,t,i,o,a=n[4].id&&n[4].title&&Se(n),f=n[6].id&&n[6].desc&&Oe(n),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:l=ce("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":t=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],c={};for(let d=0;d<u.length;d+=1)c=fe(c,u[d]);return{c(){e=G("svg"),a&&a.c(),s=J(),f&&f.c(),r=G("path"),this.h()},l(d){e=X(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=y(e);a&&a.l(_),s=J(),f&&f.l(_),r=X(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(r).forEach(m),_.forEach(m),this.h()},h(){p(r,"stroke","currentColor"),p(r,"stroke-linecap","round"),p(r,"stroke-linejoin","round"),p(r,"stroke-width",n[5]),p(r,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ue(e,c)},m(d,_){v(d,e,_),a&&a.m(e,null),P(e,s),f&&f.m(e,null),P(e,r),i||(o=[W(e,"click",n[13]),W(e,"keydown",n[14]),W(e,"keyup",n[15]),W(e,"focus",n[16]),W(e,"blur",n[17]),W(e,"mouseenter",n[18]),W(e,"mouseleave",n[19]),W(e,"mouseover",n[20]),W(e,"mouseout",n[21])],i=!0)},p(d,_){d[4].id&&d[4].title?a?a.p(d,_):(a=Se(d),a.c(),a.m(e,s)):a&&(a.d(1),a=null),d[6].id&&d[6].desc?f?f.p(d,_):(f=Oe(d),f.c(),f.m(e,r)):f&&(f.d(1),f=null),_&32&&p(r,"stroke-width",d[5]),ue(e,c=Be(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:d[2]},_&2048&&d[11],_&4097&&l!==(l=ce("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:l},_&2&&{role:d[1]},_&128&&{"aria-label":d[7]},_&256&&t!==(t=d[8]?d[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(d){d&&m(e),a&&a.d(),f&&f.d(),i=!1,Je(o)}}}function ye(n){let e,s=n[4].title+"",r,l;return{c(){e=G("title"),r=F(s),this.h()},l(t){e=X(t,"title",{id:!0});var i=y(e);r=A(i,s),i.forEach(m),this.h()},h(){p(e,"id",l=n[4].id)},m(t,i){v(t,e,i),P(e,r)},p(t,i){i&16&&s!==(s=t[4].title+"")&&ne(r,s),i&16&&l!==(l=t[4].id)&&p(e,"id",l)},d(t){t&&m(e)}}}function Pe(n){let e,s=n[6].desc+"",r,l;return{c(){e=G("desc"),r=F(s),this.h()},l(t){e=X(t,"desc",{id:!0});var i=y(e);r=A(i,s),i.forEach(m),this.h()},h(){p(e,"id",l=n[6].id)},m(t,i){v(t,e,i),P(e,r)},p(t,i){i&64&&s!==(s=t[6].desc+"")&&ne(r,s),i&64&&l!==(l=t[6].id)&&p(e,"id",l)},d(t){t&&m(e)}}}function Se(n){let e,s=n[4].title+"",r,l;return{c(){e=G("title"),r=F(s),this.h()},l(t){e=X(t,"title",{id:!0});var i=y(e);r=A(i,s),i.forEach(m),this.h()},h(){p(e,"id",l=n[4].id)},m(t,i){v(t,e,i),P(e,r)},p(t,i){i&16&&s!==(s=t[4].title+"")&&ne(r,s),i&16&&l!==(l=t[4].id)&&p(e,"id",l)},d(t){t&&m(e)}}}function Oe(n){let e,s=n[6].desc+"",r,l;return{c(){e=G("desc"),r=F(s),this.h()},l(t){e=X(t,"desc",{id:!0});var i=y(e);r=A(i,s),i.forEach(m),this.h()},h(){p(e,"id",l=n[6].id)},m(t,i){v(t,e,i),P(e,r)},p(t,i){i&64&&s!==(s=t[6].desc+"")&&ne(r,s),i&64&&l!==(l=t[6].id)&&p(e,"id",l)},d(t){t&&m(e)}}}function at(n){let e;function s(t,i){return t[3]?nt:st}let r=s(n),l=r(n);return{c(){l.c(),e=J()},l(t){l.l(t),e=J()},m(t,i){l.m(t,i),v(t,e,i)},p(t,[i]){r===(r=s(t))&&l?l.p(t,i):(l.d(1),l=r(t),l&&(l.c(),l.m(e.parentNode,e)))},i:K,o:K,d(t){t&&m(e),l.d(t)}}}function ot(n,e,s){const r=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let l=ge(e,r);const t=Fe("iconCtx")??{},i={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:a=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:u=t.withEvents||!1}=e,{title:c={}}=e,{strokeWidth:d=t.strokeWidth||"2"}=e,{desc:_={}}=e,S=`${c.id||""} ${_.id||""}`,T=!1,{ariaLabel:I="edit outline"}=e;function Q(g){H.call(this,n,g)}function Y(g){H.call(this,n,g)}function B(g){H.call(this,n,g)}function Z(g){H.call(this,n,g)}function k(g){H.call(this,n,g)}function h(g){H.call(this,n,g)}function E(g){H.call(this,n,g)}function R(g){H.call(this,n,g)}function M(g){H.call(this,n,g)}return n.$$set=g=>{s(12,e=fe(fe({},e),be(g))),s(11,l=ge(e,r)),"size"in g&&s(0,o=g.size),"role"in g&&s(1,a=g.role),"color"in g&&s(2,f=g.color),"withEvents"in g&&s(3,u=g.withEvents),"title"in g&&s(4,c=g.title),"strokeWidth"in g&&s(5,d=g.strokeWidth),"desc"in g&&s(6,_=g.desc),"ariaLabel"in g&&s(7,I=g.ariaLabel)},n.$$.update=()=>{n.$$.dirty&80&&(c.id||_.id?s(8,T=!0):s(8,T=!1))},e=be(e),[o,a,f,u,c,d,_,I,T,i,S,l,e,Q,Y,B,Z,k,h,E,R,M]}class ft extends he{constructor(e){super(),pe(this,e,ot,at,_e,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Ne(n,e,s){const r=n.slice();return r[31]=e[s],r}function ut(n){let e,s,r;return s=new it({props:{uppercased:!1,text:"loading "+n[5].substring(0,n[5].length-1)+" with id='"+n[4]+"'"}}),{c(){e=j("div"),D(s.$$.fragment),this.h()},l(l){e=L(l,"DIV",{class:!0});var t=y(e);C(s.$$.fragment,t),t.forEach(m),this.h()},h(){p(e,"class","flex flex-row items-center m-4")},m(l,t){v(l,e,t),N(s,e,null),r=!0},p(l,t){const i={};t[0]&48&&(i.text="loading "+l[5].substring(0,l[5].length-1)+" with id='"+l[4]+"'"),s.$set(i)},i(l){r||(b(s.$$.fragment,l),r=!0)},o(l){$(s.$$.fragment,l),r=!1},d(l){l&&m(e),O(s)}}}function ct(n){let e,s,r,l,t,i,o,a,f,u,c,d,_,S,T,I,Q;s=new le({props:{class:"h-10 m-1 focus:shadow-none",$$slots:{default:[dt]},$$scope:{ctx:n}}}),s.$on("click",n[17]);const Y=[_t,mt],B=[];function Z(h,E){return h[3]?1:0}l=Z(n),t=B[l]=Y[l](n);let k=!n[3]&&Ce(n);return{c(){e=j("div"),D(s.$$.fragment),r=U(),t.c(),i=U(),o=j("div"),a=j("pre"),f=j("code"),u=U(),c=j("textarea"),_=U(),k&&k.c(),S=J(),this.h()},l(h){e=L(h,"DIV",{class:!0});var E=y(e);C(s.$$.fragment,E),r=q(E),t.l(E),E.forEach(m),i=q(h),o=L(h,"DIV",{class:!0});var R=y(o);a=L(R,"PRE",{class:!0});var M=y(a);f=L(M,"CODE",{class:!0}),y(f).forEach(m),M.forEach(m),u=q(R),c=L(R,"TEXTAREA",{spellcheck:!0,wrap:!0,autocorrect:!0,autocapitalize:!0,translate:!0,class:!0}),y(c).forEach(m),R.forEach(m),_=q(h),k&&k.l(h),S=J(),this.h()},h(){p(e,"class","flex flex-row flex-wrap m-2"),p(f,"class","svelte-1c016cv"),p(a,"class","language-json svelte-1c016cv"),p(c,"spellcheck","false"),p(c,"wrap","hard"),p(c,"autocorrect","off"),p(c,"autocapitalize","off"),p(c,"translate","no"),p(c,"class","relative svelte-1c016cv"),p(o,"class",d="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(n[3]?"grid":"hidden")+" svelte-1c016cv")},m(h,E){v(h,e,E),N(s,e,null),P(e,r),B[l].m(e,null),v(h,i,E),v(h,o,E),P(o,a),P(a,f),n[21](f),P(o,u),P(o,c),n[22](c),ke(c,n[2]),v(h,_,E),k&&k.m(h,E),v(h,S,E),T=!0,I||(Q=[W(c,"input",n[23]),W(c,"input",n[24])],I=!0)},p(h,E){const R={};E[1]&8&&(R.$$scope={dirty:E,ctx:h}),s.$set(R);let M=l;l=Z(h),l===M?B[l].p(h,E):(ee(),$(B[M],1,1,()=>{B[M]=null}),te(),t=B[l],t?t.p(h,E):(t=B[l]=Y[l](h),t.c()),b(t,1),t.m(e,null)),E[0]&4&&ke(c,h[2]),(!T||E[0]&8&&d!==(d="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(h[3]?"grid":"hidden")+" svelte-1c016cv"))&&p(o,"class",d),h[3]?k&&(ee(),$(k,1,1,()=>{k=null}),te()):k?(k.p(h,E),E[0]&8&&b(k,1)):(k=Ce(h),k.c(),b(k,1),k.m(S.parentNode,S))},i(h){T||(b(s.$$.fragment,h),b(t),b(k),T=!0)},o(h){$(s.$$.fragment,h),$(t),$(k),T=!1},d(h){h&&(m(e),m(i),m(o),m(_),m(S)),O(s),B[l].d(),n[21](null),n[22](null),k&&k.d(h),I=!1,Je(Q)}}}function dt(n){let e,s,r;return e=new ft({props:{class:"m-2"}}),{c(){D(e.$$.fragment),s=F("edit")},l(l){C(e.$$.fragment,l),s=A(l,"edit")},m(l,t){N(e,l,t),v(l,s,t),r=!0},p:K,i(l){r||(b(e.$$.fragment,l),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&m(s),O(e,l)}}}function mt(n){let e,s,r,l;return e=new le({props:{class:"h-10 m-1",color:"blue",title:n[1]==n[2]?"entity unchanged":"",disabled:n[1]==n[2],$$slots:{default:[ht]},$$scope:{ctx:n}}}),e.$on("click",n[13]),r=new le({props:{class:"h-10 m-1",disabled:n[1]==n[2],title:n[1]==n[2]?"entity unchanged":"",color:"green",$$slots:{default:[pt]},$$scope:{ctx:n}}}),r.$on("click",n[20]),{c(){D(e.$$.fragment),s=U(),D(r.$$.fragment)},l(t){C(e.$$.fragment,t),s=q(t),C(r.$$.fragment,t)},m(t,i){N(e,t,i),v(t,s,i),N(r,t,i),l=!0},p(t,i){const o={};i[0]&6&&(o.title=t[1]==t[2]?"entity unchanged":""),i[0]&6&&(o.disabled=t[1]==t[2]),i[1]&8&&(o.$$scope={dirty:i,ctx:t}),e.$set(o);const a={};i[0]&6&&(a.disabled=t[1]==t[2]),i[0]&6&&(a.title=t[1]==t[2]?"entity unchanged":""),i[1]&8&&(a.$$scope={dirty:i,ctx:t}),r.$set(a)},i(t){l||(b(e.$$.fragment,t),b(r.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),$(r.$$.fragment,t),l=!1},d(t){t&&m(s),O(e,t),O(r,t)}}}function _t(n){let e,s,r,l;return e=new le({props:{class:"h-10 m-1",title:"delete",color:"alternative",$$slots:{default:[gt]},$$scope:{ctx:n}}}),e.$on("click",n[18]),r=new le({props:{color:"alternative",class:"h-10 m-1",title:n[1],$$slots:{default:[bt]},$$scope:{ctx:n}}}),r.$on("click",n[19]),{c(){D(e.$$.fragment),s=U(),D(r.$$.fragment)},l(t){C(e.$$.fragment,t),s=q(t),C(r.$$.fragment,t)},m(t,i){N(e,t,i),v(t,s,i),N(r,t,i),l=!0},p(t,i){const o={};i[1]&8&&(o.$$scope={dirty:i,ctx:t}),e.$set(o);const a={};i[0]&2&&(a.title=t[1]),i[1]&8&&(a.$$scope={dirty:i,ctx:t}),r.$set(a)},i(t){l||(b(e.$$.fragment,t),b(r.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),$(r.$$.fragment,t),l=!1},d(t){t&&m(s),O(e,t),O(r,t)}}}function ht(n){let e,s,r;return e=new et({props:{class:"m-2"}}),{c(){D(e.$$.fragment),s=F(`
				format and validate JSON`)},l(l){C(e.$$.fragment,l),s=A(l,`
				format and validate JSON`)},m(l,t){N(e,l,t),v(l,s,t),r=!0},p:K,i(l){r||(b(e.$$.fragment,l),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&m(s),O(e,l)}}}function pt(n){let e,s,r;return e=new tt({props:{class:"m-2"}}),{c(){D(e.$$.fragment),s=F(`
				save`)},l(l){C(e.$$.fragment,l),s=A(l,`
				save`)},m(l,t){N(e,l,t),v(l,s,t),r=!0},p:K,i(l){r||(b(e.$$.fragment,l),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&m(s),O(e,l)}}}function gt(n){let e,s,r,l,t;return r=new Ze({props:{class:"m-1"}}),{c(){e=j("div"),s=j("div"),D(r.$$.fragment),l=F(`
						delete`),this.h()},l(i){e=L(i,"DIV",{class:!0});var o=y(e);s=L(o,"DIV",{class:!0});var a=y(s);C(r.$$.fragment,a),l=A(a,`
						delete`),a.forEach(m),o.forEach(m),this.h()},h(){p(s,"class","flex flex-row items-center"),p(e,"class","text-rose-500")},m(i,o){v(i,e,o),P(e,s),N(r,s,null),P(s,l),t=!0},p:K,i(i){t||(b(r.$$.fragment,i),t=!0)},o(i){$(r.$$.fragment,i),t=!1},d(i){i&&m(e),O(r)}}}function bt(n){let e,s,r;return e=new Ke({props:{class:"m-2"}}),{c(){D(e.$$.fragment),s=F(`
				copy JSON`)},l(l){C(e.$$.fragment,l),s=A(l,`
				copy JSON`)},m(l,t){N(e,l,t),v(l,s,t),r=!0},p:K,i(l){r||(b(e.$$.fragment,l),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&m(s),O(e,l)}}}function Ce(n){let e,s,r,l;e=new Qe({props:{data:n[0],rounded:!1,type:n[5]}}),e.$on("refresh",n[25]);let t=n[7]&&De(n);return{c(){D(e.$$.fragment),s=U(),t&&t.c(),r=J()},l(i){C(e.$$.fragment,i),s=q(i),t&&t.l(i),r=J()},m(i,o){N(e,i,o),v(i,s,o),t&&t.m(i,o),v(i,r,o),l=!0},p(i,o){const a={};o[0]&1&&(a.data=i[0]),o[0]&32&&(a.type=i[5]),e.$set(a),i[7]?t?(t.p(i,o),o[0]&128&&b(t,1)):(t=De(i),t.c(),b(t,1),t.m(r.parentNode,r)):t&&(ee(),$(t,1,1,()=>{t=null}),te())},i(i){l||(b(e.$$.fragment,i),b(t),l=!0)},o(i){$(e.$$.fragment,i),$(t),l=!1},d(i){i&&(m(s),m(r)),O(e,i),t&&t.d(i)}}}function De(n){let e,s,r=we(n[7]),l=[];for(let i=0;i<r.length;i+=1)l[i]=Ie(Ne(n,r,i));const t=i=>$(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=J()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=J()},m(i,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(i,o);v(i,e,o),s=!0},p(i,o){if(o[0]&2240){r=we(i[7]);let a;for(a=0;a<r.length;a+=1){const f=Ne(i,r,a);l[a]?(l[a].p(f,o),b(l[a],1)):(l[a]=Ie(f),l[a].c(),b(l[a],1),l[a].m(e.parentNode,e))}for(ee(),a=r.length;a<l.length;a+=1)t(a);te()}},i(i){if(!s){for(let o=0;o<r.length;o+=1)b(l[o]);s=!0}},o(i){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)$(l[o]);s=!1},d(i){i&&m(e),Ue(l,i)}}}function kt(n){let e,s,r,l,t=n[31].name+"",i,o,a;return r=new Xe({props:{class:"m-2"}}),{c(){e=j("a"),s=j("div"),D(r.$$.fragment),l=F(`
										add `),i=F(t),this.h()},l(f){e=L(f,"A",{href:!0});var u=y(e);s=L(u,"DIV",{class:!0});var c=y(s);C(r.$$.fragment,c),l=A(c,`
										add `),i=A(c,t),c.forEach(m),u.forEach(m),this.h()},h(){p(s,"class","flex flex-row items-center"),p(e,"href",o=se+"/add?type="+n[31].name+"&apiPostPath="+btoa(n[31].entitySubPath)+"&prefix="+n[6])},m(f,u){v(f,e,u),P(e,s),N(r,s,null),P(s,l),P(s,i),a=!0},p(f,u){(!a||u[0]&128)&&t!==(t=f[31].name+"")&&ne(i,t),(!a||u[0]&192&&o!==(o=se+"/add?type="+f[31].name+"&apiPostPath="+btoa(f[31].entitySubPath)+"&prefix="+f[6]))&&p(e,"href",o)},i(f){a||(b(r.$$.fragment,f),a=!0)},o(f){$(r.$$.fragment,f),a=!1},d(f){f&&m(e),O(r)}}}function Te(n){let e,s;return e=new Ge({props:{dataRaw:n[31].data,type:n[31].name,entity:n[31],pathPrefix:n[6]}}),e.$on("refresh",n[27]),{c(){D(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,l){N(e,r,l),s=!0},p(r,l){const t={};l[0]&128&&(t.dataRaw=r[31].data),l[0]&128&&(t.type=r[31].name),l[0]&128&&(t.entity=r[31]),l[0]&64&&(t.pathPrefix=r[6]),e.$set(t)},i(r){s||(b(e.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),s=!1},d(r){O(e,r)}}}function Ie(n){let e,s,r,l,t,i;function o(){return n[26](n[31])}r=new le({props:{color:"alternative",$$slots:{default:[kt]},$$scope:{ctx:n}}}),r.$on("click",o);let a=n[31].data&&n[31].data.length>0&&Te(n);return{c(){e=j("div"),s=j("div"),D(r.$$.fragment),l=U(),a&&a.c(),t=J(),this.h()},l(f){e=L(f,"DIV",{class:!0});var u=y(e);s=L(u,"DIV",{class:!0});var c=y(s);C(r.$$.fragment,c),c.forEach(m),u.forEach(m),l=q(f),a&&a.l(f),t=J(),this.h()},h(){p(s,"class","flex flex-row h-10"),p(e,"class","flex flex-row m-4 h-8 items-center")},m(f,u){v(f,e,u),P(e,s),N(r,s,null),v(f,l,u),a&&a.m(f,u),v(f,t,u),i=!0},p(f,u){n=f;const c={};u[0]&192|u[1]&8&&(c.$$scope={dirty:u,ctx:n}),r.$set(c),n[31].data&&n[31].data.length>0?a?(a.p(n,u),u[0]&128&&b(a,1)):(a=Te(n),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(ee(),$(a,1,1,()=>{a=null}),te())},i(f){i||(b(r.$$.fragment,f),b(a),i=!0)},o(f){$(r.$$.fragment,f),$(a),i=!1},d(f){f&&(m(e),m(l),m(t)),O(r),a&&a.d(f)}}}function vt(n){var u,c;let e,s,r,l,t,i;document.title=e=((u=n[0])==null?void 0:u.name)??((c=n[0])==null?void 0:c.id)??$e.name;const o=[ct,ut],a=[];function f(d,_){return d[0]?0:1}return l=f(n),t=a[l]=o[l](n),{c(){s=U(),r=j("div"),t.c(),this.h()},l(d){Me("svelte-w0arux",document.head).forEach(m),s=q(d),r=L(d,"DIV",{class:!0});var S=y(r);t.l(S),S.forEach(m),this.h()},h(){p(r,"class","mb-2")},m(d,_){v(d,s,_),v(d,r,_),a[l].m(r,null),i=!0},p(d,_){var T,I;(!i||_[0]&1)&&e!==(e=((T=d[0])==null?void 0:T.name)??((I=d[0])==null?void 0:I.id)??$e.name)&&(document.title=e);let S=l;l=f(d),l===S?a[l].p(d,_):(ee(),$(a[S],1,1,()=>{a[S]=null}),te(),t=a[l],t?t.p(d,_):(t=a[l]=o[l](d),t.c()),b(t,1),t.m(r,null))},i(d){i||(b(t),i=!0)},o(d){$(t),i=!1},d(d){d&&(m(s),m(r)),a[l].d()}}}function wt(n,e,s){let r;He(n,Ye,w=>s(16,r=w));let{data:l={}}=e,t="",i="",o=!1,a,f,u="",c="",d,_,S=!1;qe(()=>{S=!0,I()});function T(){const w=new URL(window.location.toString());o==!0?w.searchParams.set("isEdited","true"):w.searchParams.delete("isEdited"),history.pushState(null,"",w)}async function I(){var x;if(!S)return;s(0,l=void 0),s(3,o=!1);const w=new URLSearchParams(window.location.search);s(5,f=w.get("type")??"none"),s(4,a=w.get("id")??"none");let V=w.get("isEdited")??"";s(3,o=V=="true"),u=w.get("prefix")??"",f=="upstreams"&&s(6,c=`/upstreams/${a}`);{s(0,l=void 0);const ae=await(await oe()).findRecord(f,a,u);ae.ok||(ie(`failed to fetch ${f} with id ${a}. Status code: ${ae.code}`),await de(`${se}/entities?type=services`)),s(0,l=ae.data),s(0,l=lt(l,rt)),s(2,i=JSON.stringify(l,void 0,2)),s(1,t=i),d=Ee.find(z=>z.name==f),s(7,_=Ee.filter(z=>{var re;return(re=d==null?void 0:d.subEntities)==null?void 0:re.includes(z.name)}).map(z=>({...z,entitySubPath:`${f}/${a}/${z.name}`})));for(const z of _){const re=await(await oe()).findAll(z.name,{},`/${f}/${a}`);if(!re.ok){ie(`failed to load ${z.name}`);continue}z.data=(x=re.data)==null?void 0:x.data,s(7,_)}}h()}async function Q(w,V,x){if(!confirm(`Please confirm deletion of '${x}'`))return;const z=await(await oe()).deleteRecord(w,V,u);z.ok?(me("deleted"),de(`${se}/entities?type=${f}&prefix=${u}`)):ie(`failed to delete. ${z.err}`)}function Y(){let w;try{w=JSON.parse(i)}catch(V){ie(`Failed to parse JSON. ${V.message}`);return}s(2,i=JSON.stringify(w,void 0,2)),h(),me("json is valid")}async function B(){var x;if(!confirm("confirm save?"))return;Y();const V=await(await oe()).updateRecord(f,a,JSON.parse(i),u);if(console.log(V),V.ok)me("entity successfully updated");else{ie(`API error (${V.code}): `+(((x=V.errTyped)==null?void 0:x.message)??V.err),!0,15e3);return}s(3,o=!o),s(3,o),s(0,l=JSON.parse(i)),s(1,t=i)}let Z,k;async function h(){s(2,i=i.replace(/\t/g,"  ")),s(2,i=i.replace(/\s\n$/g,`
 `)),k&&(s(9,k.textContent=i,k),globalThis.Prism.highlightElement(k))}const E=()=>{s(3,o=!o),T(),h()},R=async()=>await Q(f,a,l.name??l.id),M=()=>{xe(t)},g=async()=>await B();function ze(w){ve[w?"unshift":"push"](()=>{k=w,s(9,k)})}function Le(w){ve[w?"unshift":"push"](()=>{Z=w,s(8,Z)})}function je(){i=this.value,s(2,i)}const Re=()=>{h()},Ve=()=>{I()},We=w=>{de(`${se}/add?type=${w.name}&apiPostPath=${btoa(w.entitySubPath)}&prefix=${c}`)},Ae=async()=>await I();return n.$$set=w=>{"data"in w&&s(0,l=w.data)},n.$$.update=()=>{n.$$.dirty[0]&65536&&I()},[l,t,i,o,a,f,c,_,Z,k,T,I,Q,Y,B,h,r,E,R,M,g,ze,Le,je,Re,Ve,We,Ae]}class $t extends he{constructor(e){super(),pe(this,e,wt,vt,_e,{data:0},null,[-1,-1])}}function Et(n){let e,s;return e=new $t({}),{c(){D(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,l){N(e,r,l),s=!0},p:K,i(r){s||(b(e.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),s=!1},d(r){O(e,r)}}}class Vt extends he{constructor(e){super(),pe(this,e,null,Et,_e,{})}}export{Vt as component};
