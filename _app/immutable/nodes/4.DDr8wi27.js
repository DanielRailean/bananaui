import{s as Ee,v as P,i as y,n as H,f as g,w as fe,x as Be,y as Q,z as de,A as C,J as T,K as U,b as E,l as _,L as X,h as p,u as L,r as ye,t as D,d as W,j as V,a as $,e as R,M as Ce,g as ee,c as j,k as Ae,o as Pe}from"../chunks/scheduler.COIS6eYE.js";import{S as Le,i as Me,c as le,a as ie,m as se,b as N,e as Te,t as O,d as ae,g as Ue}from"../chunks/index.e2hCl6E0.js";import{s as ue,k as De,p as ce}from"../chunks/config.DgbcnDvX.js";import{C as We,A as Ie}from"../chunks/ArrayWrap.DHOoCuyV.js";import{g as ze,c as he,d as _e,i as me,a as Re}from"../chunks/util.C36Z39_g.js";import{t as Y}from"../chunks/bundle-mjs.D696Ktp4.js";import{b as re,g as je}from"../chunks/entry.TKLVW_l0.js";import{D as G,t as te}from"../chunks/stores.BvYz139z.js";import{c as be,a as ge}from"../chunks/requests.A_Fh-Qvi.js";import{p as Se}from"../chunks/stores.BQBxaDan.js";function Ne(l){let e,r,i,a,t,s=l[4].id&&l[4].title&&ve(l),m=l[6].id&&l[6].desc&&ke(l),c=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:l[2]},l[11],{class:a=Y("shrink-0",l[9][l[0]??"md"],l[12].class)},{role:l[1]},{"aria-label":l[7]},{"aria-describedby":t=l[8]?l[10]:void 0},{viewBox:"0 0 24 24"}],d={};for(let n=0;n<c.length;n+=1)d=Q(d,c[n]);return{c(){e=T("svg"),s&&s.c(),r=P(),m&&m.c(),i=T("path"),this.h()},l(n){e=U(n,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var u=E(e);s&&s.l(u),r=P(),m&&m.l(u),i=U(u,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),E(i).forEach(g),u.forEach(g),this.h()},h(){_(i,"stroke","currentColor"),_(i,"stroke-linecap","round"),_(i,"stroke-linejoin","round"),_(i,"stroke-width",l[5]),_(i,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),X(e,d)},m(n,u){y(n,e,u),s&&s.m(e,null),p(e,r),m&&m.m(e,null),p(e,i)},p(n,u){n[4].id&&n[4].title?s?s.p(n,u):(s=ve(n),s.c(),s.m(e,r)):s&&(s.d(1),s=null),n[6].id&&n[6].desc?m?m.p(n,u):(m=ke(n),m.c(),m.m(e,i)):m&&(m.d(1),m=null),u&32&&_(i,"stroke-width",n[5]),X(e,d=ze(c,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},u&4&&{color:n[2]},u&2048&&n[11],u&4097&&a!==(a=Y("shrink-0",n[9][n[0]??"md"],n[12].class))&&{class:a},u&2&&{role:n[1]},u&128&&{"aria-label":n[7]},u&256&&t!==(t=n[8]?n[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(n){n&&g(e),s&&s.d(),m&&m.d()}}}function Oe(l){let e,r,i,a,t,s,m,c=l[4].id&&l[4].title&&pe(l),d=l[6].id&&l[6].desc&&we(l),n=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:l[2]},l[11],{class:a=Y("shrink-0",l[9][l[0]??"md"],l[12].class)},{role:l[1]},{"aria-label":l[7]},{"aria-describedby":t=l[8]?l[10]:void 0},{viewBox:"0 0 24 24"}],u={};for(let f=0;f<n.length;f+=1)u=Q(u,n[f]);return{c(){e=T("svg"),c&&c.c(),r=P(),d&&d.c(),i=T("path"),this.h()},l(f){e=U(f,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var b=E(e);c&&c.l(b),r=P(),d&&d.l(b),i=U(b,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),E(i).forEach(g),b.forEach(g),this.h()},h(){_(i,"stroke","currentColor"),_(i,"stroke-linecap","round"),_(i,"stroke-linejoin","round"),_(i,"stroke-width",l[5]),_(i,"d","M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"),X(e,u)},m(f,b){y(f,e,b),c&&c.m(e,null),p(e,r),d&&d.m(e,null),p(e,i),s||(m=[L(e,"click",l[13]),L(e,"keydown",l[14]),L(e,"keyup",l[15]),L(e,"focus",l[16]),L(e,"blur",l[17]),L(e,"mouseenter",l[18]),L(e,"mouseleave",l[19]),L(e,"mouseover",l[20]),L(e,"mouseout",l[21])],s=!0)},p(f,b){f[4].id&&f[4].title?c?c.p(f,b):(c=pe(f),c.c(),c.m(e,r)):c&&(c.d(1),c=null),f[6].id&&f[6].desc?d?d.p(f,b):(d=we(f),d.c(),d.m(e,i)):d&&(d.d(1),d=null),b&32&&_(i,"stroke-width",f[5]),X(e,u=ze(n,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},b&4&&{color:f[2]},b&2048&&f[11],b&4097&&a!==(a=Y("shrink-0",f[9][f[0]??"md"],f[12].class))&&{class:a},b&2&&{role:f[1]},b&128&&{"aria-label":f[7]},b&256&&t!==(t=f[8]?f[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(f){f&&g(e),c&&c.d(),d&&d.d(),s=!1,ye(m)}}}function ve(l){let e,r=l[4].title+"",i,a;return{c(){e=T("title"),i=D(r),this.h()},l(t){e=U(t,"title",{id:!0});var s=E(e);i=W(s,r),s.forEach(g),this.h()},h(){_(e,"id",a=l[4].id)},m(t,s){y(t,e,s),p(e,i)},p(t,s){s&16&&r!==(r=t[4].title+"")&&V(i,r),s&16&&a!==(a=t[4].id)&&_(e,"id",a)},d(t){t&&g(e)}}}function ke(l){let e,r=l[6].desc+"",i,a;return{c(){e=T("desc"),i=D(r),this.h()},l(t){e=U(t,"desc",{id:!0});var s=E(e);i=W(s,r),s.forEach(g),this.h()},h(){_(e,"id",a=l[6].id)},m(t,s){y(t,e,s),p(e,i)},p(t,s){s&64&&r!==(r=t[6].desc+"")&&V(i,r),s&64&&a!==(a=t[6].id)&&_(e,"id",a)},d(t){t&&g(e)}}}function pe(l){let e,r=l[4].title+"",i,a;return{c(){e=T("title"),i=D(r),this.h()},l(t){e=U(t,"title",{id:!0});var s=E(e);i=W(s,r),s.forEach(g),this.h()},h(){_(e,"id",a=l[4].id)},m(t,s){y(t,e,s),p(e,i)},p(t,s){s&16&&r!==(r=t[4].title+"")&&V(i,r),s&16&&a!==(a=t[4].id)&&_(e,"id",a)},d(t){t&&g(e)}}}function we(l){let e,r=l[6].desc+"",i,a;return{c(){e=T("desc"),i=D(r),this.h()},l(t){e=U(t,"desc",{id:!0});var s=E(e);i=W(s,r),s.forEach(g),this.h()},h(){_(e,"id",a=l[6].id)},m(t,s){y(t,e,s),p(e,i)},p(t,s){s&64&&r!==(r=t[6].desc+"")&&V(i,r),s&64&&a!==(a=t[6].id)&&_(e,"id",a)},d(t){t&&g(e)}}}function Ve(l){let e;function r(t,s){return t[3]?Oe:Ne}let i=r(l),a=i(l);return{c(){a.c(),e=P()},l(t){a.l(t),e=P()},m(t,s){a.m(t,s),y(t,e,s)},p(t,[s]){i===(i=r(t))&&a?a.p(t,s):(a.d(1),a=i(t),a&&(a.c(),a.m(e.parentNode,e)))},i:H,o:H,d(t){t&&g(e),a.d(t)}}}function qe(l,e,r){const i=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let a=fe(e,i);const t=Be("iconCtx")??{},s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:m=t.size||"md"}=e,{role:c=t.role||"img"}=e,{color:d=t.color||"currentColor"}=e,{withEvents:n=t.withEvents||!1}=e,{title:u={}}=e,{strokeWidth:f=t.strokeWidth||"2"}=e,{desc:b={}}=e,A=`${u.id||""} ${b.id||""}`,M=!1,{ariaLabel:v="refresh outline"}=e;function w(o){C.call(this,l,o)}function z(o){C.call(this,l,o)}function k(o){C.call(this,l,o)}function I(o){C.call(this,l,o)}function q(o){C.call(this,l,o)}function F(o){C.call(this,l,o)}function B(o){C.call(this,l,o)}function J(o){C.call(this,l,o)}function h(o){C.call(this,l,o)}return l.$$set=o=>{r(12,e=Q(Q({},e),de(o))),r(11,a=fe(e,i)),"size"in o&&r(0,m=o.size),"role"in o&&r(1,c=o.role),"color"in o&&r(2,d=o.color),"withEvents"in o&&r(3,n=o.withEvents),"title"in o&&r(4,u=o.title),"strokeWidth"in o&&r(5,f=o.strokeWidth),"desc"in o&&r(6,b=o.desc),"ariaLabel"in o&&r(7,v=o.ariaLabel)},l.$$.update=()=>{l.$$.dirty&80&&(u.id||b.id?r(8,M=!0):r(8,M=!1))},e=de(e),[m,c,d,n,u,f,b,v,M,s,A,a,e,w,z,k,I,q,F,B,J,h]}class Fe extends Le{constructor(e){super(),Me(this,e,qe,Ve,Ee,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Je(l){let e,r,i=(l[1]??"")+"",a;return{c(){e=R("p"),r=D("Loading "),a=D(i),this.h()},l(t){e=j(t,"P",{class:!0});var s=E(e);r=W(s,"Loading "),a=W(s,i),s.forEach(g),this.h()},h(){_(e,"class","pl-5 pb-4 text-xl font-light")},m(t,s){y(t,e,s),p(e,r),p(e,a)},p(t,s){s&2&&i!==(i=(t[1]??"")+"")&&V(a,i)},i:H,o:H,d(t){t&&g(e)}}}function Ke(l){let e,r;return e=new Ie({props:{dataRaw:l[0],type:l[1],entity:l[2]}}),e.$on("refresh",l[7]),{c(){le(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,a){se(e,i,a),r=!0},p(i,a){const t={};a&1&&(t.dataRaw=i[0]),a&2&&(t.type=i[1]),a&4&&(t.entity=i[2]),e.$set(t)},i(i){r||(O(e.$$.fragment,i),r=!0)},o(i){N(e.$$.fragment,i),r=!1},d(i){ae(e,i)}}}function Ge(l){let e,r,i,a,t,s,m,c,d,n,u,f,b,A,M,v,w,z,k,I,q;document.title=e=ue.name+" - "+he(l[1]),s=new Fe({}),f=new We({props:{class:"mr-[2px]"}});const F=[Ke,Je],B=[];function J(h,o){return h[0]?0:1}return v=J(l),w=B[v]=F[v](l),{c(){r=$(),i=R("div"),a=R("div"),t=R("button"),le(s.$$.fragment),m=D(`
			Refresh`),c=$(),d=R("button"),n=R("a"),u=R("div"),le(f.$$.fragment),b=D(`
					Add`),M=$(),w.c(),z=P(),this.h()},l(h){Ce("svelte-f4u3pm",document.head).forEach(g),r=ee(h),i=j(h,"DIV",{class:!0});var S=E(i);a=j(S,"DIV",{class:!0});var K=E(a);t=j(K,"BUTTON",{color:!0,class:!0});var Z=E(t);ie(s.$$.fragment,Z),m=W(Z,`
			Refresh`),Z.forEach(g),c=ee(K),d=j(K,"BUTTON",{class:!0,color:!0});var oe=E(d);n=j(oe,"A",{href:!0});var ne=E(n);u=j(ne,"DIV",{class:!0});var x=E(u);ie(f.$$.fragment,x),b=W(x,`
					Add`),x.forEach(g),ne.forEach(g),oe.forEach(g),K.forEach(g),S.forEach(g),M=ee(h),w.l(h),z=P(),this.h()},h(){_(t,"color","alternative"),_(t,"class","flex flex-row mr-2 text-emerald-600 items-center"),_(u,"class","flex flex-row items-center space-x-1"),_(n,"href",A=re+"/add?type="+l[1]),_(d,"class","flex flex-row mr-2 text-blue-700 items-center"),_(d,"color","alternative"),_(a,"class","flex flex-row mb-2 h-10"),_(i,"class","flex flex-col m-4 mb-3 font-light text-2xl")},m(h,o){y(h,r,o),y(h,i,o),p(i,a),p(a,t),se(s,t,null),p(t,m),p(a,c),p(a,d),p(d,n),p(n,u),se(f,u,null),p(u,b),y(h,M,o),B[v].m(h,o),y(h,z,o),k=!0,I||(q=[L(t,"click",l[5]),L(d,"click",l[6])],I=!0)},p(h,[o]){(!k||o&2)&&e!==(e=ue.name+" - "+he(h[1]))&&(document.title=e),(!k||o&2&&A!==(A=re+"/add?type="+h[1]))&&_(n,"href",A);let S=v;v=J(h),v===S?B[v].p(h,o):(Ue(),N(B[S],1,1,()=>{B[S]=null}),Te(),w=B[v],w?w.p(h,o):(w=B[v]=F[v](h),w.c()),O(w,1),w.m(z.parentNode,z))},i(h){k||(O(s.$$.fragment,h),O(f.$$.fragment,h),O(w),k=!0)},o(h){N(s.$$.fragment,h),N(f.$$.fragment,h),N(w),k=!1},d(h){h&&(g(r),g(i),g(M),g(z)),ae(s),ae(f),B[v].d(h),I=!1,ye(q)}}}function He(l,e,r){let i;Ae(l,Se,b=>r(4,i=b));let a,t,s,m=!1;Pe(()=>{m=!0,d()});let c;async function d(b=!1){if(!m)return;const A=new URLSearchParams(window.location.search);c=G.now();const M=t;r(1,t=A.get("type")??"none");let v=!1,w=be.get(t);M!=t&&(r(0,a=w),w?(v=!1,te.set(t+G.now().toUnixInteger())):v=!0);try{if(r(2,s=De.find(I=>I.name==t)),!s)return;let k=await(await ge()).findAll(s.apiPath,{});r(0,a=k.data.data);var z=c;for(await _e(ce);k.data.next&&(k=await(await ge()).request(k.data.next??"",void 0,void 0),z==c);)k.ok&&(r(0,a=a.concat(k.data.data)),v&&te.set(t+G.now().toUnixInteger())),await _e(ce);te.set(t+G.now().toUnixInteger()),be.set(t,a),b&&me("refresh finished!")}catch(k){console.log(k),Re({message:`Failed fetching the ${t}. ${k.message?k.message:""}`})}}const n=()=>{d(!0),me("refresh started!")},u=()=>{je(`${re}/add?type=${t}`)},f=async()=>await d();return l.$$.update=()=>{l.$$.dirty&16&&d()},[a,t,s,d,i,n,u,f]}class st extends Le{constructor(e){super(),Me(this,e,He,Ge,Ee,{})}}export{st as component};
