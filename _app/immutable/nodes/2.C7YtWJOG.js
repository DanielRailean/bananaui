import{s as I,d as _,i as S,b as $,l as k,c as v,e as b,g as T,h as x,j as D,o as F,n as w,f as K,t as O}from"../chunks/scheduler.BcKSNpAY.js";import{S as V,i as q,d as j,t as g,a as h,c as H,m as E,b as P,e as C,g as M}from"../chunks/index.DxnxjsIE.js";import{a as W}from"../chunks/toastStore.DQsilM7O.js";import{T as z}from"../chunks/treeWrapper.DJgl2ijR.js";import{a as A}from"../chunks/requests.DNW2VWKr.js";import{S as B}from"../chunks/Spinner.D7KB-26a.js";function G(l){let e,r;return e=new B({props:{text:"loading control plane info"}}),{c(){C(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){E(e,t,n),r=!0},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){j(e,t)}}}function J(l){let e;return{c(){e=O("Kong Control-Plane info")},l(r){e=K(r,"Kong Control-Plane info")},m(r,t){S(r,e,t)},i:w,o:w,d(r){r&&_(e)}}}function L(l){let e,r,t,n,a,m,s,f;const d=[J,G],c=[];function y(o,i){return o[0]?0:1}return n=y(l),a=c[n]=d[n](l),s=new z({props:{data:l[0],expandFields:[]}}),{c(){e=x("div"),r=x("h1"),t=x("div"),a.c(),m=D(),C(s.$$.fragment),this.h()},l(o){e=v(o,"DIV",{});var i=b(e);r=v(i,"H1",{class:!0});var p=b(r);t=v(p,"DIV",{class:!0});var u=b(t);a.l(u),u.forEach(_),p.forEach(_),m=T(i),P(s.$$.fragment,i),i.forEach(_),this.h()},h(){k(t,"class","flex flex-row items-center justify-center"),k(r,"class","text-xl text-center p-2")},m(o,i){S(o,e,i),$(e,r),$(r,t),c[n].m(t,null),$(e,m),E(s,e,null),f=!0},p(o,[i]){let p=n;n=y(o),n!==p&&(M(),g(c[p],1,1,()=>{c[p]=null}),H(),a=c[n],a||(a=c[n]=d[n](o),a.c()),h(a,1),a.m(t,null));const u={};i&1&&(u.data=o[0]),s.$set(u)},i(o){f||(h(a),h(s.$$.fragment,o),f=!0)},o(o){g(a),g(s.$$.fragment,o),f=!1},d(o){o&&_(e),c[n].d(),j(s)}}}function N(l,e,r){let t;return F(async()=>{try{let a=(await(await A()).getInfo()).data;const m=Object.entries((a==null?void 0:a.plugins.available_on_server)??{}).sort((f,d)=>d[1].priority-f[1].priority),s=Object.fromEntries(m);a.plugins.available_on_server=s,r(0,t=a)}catch(n){W({message:`Failed fetching the info. ${n.message?n.message:""}`})}}),[t]}class ee extends V{constructor(e){super(),q(this,e,N,L,I,{})}}export{ee as component};
