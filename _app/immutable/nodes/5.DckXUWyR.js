import{s as me,n as C,d as _,i as v,v as O,w as pe,x as Ae,y as ne,z as be,F as M,r as Be,l as h,J as oe,b as y,q as A,K as G,e as S,L as Q,a as ie,f as V,t as F,M as Ve,g as H,c as J,j as q,h as L,k as Fe,o as Me,p as ge,u as He,R as ke,S as qe}from"../chunks/scheduler.O70vblwn.js";import{S as _e,i as he,d as N,t as k,a as g,g as ee,e as te,m as D,c as T,b as B}from"../chunks/index.CxlHvX_L.js";import{e as ve}from"../chunks/each.BHQ5Fgpm.js";import{T as Ze,F as Ke,C as Ue,A as Xe}from"../chunks/ArrayWrap.DKmg2eOE.js";import{B as le}from"../chunks/Button.Bvtc6_gv.js";import{T as Ge}from"../chunks/treeWrapper.DVeosC7t.js";import{a as ae}from"../chunks/requests.CuCNY5B3.js";import{g as ce,b as se}from"../chunks/entry.DPp5jgJk.js";import{p as Qe}from"../chunks/stores.CAY-jcFE.js";import{g as ze,e as re,c as de,w as Ye}from"../chunks/util.PhYJd6D_.js";import{t as fe}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as xe,F as et}from"../chunks/PaletteOutline.CAnY32jS.js";import{a as tt,k as we,f as lt}from"../chunks/config.B2KbV0fc.js";function rt(a){let e,i,l,r,t,s=a[4].id&&a[4].title&&$e(a),o=a[6].id&&a[6].desc&&Ee(a),n=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:r=fe("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":t=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let u=0;u<n.length;u+=1)f=ne(f,n[u]);return{c(){e=Q("svg"),s&&s.c(),i=O(),o&&o.c(),l=Q("path"),this.h()},l(u){e=G(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=S(e);s&&s.l(m),i=O(),o&&o.l(m),l=G(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(_),m.forEach(_),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",a[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),oe(e,f)},m(u,m){v(u,e,m),s&&s.m(e,null),y(e,i),o&&o.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?s?s.p(u,m):(s=$e(u),s.c(),s.m(e,i)):s&&(s.d(1),s=null),u[6].id&&u[6].desc?o?o.p(u,m):(o=Ee(u),o.c(),o.m(e,l)):o&&(o.d(1),o=null),m&32&&h(l,"stroke-width",u[5]),oe(e,f=ze(n,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&r!==(r=fe("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:r},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&_(e),s&&s.d(),o&&o.d()}}}function st(a){let e,i,l,r,t,s,o,n=a[4].id&&a[4].title&&ye(a),f=a[6].id&&a[6].desc&&Pe(a),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:r=fe("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":t=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let c=0;c<u.length;c+=1)m=ne(m,u[c]);return{c(){e=Q("svg"),n&&n.c(),i=O(),f&&f.c(),l=Q("path"),this.h()},l(c){e=G(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var d=S(e);n&&n.l(d),i=O(),f&&f.l(d),l=G(d,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),S(l).forEach(_),d.forEach(_),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",a[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),oe(e,m)},m(c,d){v(c,e,d),n&&n.m(e,null),y(e,i),f&&f.m(e,null),y(e,l),s||(o=[A(e,"click",a[13]),A(e,"keydown",a[14]),A(e,"keyup",a[15]),A(e,"focus",a[16]),A(e,"blur",a[17]),A(e,"mouseenter",a[18]),A(e,"mouseleave",a[19]),A(e,"mouseover",a[20]),A(e,"mouseout",a[21])],s=!0)},p(c,d){c[4].id&&c[4].title?n?n.p(c,d):(n=ye(c),n.c(),n.m(e,i)):n&&(n.d(1),n=null),c[6].id&&c[6].desc?f?f.p(c,d):(f=Pe(c),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d&32&&h(l,"stroke-width",c[5]),oe(e,m=ze(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},d&4&&{color:c[2]},d&2048&&c[11],d&4097&&r!==(r=fe("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:r},d&2&&{role:c[1]},d&128&&{"aria-label":c[7]},d&256&&t!==(t=c[8]?c[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(c){c&&_(e),n&&n.d(),f&&f.d(),s=!1,Be(o)}}}function $e(a){let e,i=a[4].title+"",l,r;return{c(){e=Q("title"),l=F(i),this.h()},l(t){e=G(t,"title",{id:!0});var s=S(e);l=V(s,i),s.forEach(_),this.h()},h(){h(e,"id",r=a[4].id)},m(t,s){v(t,e,s),y(e,l)},p(t,s){s&16&&i!==(i=t[4].title+"")&&ie(l,i),s&16&&r!==(r=t[4].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function Ee(a){let e,i=a[6].desc+"",l,r;return{c(){e=Q("desc"),l=F(i),this.h()},l(t){e=G(t,"desc",{id:!0});var s=S(e);l=V(s,i),s.forEach(_),this.h()},h(){h(e,"id",r=a[6].id)},m(t,s){v(t,e,s),y(e,l)},p(t,s){s&64&&i!==(i=t[6].desc+"")&&ie(l,i),s&64&&r!==(r=t[6].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function ye(a){let e,i=a[4].title+"",l,r;return{c(){e=Q("title"),l=F(i),this.h()},l(t){e=G(t,"title",{id:!0});var s=S(e);l=V(s,i),s.forEach(_),this.h()},h(){h(e,"id",r=a[4].id)},m(t,s){v(t,e,s),y(e,l)},p(t,s){s&16&&i!==(i=t[4].title+"")&&ie(l,i),s&16&&r!==(r=t[4].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function Pe(a){let e,i=a[6].desc+"",l,r;return{c(){e=Q("desc"),l=F(i),this.h()},l(t){e=G(t,"desc",{id:!0});var s=S(e);l=V(s,i),s.forEach(_),this.h()},h(){h(e,"id",r=a[6].id)},m(t,s){v(t,e,s),y(e,l)},p(t,s){s&64&&i!==(i=t[6].desc+"")&&ie(l,i),s&64&&r!==(r=t[6].id)&&h(e,"id",r)},d(t){t&&_(e)}}}function it(a){let e;function i(t,s){return t[3]?st:rt}let l=i(a),r=l(a);return{c(){r.c(),e=O()},l(t){r.l(t),e=O()},m(t,s){r.m(t,s),v(t,e,s)},p(t,[s]){l===(l=i(t))&&r?r.p(t,s):(r.d(1),r=l(t),r&&(r.c(),r.m(e.parentNode,e)))},i:C,o:C,d(t){t&&_(e),r.d(t)}}}function at(a,e,i){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let r=pe(e,l);const t=Ae("iconCtx")??{},s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:n=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:u=t.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:c=t.strokeWidth||"2"}=e,{desc:d={}}=e,$=`${m.id||""} ${d.id||""}`,P=!1,{ariaLabel:Z="edit outline"}=e;function Y(b){M.call(this,a,b)}function z(b){M.call(this,a,b)}function K(b){M.call(this,a,b)}function p(b){M.call(this,a,b)}function E(b){M.call(this,a,b)}function R(b){M.call(this,a,b)}function j(b){M.call(this,a,b)}function x(b){M.call(this,a,b)}function ue(b){M.call(this,a,b)}return a.$$set=b=>{i(12,e=ne(ne({},e),be(b))),i(11,r=pe(e,l)),"size"in b&&i(0,o=b.size),"role"in b&&i(1,n=b.role),"color"in b&&i(2,f=b.color),"withEvents"in b&&i(3,u=b.withEvents),"title"in b&&i(4,m=b.title),"strokeWidth"in b&&i(5,c=b.strokeWidth),"desc"in b&&i(6,d=b.desc),"ariaLabel"in b&&i(7,Z=b.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(m.id||d.id?i(8,P=!0):i(8,P=!1))},e=be(e),[o,n,f,u,m,c,d,Z,P,s,$,r,e,Y,z,K,p,E,R,j,x,ue]}class nt extends _e{constructor(e){super(),he(this,e,at,it,me,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Se(a,e,i){const l=a.slice();return l[30]=e[i],l}function Oe(a){return document.title=a[0].name??a[0].id??a[5],{c:C,l:C,m:C,d:C}}function ot(a){let e,i,l;return e=new nt({props:{class:"m-2"}}),{c(){B(e.$$.fragment),i=F("edit")},l(r){T(e.$$.fragment,r),i=V(r,"edit")},m(r,t){D(e,r,t),v(r,i,t),l=!0},p:C,i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){k(e.$$.fragment,r),l=!1},d(r){r&&_(i),N(e,r)}}}function ft(a){let e,i,l,r;return e=new le({props:{class:"h-10 m-1",color:"blue",disabled:a[1]==a[2],$$slots:{default:[ct]},$$scope:{ctx:a}}}),e.$on("click",a[12]),l=new le({props:{class:"h-10 m-1",disabled:a[1]==a[2],color:"green",$$slots:{default:[dt]},$$scope:{ctx:a}}}),l.$on("click",a[19]),{c(){B(e.$$.fragment),i=q(),B(l.$$.fragment)},l(t){T(e.$$.fragment,t),i=H(t),T(l.$$.fragment,t)},m(t,s){D(e,t,s),v(t,i,s),D(l,t,s),r=!0},p(t,s){const o={};s[0]&6&&(o.disabled=t[1]==t[2]),s[1]&4&&(o.$$scope={dirty:s,ctx:t}),e.$set(o);const n={};s[0]&6&&(n.disabled=t[1]==t[2]),s[1]&4&&(n.$$scope={dirty:s,ctx:t}),l.$set(n)},i(t){r||(g(e.$$.fragment,t),g(l.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),r=!1},d(t){t&&_(i),N(e,t),N(l,t)}}}function ut(a){let e,i,l,r;return e=new le({props:{class:"h-10 m-1",title:"delete",color:"alternative",$$slots:{default:[mt]},$$scope:{ctx:a}}}),e.$on("click",a[17]),l=new le({props:{color:"alternative",class:"h-10 m-1",$$slots:{default:[_t]},$$scope:{ctx:a}}}),l.$on("click",a[18]),{c(){B(e.$$.fragment),i=q(),B(l.$$.fragment)},l(t){T(e.$$.fragment,t),i=H(t),T(l.$$.fragment,t)},m(t,s){D(e,t,s),v(t,i,s),D(l,t,s),r=!0},p(t,s){const o={};s[1]&4&&(o.$$scope={dirty:s,ctx:t}),e.$set(o);const n={};s[1]&4&&(n.$$scope={dirty:s,ctx:t}),l.$set(n)},i(t){r||(g(e.$$.fragment,t),g(l.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),r=!1},d(t){t&&_(i),N(e,t),N(l,t)}}}function ct(a){let e,i,l;return e=new xe({props:{class:"m-2"}}),{c(){B(e.$$.fragment),i=F(`
				format and validate JSON`)},l(r){T(e.$$.fragment,r),i=V(r,`
				format and validate JSON`)},m(r,t){D(e,r,t),v(r,i,t),l=!0},p:C,i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){k(e.$$.fragment,r),l=!1},d(r){r&&_(i),N(e,r)}}}function dt(a){let e,i,l;return e=new et({props:{class:"m-2"}}),{c(){B(e.$$.fragment),i=F(`
				save`)},l(r){T(e.$$.fragment,r),i=V(r,`
				save`)},m(r,t){D(e,r,t),v(r,i,t),l=!0},p:C,i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){k(e.$$.fragment,r),l=!1},d(r){r&&_(i),N(e,r)}}}function mt(a){let e,i,l,r,t;return l=new Ze({props:{class:"m-1"}}),{c(){e=L("div"),i=L("div"),B(l.$$.fragment),r=F(`
						delete`),this.h()},l(s){e=J(s,"DIV",{class:!0});var o=S(e);i=J(o,"DIV",{class:!0});var n=S(i);T(l.$$.fragment,n),r=V(n,`
						delete`),n.forEach(_),o.forEach(_),this.h()},h(){h(i,"class","flex flex-row items-center"),h(e,"class","text-rose-500")},m(s,o){v(s,e,o),y(e,i),D(l,i,null),y(i,r),t=!0},p:C,i(s){t||(g(l.$$.fragment,s),t=!0)},o(s){k(l.$$.fragment,s),t=!1},d(s){s&&_(e),N(l)}}}function _t(a){let e,i,l;return e=new Ke({props:{class:"m-2"}}),{c(){B(e.$$.fragment),i=F(`
				copy`)},l(r){T(e.$$.fragment,r),i=V(r,`
				copy`)},m(r,t){D(e,r,t),v(r,i,t),l=!0},p:C,i(r){l||(g(e.$$.fragment,r),l=!0)},o(r){k(e.$$.fragment,r),l=!1},d(r){r&&_(i),N(e,r)}}}function ht(a){let e,i="Loading ...";return{c(){e=L("h2"),e.textContent=i,this.h()},l(l){e=J(l,"H2",{class:!0,"data-svelte-h":!0}),He(e)!=="svelte-wq8tmm"&&(e.textContent=i),this.h()},h(){h(e,"class","text-xl text-center")},m(l,r){v(l,e,r)},p:C,i:C,o:C,d(l){l&&_(e)}}}function pt(a){let e,i,l,r,t,s,o,n,f,u,m,c=!a[3]&&Ce(a);return{c(){e=L("div"),i=L("pre"),l=L("code"),r=q(),t=L("textarea"),o=q(),c&&c.c(),n=O(),this.h()},l(d){e=J(d,"DIV",{class:!0});var $=S(e);i=J($,"PRE",{class:!0});var P=S(i);l=J(P,"CODE",{class:!0}),S(l).forEach(_),P.forEach(_),r=H($),t=J($,"TEXTAREA",{spellcheck:!0,wrap:!0,autocorrect:!0,autocapitalize:!0,translate:!0,class:!0}),S(t).forEach(_),$.forEach(_),o=H(d),c&&c.l(d),n=O(),this.h()},h(){h(l,"class","svelte-1c016cv"),h(i,"class","language-json svelte-1c016cv"),h(t,"spellcheck","false"),h(t,"wrap","hard"),h(t,"autocorrect","off"),h(t,"autocapitalize","off"),h(t,"translate","no"),h(t,"class","relative svelte-1c016cv"),h(e,"class",s="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(a[3]?"grid":"hidden")+" svelte-1c016cv")},m(d,$){v(d,e,$),y(e,i),y(i,l),a[20](l),y(e,r),y(e,t),a[21](t),ge(t,a[2]),v(d,o,$),c&&c.m(d,$),v(d,n,$),f=!0,u||(m=[A(t,"input",a[22]),A(t,"input",a[23])],u=!0)},p(d,$){$[0]&4&&ge(t,d[2]),(!f||$[0]&8&&s!==(s="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(d[3]?"grid":"hidden")+" svelte-1c016cv"))&&h(e,"class",s),d[3]?c&&(ee(),k(c,1,1,()=>{c=null}),te()):c?(c.p(d,$),$[0]&8&&g(c,1)):(c=Ce(d),c.c(),g(c,1),c.m(n.parentNode,n))},i(d){f||(g(c),f=!0)},o(d){k(c),f=!1},d(d){d&&(_(e),_(o),_(n)),a[20](null),a[21](null),c&&c.d(d),u=!1,Be(m)}}}function Ce(a){let e,i,l,r;e=new Ge({props:{data:a[0],rounded:!1,type:a[5]}}),e.$on("refresh",a[24]);let t=a[7]&&Ne(a);return{c(){B(e.$$.fragment),i=q(),t&&t.c(),l=O()},l(s){T(e.$$.fragment,s),i=H(s),t&&t.l(s),l=O()},m(s,o){D(e,s,o),v(s,i,o),t&&t.m(s,o),v(s,l,o),r=!0},p(s,o){const n={};o[0]&1&&(n.data=s[0]),o[0]&32&&(n.type=s[5]),e.$set(n),s[7]?t?(t.p(s,o),o[0]&128&&g(t,1)):(t=Ne(s),t.c(),g(t,1),t.m(l.parentNode,l)):t&&(ee(),k(t,1,1,()=>{t=null}),te())},i(s){r||(g(e.$$.fragment,s),g(t),r=!0)},o(s){k(e.$$.fragment,s),k(t),r=!1},d(s){s&&(_(i),_(l)),N(e,s),t&&t.d(s)}}}function Ne(a){let e,i,l=ve(a[7]),r=[];for(let s=0;s<l.length;s+=1)r[s]=Te(Se(a,l,s));const t=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=O()},l(s){for(let o=0;o<r.length;o+=1)r[o].l(s);e=O()},m(s,o){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(s,o);v(s,e,o),i=!0},p(s,o){if(o[0]&1216){l=ve(s[7]);let n;for(n=0;n<l.length;n+=1){const f=Se(s,l,n);r[n]?(r[n].p(f,o),g(r[n],1)):(r[n]=Te(f),r[n].c(),g(r[n],1),r[n].m(e.parentNode,e))}for(ee(),n=l.length;n<r.length;n+=1)t(n);te()}},i(s){if(!i){for(let o=0;o<l.length;o+=1)g(r[o]);i=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)k(r[o]);i=!1},d(s){s&&_(e),qe(r,s)}}}function bt(a){let e,i,l,r,t=a[30].name+"",s,o,n;return l=new Ue({props:{class:"m-2"}}),{c(){e=L("a"),i=L("div"),B(l.$$.fragment),r=F(`
										add `),s=F(t),this.h()},l(f){e=J(f,"A",{href:!0});var u=S(e);i=J(u,"DIV",{class:!0});var m=S(i);T(l.$$.fragment,m),r=V(m,`
										add `),s=V(m,t),m.forEach(_),u.forEach(_),this.h()},h(){h(i,"class","flex flex-row items-center"),h(e,"href",o=se+"/add?type="+a[30].name+"&apiPostPath="+btoa(a[30].entitySubPath)+"&prefix="+a[6])},m(f,u){v(f,e,u),y(e,i),D(l,i,null),y(i,r),y(i,s),n=!0},p(f,u){(!n||u[0]&128)&&t!==(t=f[30].name+"")&&ie(s,t),(!n||u[0]&192&&o!==(o=se+"/add?type="+f[30].name+"&apiPostPath="+btoa(f[30].entitySubPath)+"&prefix="+f[6]))&&h(e,"href",o)},i(f){n||(g(l.$$.fragment,f),n=!0)},o(f){k(l.$$.fragment,f),n=!1},d(f){f&&_(e),N(l)}}}function De(a){let e,i;return e=new Xe({props:{dataRaw:a[30].data,type:a[30].name,entity:a[30],pathPrefix:a[6]}}),e.$on("refresh",a[26]),{c(){B(e.$$.fragment)},l(l){T(e.$$.fragment,l)},m(l,r){D(e,l,r),i=!0},p(l,r){const t={};r[0]&128&&(t.dataRaw=l[30].data),r[0]&128&&(t.type=l[30].name),r[0]&128&&(t.entity=l[30]),r[0]&64&&(t.pathPrefix=l[6]),e.$set(t)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){N(e,l)}}}function Te(a){let e,i,l,r,t,s;function o(){return a[25](a[30])}l=new le({props:{color:"alternative",$$slots:{default:[bt]},$$scope:{ctx:a}}}),l.$on("click",o);let n=a[30].data&&a[30].data.length>0&&De(a);return{c(){e=L("div"),i=L("div"),B(l.$$.fragment),r=q(),n&&n.c(),t=O(),this.h()},l(f){e=J(f,"DIV",{class:!0});var u=S(e);i=J(u,"DIV",{class:!0});var m=S(i);T(l.$$.fragment,m),m.forEach(_),u.forEach(_),r=H(f),n&&n.l(f),t=O(),this.h()},h(){h(i,"class","flex flex-row h-10"),h(e,"class","flex flex-row m-4 h-8 items-center")},m(f,u){v(f,e,u),y(e,i),D(l,i,null),v(f,r,u),n&&n.m(f,u),v(f,t,u),s=!0},p(f,u){a=f;const m={};u[0]&192|u[1]&4&&(m.$$scope={dirty:u,ctx:a}),l.$set(m),a[30].data&&a[30].data.length>0?n?(n.p(a,u),u[0]&128&&g(n,1)):(n=De(a),n.c(),g(n,1),n.m(t.parentNode,t)):n&&(ee(),k(n,1,1,()=>{n=null}),te())},i(f){s||(g(l.$$.fragment,f),g(n),s=!0)},o(f){k(l.$$.fragment,f),k(n),s=!1},d(f){f&&(_(e),_(r),_(t)),N(l),n&&n.d(f)}}}function gt(a){let e,i,l,r,t,s,o,n,f,u,m,c,d=a[0]&&Oe(a);t=new le({props:{class:"h-10 m-1 focus:shadow-none",$$slots:{default:[ot]},$$scope:{ctx:a}}}),t.$on("click",a[16]);const $=[ut,ft],P=[];function Z(p,E){return p[3]?1:0}o=Z(a),n=P[o]=$[o](a);const Y=[pt,ht],z=[];function K(p,E){return p[0]?0:1}return u=K(a),m=z[u]=Y[u](a),{c(){d&&d.c(),e=O(),i=q(),l=L("div"),r=L("div"),B(t.$$.fragment),s=q(),n.c(),f=q(),m.c(),this.h()},l(p){const E=Ve("svelte-1y732uo",document.head);d&&d.l(E),e=O(),E.forEach(_),i=H(p),l=J(p,"DIV",{class:!0});var R=S(l);r=J(R,"DIV",{class:!0});var j=S(r);T(t.$$.fragment,j),s=H(j),n.l(j),j.forEach(_),f=H(R),m.l(R),R.forEach(_),this.h()},h(){h(r,"class","flex flex-row flex-wrap m-2"),h(l,"class","mb-2")},m(p,E){d&&d.m(document.head,null),y(document.head,e),v(p,i,E),v(p,l,E),y(l,r),D(t,r,null),y(r,s),P[o].m(r,null),y(l,f),z[u].m(l,null),c=!0},p(p,E){p[0]?d||(d=Oe(p),d.c(),d.m(e.parentNode,e)):d&&(d.d(1),d=null);const R={};E[1]&4&&(R.$$scope={dirty:E,ctx:p}),t.$set(R);let j=o;o=Z(p),o===j?P[o].p(p,E):(ee(),k(P[j],1,1,()=>{P[j]=null}),te(),n=P[o],n?n.p(p,E):(n=P[o]=$[o](p),n.c()),g(n,1),n.m(r,null));let x=u;u=K(p),u===x?z[u].p(p,E):(ee(),k(z[x],1,1,()=>{z[x]=null}),te(),m=z[u],m?m.p(p,E):(m=z[u]=Y[u](p),m.c()),g(m,1),m.m(l,null))},i(p){c||(g(t.$$.fragment,p),g(n),g(m),c=!0)},o(p){k(t.$$.fragment,p),k(n),k(m),c=!1},d(p){p&&(_(i),_(l)),d&&d.d(p),_(e),N(t),P[o].d(),z[u].d()}}}function kt(a,e,i){let l;Fe(a,Qe,w=>i(15,l=w));let{data:r={}}=e,t="",s="",o=!1,n,f,u="",m="",c,d,$=!1;Me(()=>{$=!0,P()});async function P(){var I;if(!$)return;i(0,r=void 0),i(3,o=!1);const w=new URLSearchParams(window.location.search);i(5,f=w.get("type")??"none"),i(4,n=w.get("id")??"none"),u=w.get("prefix")??"",f=="upstreams"&&i(6,m=`/upstreams/${n}`);{i(0,r=void 0);const U=await(await ae()).findRecord(f,n,u);U.ok||(re(`failed to fetch ${f} with id ${n}. Status code: ${U.code}`),await ce(`${se}/entities?type=services`)),i(0,r=U.data),i(0,r=tt(r,lt)),i(2,s=JSON.stringify(r,void 0,2)),i(1,t=s),c=we.find(W=>W.name==f),i(7,d=we.filter(W=>{var X;return(X=c==null?void 0:c.subEntities)==null?void 0:X.includes(W.name)}).map(W=>({...W,entitySubPath:`${f}/${n}/${W.name}`})));for(const W of d){const X=await(await ae()).findAll(W.name,{},`/${f}/${n}`);if(!X.ok){re(`failed to load ${W.name}`);continue}W.data=(I=X.data)==null?void 0:I.data,i(7,d)}}E()}async function Z(w,I,U){if(!confirm(`Please confirm deletion of '${U}'`))return;const X=await(await ae()).deleteRecord(w,I,u);X.ok?(de("deleted"),ce(`${se}/entities?type=${f}&prefix=${u}`)):re(`failed to delete. ${X.err}`)}function Y(){let w;try{w=JSON.parse(s)}catch(I){re(`Failed to parse JSON. ${I.message}`);return}i(2,s=JSON.stringify(w,void 0,2)),E(),de("json is valid")}async function z(){var U;if(!confirm("confirm save?"))return;Y();const I=await(await ae()).updateRecord(f,n,JSON.parse(s),u);if(console.log(I),I.ok)de("entity successfully updated");else{re(`API error (${I.code}): `+(((U=I.errTyped)==null?void 0:U.message)??I.err),!0,15e3);return}i(3,o=!o),i(3,o),i(0,r=JSON.parse(s)),i(1,t=s)}let K,p;async function E(){i(2,s=s.replace(/\t/g,"  ")),i(2,s=s.replace(/\s\n$/g,`
 `)),p&&(i(9,p.textContent=s,p),globalThis.Prism.highlightElement(p))}const R=()=>{i(3,o=!o),E()},j=async()=>await Z(f,n,r.name??r.id),x=()=>{Ye(t)},ue=async()=>await z();function b(w){ke[w?"unshift":"push"](()=>{p=w,i(9,p)})}function Je(w){ke[w?"unshift":"push"](()=>{K=w,i(8,K)})}function Le(){s=this.value,i(2,s)}const je=()=>{E()},Ie=()=>{P()},Re=w=>{ce(`${se}/add?type=${w.name}&apiPostPath=${btoa(w.entitySubPath)}&prefix=${m}`)},We=async()=>await P();return a.$$set=w=>{"data"in w&&i(0,r=w.data)},a.$$.update=()=>{a.$$.dirty[0]&32768&&P()},[r,t,s,o,n,f,m,d,K,p,P,Z,Y,z,E,l,R,j,x,ue,b,Je,Le,je,Ie,Re,We]}class vt extends _e{constructor(e){super(),he(this,e,kt,gt,me,{data:0},null,[-1,-1])}}function wt(a){let e,i;return e=new vt({}),{c(){B(e.$$.fragment)},l(l){T(e.$$.fragment,l)},m(l,r){D(e,l,r),i=!0},p:C,i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){N(e,l)}}}class Lt extends _e{constructor(e){super(),he(this,e,null,wt,me,{})}}export{Lt as component};
