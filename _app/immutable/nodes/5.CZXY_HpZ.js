import{s as ce,v as B,i as v,n as I,f as m,w as _e,x as je,y as le,z as he,A as V,J as H,K as q,b as y,l as h,L as re,h as P,u as A,r as De,t as W,d as R,j as ae,e as z,a as Z,c as J,g as K,k as Ae,o as Ie,P as pe,p as We,q as ge,S as Re}from"../chunks/scheduler.BSW9XCdM.js";import{S as de,i as me,c as C,a as N,m as D,g as Y,b as k,e as x,t as g,d as T}from"../chunks/index.C72GILm6.js";import{e as be}from"../chunks/each.d6BMAjLi.js";import{T as Ve,F as Fe,C as Me,A as He}from"../chunks/ArrayWrap.DP9ysHmF.js";import{B as ee}from"../chunks/Button.BykKynam.js";import{T as qe}from"../chunks/treeWrapper.BwDb8i3C.js";import{a as te}from"../chunks/requests.uSUUKZEa.js";import{g as ke,b as se}from"../chunks/entry.C0gRSQna.js";import{p as Ze}from"../chunks/stores.CaDnKSQu.js";import{g as Te,w as Ke}from"../chunks/util.Be5M6xFt.js";import{a as Q,i as Ue}from"../chunks/stores.DGqwERWd.js";import{t as ne}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as Xe,F as Ge}from"../chunks/PaletteOutline.CCTZC0Gv.js";import{a as Qe,k as ve,f as Ye}from"../chunks/config.DgbcnDvX.js";function xe(a){let e,n,l,s,t,r=a[4].id&&a[4].title&&we(a),o=a[6].id&&a[6].desc&&$e(a),i=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:s=ne("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":t=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let c=0;c<i.length;c+=1)f=le(f,i[c]);return{c(){e=H("svg"),r&&r.c(),n=B(),o&&o.c(),l=H("path"),this.h()},l(c){e=q(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=y(e);r&&r.l(_),n=B(),o&&o.l(_),l=q(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),_.forEach(m),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",a[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),re(e,f)},m(c,_){v(c,e,_),r&&r.m(e,null),P(e,n),o&&o.m(e,null),P(e,l)},p(c,_){c[4].id&&c[4].title?r?r.p(c,_):(r=we(c),r.c(),r.m(e,n)):r&&(r.d(1),r=null),c[6].id&&c[6].desc?o?o.p(c,_):(o=$e(c),o.c(),o.m(e,l)):o&&(o.d(1),o=null),_&32&&h(l,"stroke-width",c[5]),re(e,f=Te(i,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:c[2]},_&2048&&c[11],_&4097&&s!==(s=ne("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:s},_&2&&{role:c[1]},_&128&&{"aria-label":c[7]},_&256&&t!==(t=c[8]?c[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(c){c&&m(e),r&&r.d(),o&&o.d()}}}function et(a){let e,n,l,s,t,r,o,i=a[4].id&&a[4].title&&Ee(a),f=a[6].id&&a[6].desc&&ye(a),c=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:a[2]},a[11],{class:s=ne("shrink-0",a[9][a[0]??"md"],a[12].class)},{role:a[1]},{"aria-label":a[7]},{"aria-describedby":t=a[8]?a[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let u=0;u<c.length;u+=1)_=le(_,c[u]);return{c(){e=H("svg"),i&&i.c(),n=B(),f&&f.c(),l=H("path"),this.h()},l(u){e=q(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var d=y(e);i&&i.l(d),n=B(),f&&f.l(d),l=q(d,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(m),d.forEach(m),this.h()},h(){h(l,"stroke","currentColor"),h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"stroke-width",a[5]),h(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),re(e,_)},m(u,d){v(u,e,d),i&&i.m(e,null),P(e,n),f&&f.m(e,null),P(e,l),r||(o=[A(e,"click",a[13]),A(e,"keydown",a[14]),A(e,"keyup",a[15]),A(e,"focus",a[16]),A(e,"blur",a[17]),A(e,"mouseenter",a[18]),A(e,"mouseleave",a[19]),A(e,"mouseover",a[20]),A(e,"mouseout",a[21])],r=!0)},p(u,d){u[4].id&&u[4].title?i?i.p(u,d):(i=Ee(u),i.c(),i.m(e,n)):i&&(i.d(1),i=null),u[6].id&&u[6].desc?f?f.p(u,d):(f=ye(u),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d&32&&h(l,"stroke-width",u[5]),re(e,_=Te(c,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},d&4&&{color:u[2]},d&2048&&u[11],d&4097&&s!==(s=ne("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:s},d&2&&{role:u[1]},d&128&&{"aria-label":u[7]},d&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&m(e),i&&i.d(),f&&f.d(),r=!1,De(o)}}}function we(a){let e,n=a[4].title+"",l,s;return{c(){e=H("title"),l=W(n),this.h()},l(t){e=q(t,"title",{id:!0});var r=y(e);l=R(r,n),r.forEach(m),this.h()},h(){h(e,"id",s=a[4].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&16&&n!==(n=t[4].title+"")&&ae(l,n),r&16&&s!==(s=t[4].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function $e(a){let e,n=a[6].desc+"",l,s;return{c(){e=H("desc"),l=W(n),this.h()},l(t){e=q(t,"desc",{id:!0});var r=y(e);l=R(r,n),r.forEach(m),this.h()},h(){h(e,"id",s=a[6].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&64&&n!==(n=t[6].desc+"")&&ae(l,n),r&64&&s!==(s=t[6].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function Ee(a){let e,n=a[4].title+"",l,s;return{c(){e=H("title"),l=W(n),this.h()},l(t){e=q(t,"title",{id:!0});var r=y(e);l=R(r,n),r.forEach(m),this.h()},h(){h(e,"id",s=a[4].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&16&&n!==(n=t[4].title+"")&&ae(l,n),r&16&&s!==(s=t[4].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function ye(a){let e,n=a[6].desc+"",l,s;return{c(){e=H("desc"),l=W(n),this.h()},l(t){e=q(t,"desc",{id:!0});var r=y(e);l=R(r,n),r.forEach(m),this.h()},h(){h(e,"id",s=a[6].id)},m(t,r){v(t,e,r),P(e,l)},p(t,r){r&64&&n!==(n=t[6].desc+"")&&ae(l,n),r&64&&s!==(s=t[6].id)&&h(e,"id",s)},d(t){t&&m(e)}}}function tt(a){let e;function n(t,r){return t[3]?et:xe}let l=n(a),s=l(a);return{c(){s.c(),e=B()},l(t){s.l(t),e=B()},m(t,r){s.m(t,r),v(t,e,r)},p(t,[r]){l===(l=n(t))&&s?s.p(t,r):(s.d(1),s=l(t),s&&(s.c(),s.m(e.parentNode,e)))},i:I,o:I,d(t){t&&m(e),s.d(t)}}}function lt(a,e,n){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let s=_e(e,l);const t=je("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:i=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:c=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:u=t.strokeWidth||"2"}=e,{desc:d={}}=e,$=`${_.id||""} ${d.id||""}`,O=!1,{ariaLabel:F="edit outline"}=e;function b(p){V.call(this,a,p)}function w(p){V.call(this,a,p)}function S(p){V.call(this,a,p)}function U(p){V.call(this,a,p)}function X(p){V.call(this,a,p)}function ie(p){V.call(this,a,p)}function oe(p){V.call(this,a,p)}function fe(p){V.call(this,a,p)}function ue(p){V.call(this,a,p)}return a.$$set=p=>{n(12,e=le(le({},e),he(p))),n(11,s=_e(e,l)),"size"in p&&n(0,o=p.size),"role"in p&&n(1,i=p.role),"color"in p&&n(2,f=p.color),"withEvents"in p&&n(3,c=p.withEvents),"title"in p&&n(4,_=p.title),"strokeWidth"in p&&n(5,u=p.strokeWidth),"desc"in p&&n(6,d=p.desc),"ariaLabel"in p&&n(7,F=p.ariaLabel)},a.$$.update=()=>{a.$$.dirty&80&&(_.id||d.id?n(8,O=!0):n(8,O=!1))},e=he(e),[o,i,f,c,_,u,d,F,O,r,$,s,e,b,w,S,U,X,ie,oe,fe,ue]}class rt extends de{constructor(e){super(),me(this,e,lt,tt,ce,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Pe(a,e,n){const l=a.slice();return l[28]=e[n],l}function st(a){let e,n,l;return e=new rt({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W("edit")},l(s){N(e.$$.fragment,s),n=R(s,"edit")},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(n),T(e,s)}}}function nt(a){let e,n,l,s;return e=new ee({props:{class:"h-10 m-1",color:"blue",disabled:a[1]==a[2],$$slots:{default:[it]},$$scope:{ctx:a}}}),e.$on("click",a[11]),l=new ee({props:{class:"h-10 m-1",disabled:a[1]==a[2],color:"green",$$slots:{default:[ot]},$$scope:{ctx:a}}}),l.$on("click",a[18]),{c(){C(e.$$.fragment),n=Z(),C(l.$$.fragment)},l(t){N(e.$$.fragment,t),n=K(t),N(l.$$.fragment,t)},m(t,r){D(e,t,r),v(t,n,r),D(l,t,r),s=!0},p(t,r){const o={};r[0]&6&&(o.disabled=t[1]==t[2]),r[1]&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o);const i={};r[0]&6&&(i.disabled=t[1]==t[2]),r[1]&1&&(i.$$scope={dirty:r,ctx:t}),l.$set(i)},i(t){s||(g(e.$$.fragment,t),g(l.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),s=!1},d(t){t&&m(n),T(e,t),T(l,t)}}}function at(a){let e,n,l,s;return e=new ee({props:{class:"h-10 m-1",title:"delete",color:"alternative",$$slots:{default:[ft]},$$scope:{ctx:a}}}),e.$on("click",a[16]),l=new ee({props:{color:"alternative",class:"h-10 m-1",$$slots:{default:[ut]},$$scope:{ctx:a}}}),l.$on("click",a[17]),{c(){C(e.$$.fragment),n=Z(),C(l.$$.fragment)},l(t){N(e.$$.fragment,t),n=K(t),N(l.$$.fragment,t)},m(t,r){D(e,t,r),v(t,n,r),D(l,t,r),s=!0},p(t,r){const o={};r[1]&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o);const i={};r[1]&1&&(i.$$scope={dirty:r,ctx:t}),l.$set(i)},i(t){s||(g(e.$$.fragment,t),g(l.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),k(l.$$.fragment,t),s=!1},d(t){t&&m(n),T(e,t),T(l,t)}}}function it(a){let e,n,l;return e=new Xe({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W(`
				format and validate JSON`)},l(s){N(e.$$.fragment,s),n=R(s,`
				format and validate JSON`)},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(n),T(e,s)}}}function ot(a){let e,n,l;return e=new Ge({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W(`
				save`)},l(s){N(e.$$.fragment,s),n=R(s,`
				save`)},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(n),T(e,s)}}}function ft(a){let e,n,l,s,t;return l=new Ve({props:{class:"m-1"}}),{c(){e=z("div"),n=z("div"),C(l.$$.fragment),s=W(`
						delete`),this.h()},l(r){e=J(r,"DIV",{class:!0});var o=y(e);n=J(o,"DIV",{class:!0});var i=y(n);N(l.$$.fragment,i),s=R(i,`
						delete`),i.forEach(m),o.forEach(m),this.h()},h(){h(n,"class","flex flex-row items-center"),h(e,"class","text-rose-500")},m(r,o){v(r,e,o),P(e,n),D(l,n,null),P(n,s),t=!0},p:I,i(r){t||(g(l.$$.fragment,r),t=!0)},o(r){k(l.$$.fragment,r),t=!1},d(r){r&&m(e),T(l)}}}function ut(a){let e,n,l;return e=new Fe({props:{class:"m-2"}}),{c(){C(e.$$.fragment),n=W(`
				copy`)},l(s){N(e.$$.fragment,s),n=R(s,`
				copy`)},m(s,t){D(e,s,t),v(s,n,t),l=!0},p:I,i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&m(n),T(e,s)}}}function ct(a){let e,n="Loading ...";return{c(){e=z("h2"),e.textContent=n,this.h()},l(l){e=J(l,"H2",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-wq8tmm"&&(e.textContent=n),this.h()},h(){h(e,"class","text-xl text-center")},m(l,s){v(l,e,s)},p:I,i:I,o:I,d(l){l&&m(e)}}}function dt(a){let e,n,l,s,t,r,o,i,f,c,_,u=!a[3]&&Oe(a);return{c(){e=z("div"),n=z("pre"),l=z("code"),s=Z(),t=z("textarea"),o=Z(),u&&u.c(),i=B(),this.h()},l(d){e=J(d,"DIV",{class:!0});var $=y(e);n=J($,"PRE",{class:!0});var O=y(n);l=J(O,"CODE",{class:!0}),y(l).forEach(m),O.forEach(m),s=K($),t=J($,"TEXTAREA",{spellcheck:!0,wrap:!0,autocorrect:!0,autocapitalize:!0,translate:!0,class:!0}),y(t).forEach(m),$.forEach(m),o=K(d),u&&u.l(d),i=B(),this.h()},h(){h(l,"class","svelte-1c016cv"),h(n,"class","language-json svelte-1c016cv"),h(t,"spellcheck","false"),h(t,"wrap","hard"),h(t,"autocorrect","off"),h(t,"autocapitalize","off"),h(t,"translate","no"),h(t,"class","relative svelte-1c016cv"),h(e,"class",r="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(a[3]?"grid":"hidden")+" svelte-1c016cv")},m(d,$){v(d,e,$),P(e,n),P(n,l),a[19](l),P(e,s),P(e,t),a[20](t),ge(t,a[2]),v(d,o,$),u&&u.m(d,$),v(d,i,$),f=!0,c||(_=[A(t,"input",a[21]),A(t,"input",a[22])],c=!0)},p(d,$){$[0]&4&&ge(t,d[2]),(!f||$[0]&8&&r!==(r="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(d[3]?"grid":"hidden")+" svelte-1c016cv"))&&h(e,"class",r),d[3]?u&&(Y(),k(u,1,1,()=>{u=null}),x()):u?(u.p(d,$),$[0]&8&&g(u,1)):(u=Oe(d),u.c(),g(u,1),u.m(i.parentNode,i))},i(d){f||(g(u),f=!0)},o(d){k(u),f=!1},d(d){d&&(m(e),m(o),m(i)),a[19](null),a[20](null),u&&u.d(d),c=!1,De(_)}}}function Oe(a){let e,n,l,s;e=new qe({props:{data:a[0],rounded:!1,type:a[5]}}),e.$on("refresh",a[23]);let t=a[6]&&Se(a);return{c(){C(e.$$.fragment),n=Z(),t&&t.c(),l=B()},l(r){N(e.$$.fragment,r),n=K(r),t&&t.l(r),l=B()},m(r,o){D(e,r,o),v(r,n,o),t&&t.m(r,o),v(r,l,o),s=!0},p(r,o){const i={};o[0]&1&&(i.data=r[0]),o[0]&32&&(i.type=r[5]),e.$set(i),r[6]?t?(t.p(r,o),o[0]&64&&g(t,1)):(t=Se(r),t.c(),g(t,1),t.m(l.parentNode,l)):t&&(Y(),k(t,1,1,()=>{t=null}),x())},i(r){s||(g(e.$$.fragment,r),g(t),s=!0)},o(r){k(e.$$.fragment,r),k(t),s=!1},d(r){r&&(m(n),m(l)),T(e,r),t&&t.d(r)}}}function Se(a){let e,n,l=be(a[6]),s=[];for(let r=0;r<l.length;r+=1)s[r]=Ne(Pe(a,l,r));const t=r=>k(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=B()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=B()},m(r,o){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(r,o);v(r,e,o),n=!0},p(r,o){if(o[0]&576){l=be(r[6]);let i;for(i=0;i<l.length;i+=1){const f=Pe(r,l,i);s[i]?(s[i].p(f,o),g(s[i],1)):(s[i]=Ne(f),s[i].c(),g(s[i],1),s[i].m(e.parentNode,e))}for(Y(),i=l.length;i<s.length;i+=1)t(i);x()}},i(r){if(!n){for(let o=0;o<l.length;o+=1)g(s[o]);n=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)k(s[o]);n=!1},d(r){r&&m(e),Re(s,r)}}}function mt(a){let e,n,l,s,t,r;return l=new Me({props:{class:"m-2"}}),{c(){e=z("a"),n=z("div"),C(l.$$.fragment),s=W(`
										add`),this.h()},l(o){e=J(o,"A",{href:!0});var i=y(e);n=J(i,"DIV",{class:!0});var f=y(n);N(l.$$.fragment,f),s=R(f,`
										add`),f.forEach(m),i.forEach(m),this.h()},h(){h(n,"class","flex flex-row items-center"),h(e,"href",t=se+"/add?type="+a[28].name+"&apiPostPath="+btoa(a[28].entitySubPath))},m(o,i){v(o,e,i),P(e,n),D(l,n,null),P(n,s),r=!0},p(o,i){(!r||i[0]&64&&t!==(t=se+"/add?type="+o[28].name+"&apiPostPath="+btoa(o[28].entitySubPath)))&&h(e,"href",t)},i(o){r||(g(l.$$.fragment,o),r=!0)},o(o){k(l.$$.fragment,o),r=!1},d(o){o&&m(e),T(l)}}}function Ce(a){let e,n;return e=new He({props:{dataRaw:a[28].data,type:a[28].name,entity:a[28]}}),e.$on("refresh",a[25]),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,s){D(e,l,s),n=!0},p(l,s){const t={};s[0]&64&&(t.dataRaw=l[28].data),s[0]&64&&(t.type=l[28].name),s[0]&64&&(t.entity=l[28]),e.$set(t)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}function Ne(a){let e,n,l,s,t,r;function o(){return a[24](a[28])}l=new ee({props:{color:"alternative",$$slots:{default:[mt]},$$scope:{ctx:a}}}),l.$on("click",o);let i=a[28].data&&a[28].data.length>0&&Ce(a);return{c(){e=z("div"),n=z("div"),C(l.$$.fragment),s=Z(),i&&i.c(),t=B(),this.h()},l(f){e=J(f,"DIV",{class:!0});var c=y(e);n=J(c,"DIV",{class:!0});var _=y(n);N(l.$$.fragment,_),_.forEach(m),c.forEach(m),s=K(f),i&&i.l(f),t=B(),this.h()},h(){h(n,"class","flex flex-row h-8"),h(e,"class","flex flex-row m-4 h-8 items-center")},m(f,c){v(f,e,c),P(e,n),D(l,n,null),v(f,s,c),i&&i.m(f,c),v(f,t,c),r=!0},p(f,c){a=f;const _={};c[0]&64|c[1]&1&&(_.$$scope={dirty:c,ctx:a}),l.$set(_),a[28].data&&a[28].data.length>0?i?(i.p(a,c),c[0]&64&&g(i,1)):(i=Ce(a),i.c(),g(i,1),i.m(t.parentNode,t)):i&&(Y(),k(i,1,1,()=>{i=null}),x())},i(f){r||(g(l.$$.fragment,f),g(i),r=!0)},o(f){k(l.$$.fragment,f),k(i),r=!1},d(f){f&&(m(e),m(s),m(t)),T(l),i&&i.d(f)}}}function _t(a){let e,n,l,s,t,r,o,i,f,c;l=new ee({props:{class:"h-10 m-1 focus:shadow-none",$$slots:{default:[st]},$$scope:{ctx:a}}}),l.$on("click",a[15]);const _=[at,nt],u=[];function d(b,w){return b[3]?1:0}t=d(a),r=u[t]=_[t](a);const $=[dt,ct],O=[];function F(b,w){return b[0]?0:1}return i=F(a),f=O[i]=$[i](a),{c(){e=z("div"),n=z("div"),C(l.$$.fragment),s=Z(),r.c(),o=Z(),f.c(),this.h()},l(b){e=J(b,"DIV",{class:!0});var w=y(e);n=J(w,"DIV",{class:!0});var S=y(n);N(l.$$.fragment,S),s=K(S),r.l(S),S.forEach(m),o=K(w),f.l(w),w.forEach(m),this.h()},h(){h(n,"class","flex flex-row flex-wrap m-2"),h(e,"class","mb-2")},m(b,w){v(b,e,w),P(e,n),D(l,n,null),P(n,s),u[t].m(n,null),P(e,o),O[i].m(e,null),c=!0},p(b,w){const S={};w[1]&1&&(S.$$scope={dirty:w,ctx:b}),l.$set(S);let U=t;t=d(b),t===U?u[t].p(b,w):(Y(),k(u[U],1,1,()=>{u[U]=null}),x(),r=u[t],r?r.p(b,w):(r=u[t]=_[t](b),r.c()),g(r,1),r.m(n,null));let X=i;i=F(b),i===X?O[i].p(b,w):(Y(),k(O[X],1,1,()=>{O[X]=null}),x(),f=O[i],f?f.p(b,w):(f=O[i]=$[i](b),f.c()),g(f,1),f.m(e,null))},i(b){c||(g(l.$$.fragment,b),g(r),g(f),c=!0)},o(b){k(l.$$.fragment,b),k(r),k(f),c=!1},d(b){b&&m(e),T(l),u[t].d(),O[i].d()}}}function ht(a,e,n){let l;Ae(a,Ze,E=>n(14,l=E));let{data:s={}}=e,t="",r="",o=!1,i,f,c,_,u=!1;Ie(()=>{u=!0,d()});async function d(){var L;if(!u)return;n(0,s=void 0);const E=new URLSearchParams(window.location.search);n(5,f=E.get("type")??"none"),n(4,i=E.get("id")??"none");{n(0,s=void 0);const G=await(await te()).findRecord(f,i);n(0,s=G.data),n(0,s=Qe(s,Ye)),n(2,r=JSON.stringify(s,void 0,2)),n(1,t=r),c=ve.find(j=>j.name==f),n(6,_=ve.filter(j=>{var M;return(M=c==null?void 0:c.subEntities)==null?void 0:M.includes(j.name)}).map(j=>({...j,entitySubPath:`${f}/${i}/${j.name}`})));for(const j of _){const M=await(await te()).findAll(j.name,{},`/${f}/${i}`);if(!M.ok){Q({message:`failed to load ${j.name}`});continue}j.data=(L=M.data)==null?void 0:L.data,n(6,_)}}S()}async function $(E,L,G){if(!confirm(`Please confirm deletion of '${G}'`))return;const M=await(await te()).deleteRecord(E,L);M.ok?(Q({message:"ok",type:"info"}),ke(`${se}/entities?type=${f}`)):Q({message:`failed to delete. ${M.err}`})}function O(){let E;try{E=JSON.parse(r)}catch(L){Q({message:`Failed to parse JSON. ${L.message}`});return}n(2,r=JSON.stringify(E,void 0,2)),S(),Q({message:"json is valid",type:"info"})}async function F(){var G;if(!confirm("confirm save?"))return;O();const L=await(await te()).updateRecord(f,i,JSON.parse(r));if(console.log(L),L.ok)Ue("entity successfully updated");else{Q({message:`API error (${L.code}): `+(((G=L.errTyped)==null?void 0:G.message)??L.err),timeout:15e3});return}n(3,o=!o),n(3,o),n(0,s=JSON.parse(r)),n(1,t=r)}let b,w;async function S(){n(2,r=r.replace(/\t/g,"  ")),n(2,r=r.replace(/\s\n$/g,`
 `)),w&&(n(8,w.textContent=r,w),globalThis.Prism.highlightElement(w))}const U=()=>{n(3,o=!o),S()},X=async()=>await $(f,i,s.name??s.id),ie=()=>{Ke(t)},oe=async()=>await F();function fe(E){pe[E?"unshift":"push"](()=>{w=E,n(8,w)})}function ue(E){pe[E?"unshift":"push"](()=>{b=E,n(7,b)})}function p(){r=this.value,n(2,r)}const Be=()=>{S()},ze=()=>{d()},Je=E=>{ke(`${se}/add?type=${E.name}&apiPostPath=${btoa(E.entitySubPath)}`)},Le=async()=>await d();return a.$$set=E=>{"data"in E&&n(0,s=E.data)},a.$$.update=()=>{a.$$.dirty[0]&16384&&d()},[s,t,r,o,i,f,_,b,w,d,$,O,F,S,l,U,X,ie,oe,fe,ue,p,Be,ze,Je,Le]}class pt extends de{constructor(e){super(),me(this,e,ht,_t,ce,{data:0},null,[-1,-1])}}function gt(a){let e,n;return e=new pt({}),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,s){D(e,l,s),n=!0},p:I,i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){T(e,l)}}}class Bt extends de{constructor(e){super(),me(this,e,null,gt,ce,{})}}export{Bt as component};
