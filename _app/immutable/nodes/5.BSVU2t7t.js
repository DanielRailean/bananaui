import{s as he,n as V,d as _,i as $,v as T,w as be,x as Fe,y as ue,z as ke,F as M,r as Ie,l as p,H as ce,b as y,q as A,I as K,e as P,J as X,a as ne,f as F,t as H,K as He,g as q,c as B,j as U,h as I,k as Me,o as qe,p as ve,u as Ue,S as we,T as Ze}from"../chunks/scheduler.DtmLzn2i.js";import{S as pe,i as ge,d as S,t as w,a as b,g as ee,e as te,m as O,c as C,b as N}from"../chunks/index.CMaRIr4Q.js";import{e as $e}from"../chunks/each.DBRUQrMw.js";import{T as Ke,F as Xe,C as Ge,A as Qe}from"../chunks/ArrayWrap.tAqaftCc.js";import{B as le}from"../chunks/Button.L23fji-o.js";import{T as Ye}from"../chunks/treeWrapper.FeqrXQBL.js";import{a as fe}from"../chunks/requests.B-ceXCq2.js";import{g as me,b as ie}from"../chunks/entry.CneEcUK4.js";import{p as xe}from"../chunks/stores.DhaKs1XD.js";import{g as ze,e as se,c as _e,w as et}from"../chunks/util.DtJGXF3T.js";import{t as de}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as tt,F as lt}from"../chunks/PaletteOutline.Djvp4zuH.js";import{s as Ee,b as rt,k as ye,f as st}from"../chunks/config.5Jeu0uQ-.js";function it(n){let e,i,l,r,t,s=n[4].id&&n[4].title&&Pe(n),o=n[6].id&&n[6].desc&&Se(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:r=de("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":t=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let u=0;u<a.length;u+=1)f=ue(f,a[u]);return{c(){e=X("svg"),s&&s.c(),i=T(),o&&o.c(),l=X("path"),this.h()},l(u){e=K(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var d=P(e);s&&s.l(d),i=T(),o&&o.l(d),l=K(d,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(l).forEach(_),d.forEach(_),this.h()},h(){p(l,"stroke","currentColor"),p(l,"stroke-linecap","round"),p(l,"stroke-linejoin","round"),p(l,"stroke-width",n[5]),p(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ce(e,f)},m(u,d){$(u,e,d),s&&s.m(e,null),y(e,i),o&&o.m(e,null),y(e,l)},p(u,d){u[4].id&&u[4].title?s?s.p(u,d):(s=Pe(u),s.c(),s.m(e,i)):s&&(s.d(1),s=null),u[6].id&&u[6].desc?o?o.p(u,d):(o=Se(u),o.c(),o.m(e,l)):o&&(o.d(1),o=null),d&32&&p(l,"stroke-width",u[5]),ce(e,f=ze(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},d&4&&{color:u[2]},d&2048&&u[11],d&4097&&r!==(r=de("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:r},d&2&&{role:u[1]},d&128&&{"aria-label":u[7]},d&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&_(e),s&&s.d(),o&&o.d()}}}function nt(n){let e,i,l,r,t,s,o,a=n[4].id&&n[4].title&&Oe(n),f=n[6].id&&n[6].desc&&Ce(n),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:r=de("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":t=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],d={};for(let c=0;c<u.length;c+=1)d=ue(d,u[c]);return{c(){e=X("svg"),a&&a.c(),i=T(),f&&f.c(),l=X("path"),this.h()},l(c){e=K(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=P(e);a&&a.l(m),i=T(),f&&f.l(m),l=K(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(l).forEach(_),m.forEach(_),this.h()},h(){p(l,"stroke","currentColor"),p(l,"stroke-linecap","round"),p(l,"stroke-linejoin","round"),p(l,"stroke-width",n[5]),p(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),ce(e,d)},m(c,m){$(c,e,m),a&&a.m(e,null),y(e,i),f&&f.m(e,null),y(e,l),s||(o=[A(e,"click",n[13]),A(e,"keydown",n[14]),A(e,"keyup",n[15]),A(e,"focus",n[16]),A(e,"blur",n[17]),A(e,"mouseenter",n[18]),A(e,"mouseleave",n[19]),A(e,"mouseover",n[20]),A(e,"mouseout",n[21])],s=!0)},p(c,m){c[4].id&&c[4].title?a?a.p(c,m):(a=Oe(c),a.c(),a.m(e,i)):a&&(a.d(1),a=null),c[6].id&&c[6].desc?f?f.p(c,m):(f=Ce(c),f.c(),f.m(e,l)):f&&(f.d(1),f=null),m&32&&p(l,"stroke-width",c[5]),ce(e,d=ze(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:c[2]},m&2048&&c[11],m&4097&&r!==(r=de("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:r},m&2&&{role:c[1]},m&128&&{"aria-label":c[7]},m&256&&t!==(t=c[8]?c[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(c){c&&_(e),a&&a.d(),f&&f.d(),s=!1,Ie(o)}}}function Pe(n){let e,i=n[4].title+"",l,r;return{c(){e=X("title"),l=H(i),this.h()},l(t){e=K(t,"title",{id:!0});var s=P(e);l=F(s,i),s.forEach(_),this.h()},h(){p(e,"id",r=n[4].id)},m(t,s){$(t,e,s),y(e,l)},p(t,s){s&16&&i!==(i=t[4].title+"")&&ne(l,i),s&16&&r!==(r=t[4].id)&&p(e,"id",r)},d(t){t&&_(e)}}}function Se(n){let e,i=n[6].desc+"",l,r;return{c(){e=X("desc"),l=H(i),this.h()},l(t){e=K(t,"desc",{id:!0});var s=P(e);l=F(s,i),s.forEach(_),this.h()},h(){p(e,"id",r=n[6].id)},m(t,s){$(t,e,s),y(e,l)},p(t,s){s&64&&i!==(i=t[6].desc+"")&&ne(l,i),s&64&&r!==(r=t[6].id)&&p(e,"id",r)},d(t){t&&_(e)}}}function Oe(n){let e,i=n[4].title+"",l,r;return{c(){e=X("title"),l=H(i),this.h()},l(t){e=K(t,"title",{id:!0});var s=P(e);l=F(s,i),s.forEach(_),this.h()},h(){p(e,"id",r=n[4].id)},m(t,s){$(t,e,s),y(e,l)},p(t,s){s&16&&i!==(i=t[4].title+"")&&ne(l,i),s&16&&r!==(r=t[4].id)&&p(e,"id",r)},d(t){t&&_(e)}}}function Ce(n){let e,i=n[6].desc+"",l,r;return{c(){e=X("desc"),l=H(i),this.h()},l(t){e=K(t,"desc",{id:!0});var s=P(e);l=F(s,i),s.forEach(_),this.h()},h(){p(e,"id",r=n[6].id)},m(t,s){$(t,e,s),y(e,l)},p(t,s){s&64&&i!==(i=t[6].desc+"")&&ne(l,i),s&64&&r!==(r=t[6].id)&&p(e,"id",r)},d(t){t&&_(e)}}}function at(n){let e;function i(t,s){return t[3]?nt:it}let l=i(n),r=l(n);return{c(){r.c(),e=T()},l(t){r.l(t),e=T()},m(t,s){r.m(t,s),$(t,e,s)},p(t,[s]){l===(l=i(t))&&r?r.p(t,s):(r.d(1),r=l(t),r&&(r.c(),r.m(e.parentNode,e)))},i:V,o:V,d(t){t&&_(e),r.d(t)}}}function ot(n,e,i){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let r=be(e,l);const t=Fe("iconCtx")??{},s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:a=t.role||"img"}=e,{color:f=t.color||"currentColor"}=e,{withEvents:u=t.withEvents||!1}=e,{title:d={}}=e,{strokeWidth:c=t.strokeWidth||"2"}=e,{desc:m={}}=e,k=`${d.id||""} ${m.id||""}`,z=!1,{ariaLabel:j="edit outline"}=e;function D(h){M.call(this,n,h)}function G(h){M.call(this,n,h)}function Q(h){M.call(this,n,h)}function Z(h){M.call(this,n,h)}function g(h){M.call(this,n,h)}function E(h){M.call(this,n,h)}function R(h){M.call(this,n,h)}function L(h){M.call(this,n,h)}function Y(h){M.call(this,n,h)}return n.$$set=h=>{i(12,e=ue(ue({},e),ke(h))),i(11,r=be(e,l)),"size"in h&&i(0,o=h.size),"role"in h&&i(1,a=h.role),"color"in h&&i(2,f=h.color),"withEvents"in h&&i(3,u=h.withEvents),"title"in h&&i(4,d=h.title),"strokeWidth"in h&&i(5,c=h.strokeWidth),"desc"in h&&i(6,m=h.desc),"ariaLabel"in h&&i(7,j=h.ariaLabel)},n.$$.update=()=>{n.$$.dirty&80&&(d.id||m.id?i(8,z=!0):i(8,z=!1))},e=ke(e),[o,a,f,u,d,c,m,j,z,s,k,r,e,D,G,Q,Z,g,E,R,L,Y]}class ft extends pe{constructor(e){super(),ge(this,e,ot,at,he,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function Ne(n,e,i){const l=n.slice();return l[31]=e[i],l}function ut(n){let e,i,l;return e=new ft({props:{class:"m-2"}}),{c(){N(e.$$.fragment),i=H("edit")},l(r){C(e.$$.fragment,r),i=F(r,"edit")},m(r,t){O(e,r,t),$(r,i,t),l=!0},p:V,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),l=!1},d(r){r&&_(i),S(e,r)}}}function ct(n){let e,i,l,r;return e=new le({props:{class:"h-10 m-1",color:"blue",title:n[1]==n[2]?"entity unchanged":"",disabled:n[1]==n[2],$$slots:{default:[mt]},$$scope:{ctx:n}}}),e.$on("click",n[13]),l=new le({props:{class:"h-10 m-1",disabled:n[1]==n[2],title:n[1]==n[2]?"entity unchanged":"",color:"green",$$slots:{default:[_t]},$$scope:{ctx:n}}}),l.$on("click",n[20]),{c(){N(e.$$.fragment),i=U(),N(l.$$.fragment)},l(t){C(e.$$.fragment,t),i=q(t),C(l.$$.fragment,t)},m(t,s){O(e,t,s),$(t,i,s),O(l,t,s),r=!0},p(t,s){const o={};s[0]&6&&(o.title=t[1]==t[2]?"entity unchanged":""),s[0]&6&&(o.disabled=t[1]==t[2]),s[1]&8&&(o.$$scope={dirty:s,ctx:t}),e.$set(o);const a={};s[0]&6&&(a.disabled=t[1]==t[2]),s[0]&6&&(a.title=t[1]==t[2]?"entity unchanged":""),s[1]&8&&(a.$$scope={dirty:s,ctx:t}),l.$set(a)},i(t){r||(b(e.$$.fragment,t),b(l.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),w(l.$$.fragment,t),r=!1},d(t){t&&_(i),S(e,t),S(l,t)}}}function dt(n){let e,i,l,r;return e=new le({props:{class:"h-10 m-1",title:"delete",color:"alternative",$$slots:{default:[ht]},$$scope:{ctx:n}}}),e.$on("click",n[18]),l=new le({props:{color:"alternative",class:"h-10 m-1",title:n[1],$$slots:{default:[pt]},$$scope:{ctx:n}}}),l.$on("click",n[19]),{c(){N(e.$$.fragment),i=U(),N(l.$$.fragment)},l(t){C(e.$$.fragment,t),i=q(t),C(l.$$.fragment,t)},m(t,s){O(e,t,s),$(t,i,s),O(l,t,s),r=!0},p(t,s){const o={};s[1]&8&&(o.$$scope={dirty:s,ctx:t}),e.$set(o);const a={};s[0]&2&&(a.title=t[1]),s[1]&8&&(a.$$scope={dirty:s,ctx:t}),l.$set(a)},i(t){r||(b(e.$$.fragment,t),b(l.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),w(l.$$.fragment,t),r=!1},d(t){t&&_(i),S(e,t),S(l,t)}}}function mt(n){let e,i,l;return e=new tt({props:{class:"m-2"}}),{c(){N(e.$$.fragment),i=H(`
				format and validate JSON`)},l(r){C(e.$$.fragment,r),i=F(r,`
				format and validate JSON`)},m(r,t){O(e,r,t),$(r,i,t),l=!0},p:V,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),l=!1},d(r){r&&_(i),S(e,r)}}}function _t(n){let e,i,l;return e=new lt({props:{class:"m-2"}}),{c(){N(e.$$.fragment),i=H(`
				save`)},l(r){C(e.$$.fragment,r),i=F(r,`
				save`)},m(r,t){O(e,r,t),$(r,i,t),l=!0},p:V,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),l=!1},d(r){r&&_(i),S(e,r)}}}function ht(n){let e,i,l,r,t;return l=new Ke({props:{class:"m-1"}}),{c(){e=I("div"),i=I("div"),N(l.$$.fragment),r=H(`
						delete`),this.h()},l(s){e=B(s,"DIV",{class:!0});var o=P(e);i=B(o,"DIV",{class:!0});var a=P(i);C(l.$$.fragment,a),r=F(a,`
						delete`),a.forEach(_),o.forEach(_),this.h()},h(){p(i,"class","flex flex-row items-center"),p(e,"class","text-rose-500")},m(s,o){$(s,e,o),y(e,i),O(l,i,null),y(i,r),t=!0},p:V,i(s){t||(b(l.$$.fragment,s),t=!0)},o(s){w(l.$$.fragment,s),t=!1},d(s){s&&_(e),S(l)}}}function pt(n){let e,i,l;return e=new Xe({props:{class:"m-2"}}),{c(){N(e.$$.fragment),i=H(`
				copy JSON`)},l(r){C(e.$$.fragment,r),i=F(r,`
				copy JSON`)},m(r,t){O(e,r,t),$(r,i,t),l=!0},p:V,i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),l=!1},d(r){r&&_(i),S(e,r)}}}function gt(n){let e,i="Loading ...";return{c(){e=I("h2"),e.textContent=i,this.h()},l(l){e=B(l,"H2",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-wq8tmm"&&(e.textContent=i),this.h()},h(){p(e,"class","text-xl text-center")},m(l,r){$(l,e,r)},p:V,i:V,o:V,d(l){l&&_(e)}}}function bt(n){let e,i,l,r,t,s,o,a,f,u,d,c=!n[3]&&Te(n);return{c(){e=I("div"),i=I("pre"),l=I("code"),r=U(),t=I("textarea"),o=U(),c&&c.c(),a=T(),this.h()},l(m){e=B(m,"DIV",{class:!0});var k=P(e);i=B(k,"PRE",{class:!0});var z=P(i);l=B(z,"CODE",{class:!0}),P(l).forEach(_),z.forEach(_),r=q(k),t=B(k,"TEXTAREA",{spellcheck:!0,wrap:!0,autocorrect:!0,autocapitalize:!0,translate:!0,class:!0}),P(t).forEach(_),k.forEach(_),o=q(m),c&&c.l(m),a=T(),this.h()},h(){p(l,"class","svelte-1c016cv"),p(i,"class","language-json svelte-1c016cv"),p(t,"spellcheck","false"),p(t,"wrap","hard"),p(t,"autocorrect","off"),p(t,"autocapitalize","off"),p(t,"translate","no"),p(t,"class","relative svelte-1c016cv"),p(e,"class",s="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(n[3]?"grid":"hidden")+" svelte-1c016cv")},m(m,k){$(m,e,k),y(e,i),y(i,l),n[21](l),y(e,r),y(e,t),n[22](t),ve(t,n[2]),$(m,o,k),c&&c.m(m,k),$(m,a,k),f=!0,u||(d=[A(t,"input",n[23]),A(t,"input",n[24])],u=!0)},p(m,k){k[0]&4&&ve(t,m[2]),(!f||k[0]&8&&s!==(s="editor dark:bg-[#1E2021] w-full min-h-[30vh] line-numbers "+(m[3]?"grid":"hidden")+" svelte-1c016cv"))&&p(e,"class",s),m[3]?c&&(ee(),w(c,1,1,()=>{c=null}),te()):c?(c.p(m,k),k[0]&8&&b(c,1)):(c=Te(m),c.c(),b(c,1),c.m(a.parentNode,a))},i(m){f||(b(c),f=!0)},o(m){w(c),f=!1},d(m){m&&(_(e),_(o),_(a)),n[21](null),n[22](null),c&&c.d(m),u=!1,Ie(d)}}}function Te(n){let e,i,l,r;e=new Ye({props:{data:n[0],rounded:!1,type:n[5]}}),e.$on("refresh",n[25]);let t=n[7]&&De(n);return{c(){N(e.$$.fragment),i=U(),t&&t.c(),l=T()},l(s){C(e.$$.fragment,s),i=q(s),t&&t.l(s),l=T()},m(s,o){O(e,s,o),$(s,i,o),t&&t.m(s,o),$(s,l,o),r=!0},p(s,o){const a={};o[0]&1&&(a.data=s[0]),o[0]&32&&(a.type=s[5]),e.$set(a),s[7]?t?(t.p(s,o),o[0]&128&&b(t,1)):(t=De(s),t.c(),b(t,1),t.m(l.parentNode,l)):t&&(ee(),w(t,1,1,()=>{t=null}),te())},i(s){r||(b(e.$$.fragment,s),b(t),r=!0)},o(s){w(e.$$.fragment,s),w(t),r=!1},d(s){s&&(_(i),_(l)),S(e,s),t&&t.d(s)}}}function De(n){let e,i,l=$e(n[7]),r=[];for(let s=0;s<l.length;s+=1)r[s]=Be(Ne(n,l,s));const t=s=>w(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=T()},l(s){for(let o=0;o<r.length;o+=1)r[o].l(s);e=T()},m(s,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,o);$(s,e,o),i=!0},p(s,o){if(o[0]&2240){l=$e(s[7]);let a;for(a=0;a<l.length;a+=1){const f=Ne(s,l,a);r[a]?(r[a].p(f,o),b(r[a],1)):(r[a]=Be(f),r[a].c(),b(r[a],1),r[a].m(e.parentNode,e))}for(ee(),a=l.length;a<r.length;a+=1)t(a);te()}},i(s){if(!i){for(let o=0;o<l.length;o+=1)b(r[o]);i=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)w(r[o]);i=!1},d(s){s&&_(e),Ze(r,s)}}}function kt(n){let e,i,l,r,t=n[31].name+"",s,o,a;return l=new Ge({props:{class:"m-2"}}),{c(){e=I("a"),i=I("div"),N(l.$$.fragment),r=H(`
										add `),s=H(t),this.h()},l(f){e=B(f,"A",{href:!0});var u=P(e);i=B(u,"DIV",{class:!0});var d=P(i);C(l.$$.fragment,d),r=F(d,`
										add `),s=F(d,t),d.forEach(_),u.forEach(_),this.h()},h(){p(i,"class","flex flex-row items-center"),p(e,"href",o=ie+"/add?type="+n[31].name+"&apiPostPath="+btoa(n[31].entitySubPath)+"&prefix="+n[6])},m(f,u){$(f,e,u),y(e,i),O(l,i,null),y(i,r),y(i,s),a=!0},p(f,u){(!a||u[0]&128)&&t!==(t=f[31].name+"")&&ne(s,t),(!a||u[0]&192&&o!==(o=ie+"/add?type="+f[31].name+"&apiPostPath="+btoa(f[31].entitySubPath)+"&prefix="+f[6]))&&p(e,"href",o)},i(f){a||(b(l.$$.fragment,f),a=!0)},o(f){w(l.$$.fragment,f),a=!1},d(f){f&&_(e),S(l)}}}function Je(n){let e,i;return e=new Qe({props:{dataRaw:n[31].data,type:n[31].name,entity:n[31],pathPrefix:n[6]}}),e.$on("refresh",n[27]),{c(){N(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,r){O(e,l,r),i=!0},p(l,r){const t={};r[0]&128&&(t.dataRaw=l[31].data),r[0]&128&&(t.type=l[31].name),r[0]&128&&(t.entity=l[31]),r[0]&64&&(t.pathPrefix=l[6]),e.$set(t)},i(l){i||(b(e.$$.fragment,l),i=!0)},o(l){w(e.$$.fragment,l),i=!1},d(l){S(e,l)}}}function Be(n){let e,i,l,r,t,s;function o(){return n[26](n[31])}l=new le({props:{color:"alternative",$$slots:{default:[kt]},$$scope:{ctx:n}}}),l.$on("click",o);let a=n[31].data&&n[31].data.length>0&&Je(n);return{c(){e=I("div"),i=I("div"),N(l.$$.fragment),r=U(),a&&a.c(),t=T(),this.h()},l(f){e=B(f,"DIV",{class:!0});var u=P(e);i=B(u,"DIV",{class:!0});var d=P(i);C(l.$$.fragment,d),d.forEach(_),u.forEach(_),r=q(f),a&&a.l(f),t=T(),this.h()},h(){p(i,"class","flex flex-row h-10"),p(e,"class","flex flex-row m-4 h-8 items-center")},m(f,u){$(f,e,u),y(e,i),O(l,i,null),$(f,r,u),a&&a.m(f,u),$(f,t,u),s=!0},p(f,u){n=f;const d={};u[0]&192|u[1]&8&&(d.$$scope={dirty:u,ctx:n}),l.$set(d),n[31].data&&n[31].data.length>0?a?(a.p(n,u),u[0]&128&&b(a,1)):(a=Je(n),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(ee(),w(a,1,1,()=>{a=null}),te())},i(f){s||(b(l.$$.fragment,f),b(a),s=!0)},o(f){w(l.$$.fragment,f),w(a),s=!1},d(f){f&&(_(e),_(r),_(t)),S(l),a&&a.d(f)}}}function vt(n){var Q,Z;let e,i,l,r,t,s,o,a,f,u,d,c;document.title=e=((Q=n[0])==null?void 0:Q.name)??((Z=n[0])==null?void 0:Z.id)??Ee.name,t=new le({props:{class:"h-10 m-1 focus:shadow-none",$$slots:{default:[ut]},$$scope:{ctx:n}}}),t.$on("click",n[17]);const m=[dt,ct],k=[];function z(g,E){return g[3]?1:0}o=z(n),a=k[o]=m[o](n);const j=[bt,gt],D=[];function G(g,E){return g[0]?0:1}return u=G(n),d=D[u]=j[u](n),{c(){i=U(),l=I("div"),r=I("div"),N(t.$$.fragment),s=U(),a.c(),f=U(),d.c(),this.h()},l(g){He("svelte-w0arux",document.head).forEach(_),i=q(g),l=B(g,"DIV",{class:!0});var R=P(l);r=B(R,"DIV",{class:!0});var L=P(r);C(t.$$.fragment,L),s=q(L),a.l(L),L.forEach(_),f=q(R),d.l(R),R.forEach(_),this.h()},h(){p(r,"class","flex flex-row flex-wrap m-2"),p(l,"class","mb-2")},m(g,E){$(g,i,E),$(g,l,E),y(l,r),O(t,r,null),y(r,s),k[o].m(r,null),y(l,f),D[u].m(l,null),c=!0},p(g,E){var h,ae;(!c||E[0]&1)&&e!==(e=((h=g[0])==null?void 0:h.name)??((ae=g[0])==null?void 0:ae.id)??Ee.name)&&(document.title=e);const R={};E[1]&8&&(R.$$scope={dirty:E,ctx:g}),t.$set(R);let L=o;o=z(g),o===L?k[o].p(g,E):(ee(),w(k[L],1,1,()=>{k[L]=null}),te(),a=k[o],a?a.p(g,E):(a=k[o]=m[o](g),a.c()),b(a,1),a.m(r,null));let Y=u;u=G(g),u===Y?D[u].p(g,E):(ee(),w(D[Y],1,1,()=>{D[Y]=null}),te(),d=D[u],d?d.p(g,E):(d=D[u]=j[u](g),d.c()),b(d,1),d.m(l,null))},i(g){c||(b(t.$$.fragment,g),b(a),b(d),c=!0)},o(g){w(t.$$.fragment,g),w(a),w(d),c=!1},d(g){g&&(_(i),_(l)),S(t),k[o].d(),D[u].d()}}}function wt(n,e,i){let l;Me(n,xe,v=>i(16,l=v));let{data:r={}}=e,t="",s="",o=!1,a,f,u="",d="",c,m,k=!1;qe(()=>{k=!0,j()});function z(){const v=new URL(window.location.toString());o==!0?v.searchParams.set("isEdited","true"):v.searchParams.delete("isEdited"),history.pushState(null,"",v)}async function j(){var x;if(!k)return;i(0,r=void 0),i(3,o=!1);const v=new URLSearchParams(window.location.search);i(5,f=v.get("type")??"none"),i(4,a=v.get("id")??"none");let W=v.get("isEdited")??"";i(3,o=W=="true"),u=v.get("prefix")??"",f=="upstreams"&&i(6,d=`/upstreams/${a}`);{i(0,r=void 0);const oe=await(await fe()).findRecord(f,a,u);oe.ok||(se(`failed to fetch ${f} with id ${a}. Status code: ${oe.code}`),await me(`${ie}/entities?type=services`)),i(0,r=oe.data),i(0,r=rt(r,st)),i(2,s=JSON.stringify(r,void 0,2)),i(1,t=s),c=ye.find(J=>J.name==f),i(7,m=ye.filter(J=>{var re;return(re=c==null?void 0:c.subEntities)==null?void 0:re.includes(J.name)}).map(J=>({...J,entitySubPath:`${f}/${a}/${J.name}`})));for(const J of m){const re=await(await fe()).findAll(J.name,{},`/${f}/${a}`);if(!re.ok){se(`failed to load ${J.name}`);continue}J.data=(x=re.data)==null?void 0:x.data,i(7,m)}}E()}async function D(v,W,x){if(!confirm(`Please confirm deletion of '${x}'`))return;const J=await(await fe()).deleteRecord(v,W,u);J.ok?(_e("deleted"),me(`${ie}/entities?type=${f}&prefix=${u}`)):se(`failed to delete. ${J.err}`)}function G(){let v;try{v=JSON.parse(s)}catch(W){se(`Failed to parse JSON. ${W.message}`);return}i(2,s=JSON.stringify(v,void 0,2)),E(),_e("json is valid")}async function Q(){var x;if(!confirm("confirm save?"))return;G();const W=await(await fe()).updateRecord(f,a,JSON.parse(s),u);if(console.log(W),W.ok)_e("entity successfully updated");else{se(`API error (${W.code}): `+(((x=W.errTyped)==null?void 0:x.message)??W.err),!0,15e3);return}i(3,o=!o),i(3,o),i(0,r=JSON.parse(s)),i(1,t=s)}let Z,g;async function E(){i(2,s=s.replace(/\t/g,"  ")),i(2,s=s.replace(/\s\n$/g,`
 `)),g&&(i(9,g.textContent=s,g),globalThis.Prism.highlightElement(g))}const R=()=>{i(3,o=!o),z(),E()},L=async()=>await D(f,a,r.name??r.id),Y=()=>{et(t)},h=async()=>await Q();function ae(v){we[v?"unshift":"push"](()=>{g=v,i(9,g)})}function Le(v){we[v?"unshift":"push"](()=>{Z=v,i(8,Z)})}function je(){s=this.value,i(2,s)}const Re=()=>{E()},We=()=>{j()},Ae=v=>{me(`${ie}/add?type=${v.name}&apiPostPath=${btoa(v.entitySubPath)}&prefix=${d}`)},Ve=async()=>await j();return n.$$set=v=>{"data"in v&&i(0,r=v.data)},n.$$.update=()=>{n.$$.dirty[0]&65536&&j()},[r,t,s,o,a,f,d,m,Z,g,z,j,D,G,Q,E,l,R,L,Y,h,ae,Le,je,Re,We,Ae,Ve]}class $t extends pe{constructor(e){super(),ge(this,e,wt,vt,he,{data:0},null,[-1,-1])}}function Et(n){let e,i;return e=new $t({}),{c(){N(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,r){O(e,l,r),i=!0},p:V,i(l){i||(b(e.$$.fragment,l),i=!0)},o(l){w(e.$$.fragment,l),i=!1},d(l){S(e,l)}}}class jt extends pe{constructor(e){super(),ge(this,e,null,Et,he,{})}}export{jt as component};
