import{s as X,a as L,e as D,t as H,l as W,m as Y,f as h,g as M,c as A,b as T,d as I,p as E,i as w,h as k,j as G,k as Z,o as x,q as ee,n as q}from"../chunks/scheduler.BQDiRXjc.js";import{S as te,i as ae,c as z,a as B,m as N,b as S,e as se,t as C,d as O,g as re}from"../chunks/index.B1KEy29g.js";import{C as ne,A as oe}from"../chunks/ArrayWrap.CPOoegh4.js";import{b as V,g as le}from"../chunks/entry.j1-vNDoC.js";import{B as ie}from"../chunks/Button.PWPCTRbg.js";import{D as J,t as ce,a as fe}from"../chunks/stores.DkPaJxIW.js";import{s as K,k as j}from"../chunks/config.BZ2ZmWdM.js";import{a as Q}from"../chunks/requests.OHvZop2l.js";import{p as de}from"../chunks/stores.BGeMDtEa.js";import{c as P}from"../chunks/util.BsWr24sc.js";function me(l){let e,r,s,t,n,i;return s=new ne({props:{class:"m-2"}}),{c(){e=D("a"),r=D("div"),z(s.$$.fragment),t=H(`
				add`),this.h()},l(c){e=A(c,"A",{href:!0});var d=T(e);r=A(d,"DIV",{class:!0});var u=T(r);B(s.$$.fragment,u),t=I(u,`
				add`),u.forEach(h),d.forEach(h),this.h()},h(){E(r,"class","flex flex-row items-center"),E(e,"href",n=V+"/add?type="+l[1])},m(c,d){w(c,e,d),k(e,r),N(s,r,null),k(r,t),i=!0},p(c,d){(!i||d&2&&n!==(n=V+"/add?type="+c[1]))&&E(e,"href",n)},i(c){i||(C(s.$$.fragment,c),i=!0)},o(c){S(s.$$.fragment,c),i=!1},d(c){c&&h(e),O(s)}}}function ue(l){let e,r='<h2 class="text-xl text-center mb-10">No entries</h2>';return{c(){e=D("div"),e.innerHTML=r,this.h()},l(s){e=A(s,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1ktrhtt"&&(e.innerHTML=r),this.h()},h(){E(e,"class","flex w-full justify-center items-center")},m(s,t){w(s,e,t)},p:q,i:q,o:q,d(s){s&&h(e)}}}function pe(l){var s;let e,r;return e=new oe({props:{displayedFields:(s=j.find(l[6]))==null?void 0:s.displayedFields,data:l[0],type:l[1],entity:l[2]}}),e.$on("refresh",l[7]),{c(){z(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,n){N(e,t,n),r=!0},p(t,n){var c;const i={};n&2&&(i.displayedFields=(c=j.find(t[6]))==null?void 0:c.displayedFields),n&1&&(i.data=t[0]),n&2&&(i.type=t[1]),n&4&&(i.entity=t[2]),e.$set(i)},i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function he(l){let e,r,s,t,n=(l[0]?l[0].length:0)+"",i,c,d=P(l[1])+"",u,F,p,y,f,o,_,v;document.title=e=K.name+" - "+P(l[1]),p=new ie({props:{class:"h-8 w-20 border-slate-300",color:"alternative",$$slots:{default:[me]},$$scope:{ctx:l}}}),p.$on("click",l[5]);const R=[pe,ue],g=[];function U(a,m){return a[0]&&a[0].length>0?0:1}return f=U(l),o=g[f]=R[f](l),{c(){r=L(),s=D("div"),t=D("h1"),i=H(n),c=L(),u=H(d),F=L(),z(p.$$.fragment),y=L(),o.c(),_=W(),this.h()},l(a){Y("svelte-f4u3pm",document.head).forEach(h),r=M(a),s=A(a,"DIV",{class:!0});var b=T(s);t=A(b,"H1",{class:!0});var $=T(t);i=I($,n),c=M($),u=I($,d),$.forEach(h),F=M(b),B(p.$$.fragment,b),b.forEach(h),y=M(a),o.l(a),_=W(),this.h()},h(){E(t,"class","text-xl mb-3 ml-1 dark:text-zinc-300"),E(s,"class","flex flex-col mx-4 mt-4")},m(a,m){w(a,r,m),w(a,s,m),k(s,t),k(t,i),k(t,c),k(t,u),k(s,F),N(p,s,null),w(a,y,m),g[f].m(a,m),w(a,_,m),v=!0},p(a,[m]){(!v||m&2)&&e!==(e=K.name+" - "+P(a[1]))&&(document.title=e),(!v||m&1)&&n!==(n=(a[0]?a[0].length:0)+"")&&G(i,n),(!v||m&2)&&d!==(d=P(a[1])+"")&&G(u,d);const b={};m&1026&&(b.$$scope={dirty:m,ctx:a}),p.$set(b);let $=f;f=U(a),f===$?g[f].p(a,m):(re(),S(g[$],1,1,()=>{g[$]=null}),se(),o=g[f],o?o.p(a,m):(o=g[f]=R[f](a),o.c()),C(o,1),o.m(_.parentNode,_))},i(a){v||(C(p.$$.fragment,a),C(o),v=!0)},o(a){S(p.$$.fragment,a),S(o),v=!1},d(a){a&&(h(r),h(s),h(y),h(_)),O(p),g[f].d(a)}}}function _e(l,e,r){let s;Z(l,de,f=>r(4,s=f));let t,n,i,c=!1;x(()=>{c=!0,u()});let d;async function u(){if(c){r(0,t=void 0),d=J.now(),r(1,n=new URLSearchParams(window.location.search).get("type")??"none");try{if(r(2,i=j.find(_=>_.name==n)),!i)return;let o=await(await Q()).findAll(i.apiPath,{});r(0,t=o.data.data);for(var f=d;o.data.next&&(o=await(await Q()).request(o.data.next??"",void 0,void 0),f==d);)o.ok&&(r(0,t=t.concat(o.data.data)),ce.set(J.now()))}catch(o){console.log(o),fe({message:`Failed fetching the ${n}. ${o.message?o.message:""}`})}}}const F=()=>{le(`${V}/add?type=${n}`)},p=f=>f.name==n,y=async()=>await u();return l.$$.update=()=>{l.$$.dirty&16&&u()},[t,n,i,u,s,F,p,y]}class Ce extends te{constructor(e){super(),ae(this,e,_e,he,X,{})}}export{Ce as component};
