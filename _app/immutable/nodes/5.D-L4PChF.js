import{s as fe,v as S,i as v,n as L,f as h,w as de,x as Ce,y as re,z as me,A as F,J as q,K as Z,b as O,l as g,L as se,h as y,u as V,r as Be,t as j,d as I,j as te,e as A,a as R,c as W,g as H,k as De,o as Je,p as Le,q as _e,N as Te}from"../chunks/scheduler.CygsJwb4.js";import{S as ue,i as ce,c as C,a as B,m as D,t as p,g as U,b as k,e as X,d as J}from"../chunks/index.CTorNDhm.js";import{e as he}from"../chunks/each.C0lqVhei.js";import{T as ze,F as Ae,C as We,A as je}from"../chunks/ArrayWrap.DCzwxo5y.js";import{B as x}from"../chunks/Button.BrGvNtFA.js";import{T as Ie}from"../chunks/treeWrapper.vLBcy0Wm.js";import{a as le}from"../chunks/requests.CdT8MyHq.js";import{g as pe,b as ae}from"../chunks/entry.z0KgkPDI.js";import{p as Ve}from"../chunks/stores.BHlfjh5e.js";import{g as Ne,w as Fe}from"../chunks/util.Bx4J9gXx.js";import{a as Y}from"../chunks/stores.C8A7kter.js";import{t as ne}from"../chunks/bundle-mjs.D696Ktp4.js";import{P as Me,F as Re}from"../chunks/PaletteOutline.C7ZCmyZa.js";import{a as He,k as ge,f as qe}from"../chunks/config.Dmd9iIHM.js";function Ze(n){let e,s,l,t,a,r=n[4].id&&n[4].title&&be(n),i=n[6].id&&n[6].desc&&ke(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:t=ne("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":a=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],d={};for(let u=0;u<o.length;u+=1)d=re(d,o[u]);return{c(){e=q("svg"),r&&r.c(),s=S(),i&&i.c(),l=q("path"),this.h()},l(u){e=Z(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=O(e);r&&r.l(m),s=S(),i&&i.l(m),l=Z(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),O(l).forEach(h),m.forEach(h),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",n[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,d)},m(u,m){v(u,e,m),r&&r.m(e,null),y(e,s),i&&i.m(e,null),y(e,l)},p(u,m){u[4].id&&u[4].title?r?r.p(u,m):(r=be(u),r.c(),r.m(e,s)):r&&(r.d(1),r=null),u[6].id&&u[6].desc?i?i.p(u,m):(i=ke(u),i.c(),i.m(e,l)):i&&(i.d(1),i=null),m&32&&g(l,"stroke-width",u[5]),se(e,d=Ne(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:u[2]},m&2048&&u[11],m&4097&&t!==(t=ne("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:t},m&2&&{role:u[1]},m&128&&{"aria-label":u[7]},m&256&&a!==(a=u[8]?u[10]:void 0)&&{"aria-describedby":a},{viewBox:"0 0 24 24"}]))},d(u){u&&h(e),r&&r.d(),i&&i.d()}}}function Ke(n){let e,s,l,t,a,r,i,o=n[4].id&&n[4].title&&ve(n),d=n[6].id&&n[6].desc&&we(n),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:n[2]},n[11],{class:t=ne("shrink-0",n[9][n[0]??"md"],n[12].class)},{role:n[1]},{"aria-label":n[7]},{"aria-describedby":a=n[8]?n[10]:void 0},{viewBox:"0 0 24 24"}],m={};for(let c=0;c<u.length;c+=1)m=re(m,u[c]);return{c(){e=q("svg"),o&&o.c(),s=S(),d&&d.c(),l=q("path"),this.h()},l(c){e=Z(c,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var f=O(e);o&&o.l(f),s=S(),d&&d.l(f),l=Z(f,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),O(l).forEach(h),f.forEach(h),this.h()},h(){g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width",n[5]),g(l,"d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"),se(e,m)},m(c,f){v(c,e,f),o&&o.m(e,null),y(e,s),d&&d.m(e,null),y(e,l),r||(i=[V(e,"click",n[13]),V(e,"keydown",n[14]),V(e,"keyup",n[15]),V(e,"focus",n[16]),V(e,"blur",n[17]),V(e,"mouseenter",n[18]),V(e,"mouseleave",n[19]),V(e,"mouseover",n[20]),V(e,"mouseout",n[21])],r=!0)},p(c,f){c[4].id&&c[4].title?o?o.p(c,f):(o=ve(c),o.c(),o.m(e,s)):o&&(o.d(1),o=null),c[6].id&&c[6].desc?d?d.p(c,f):(d=we(c),d.c(),d.m(e,l)):d&&(d.d(1),d=null),f&32&&g(l,"stroke-width",c[5]),se(e,m=Ne(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},f&4&&{color:c[2]},f&2048&&c[11],f&4097&&t!==(t=ne("shrink-0",c[9][c[0]??"md"],c[12].class))&&{class:t},f&2&&{role:c[1]},f&128&&{"aria-label":c[7]},f&256&&a!==(a=c[8]?c[10]:void 0)&&{"aria-describedby":a},{viewBox:"0 0 24 24"}]))},d(c){c&&h(e),o&&o.d(),d&&d.d(),r=!1,Be(i)}}}function be(n){let e,s=n[4].title+"",l,t;return{c(){e=q("title"),l=j(s),this.h()},l(a){e=Z(a,"title",{id:!0});var r=O(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=n[4].id)},m(a,r){v(a,e,r),y(e,l)},p(a,r){r&16&&s!==(s=a[4].title+"")&&te(l,s),r&16&&t!==(t=a[4].id)&&g(e,"id",t)},d(a){a&&h(e)}}}function ke(n){let e,s=n[6].desc+"",l,t;return{c(){e=q("desc"),l=j(s),this.h()},l(a){e=Z(a,"desc",{id:!0});var r=O(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=n[6].id)},m(a,r){v(a,e,r),y(e,l)},p(a,r){r&64&&s!==(s=a[6].desc+"")&&te(l,s),r&64&&t!==(t=a[6].id)&&g(e,"id",t)},d(a){a&&h(e)}}}function ve(n){let e,s=n[4].title+"",l,t;return{c(){e=q("title"),l=j(s),this.h()},l(a){e=Z(a,"title",{id:!0});var r=O(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=n[4].id)},m(a,r){v(a,e,r),y(e,l)},p(a,r){r&16&&s!==(s=a[4].title+"")&&te(l,s),r&16&&t!==(t=a[4].id)&&g(e,"id",t)},d(a){a&&h(e)}}}function we(n){let e,s=n[6].desc+"",l,t;return{c(){e=q("desc"),l=j(s),this.h()},l(a){e=Z(a,"desc",{id:!0});var r=O(e);l=I(r,s),r.forEach(h),this.h()},h(){g(e,"id",t=n[6].id)},m(a,r){v(a,e,r),y(e,l)},p(a,r){r&64&&s!==(s=a[6].desc+"")&&te(l,s),r&64&&t!==(t=a[6].id)&&g(e,"id",t)},d(a){a&&h(e)}}}function Ue(n){let e;function s(a,r){return a[3]?Ke:Ze}let l=s(n),t=l(n);return{c(){t.c(),e=S()},l(a){t.l(a),e=S()},m(a,r){t.m(a,r),v(a,e,r)},p(a,[r]){l===(l=s(a))&&t?t.p(a,r):(t.d(1),t=l(a),t&&(t.c(),t.m(e.parentNode,e)))},i:L,o:L,d(a){a&&h(e),t.d(a)}}}function Xe(n,e,s){const l=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let t=de(e,l);const a=Ce("iconCtx")??{},r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:i=a.size||"md"}=e,{role:o=a.role||"img"}=e,{color:d=a.color||"currentColor"}=e,{withEvents:u=a.withEvents||!1}=e,{title:m={}}=e,{strokeWidth:c=a.strokeWidth||"2"}=e,{desc:f={}}=e,w=`${m.id||""} ${f.id||""}`,E=!1,{ariaLabel:T="edit outline"}=e;function b(_){F.call(this,n,_)}function $(_){F.call(this,n,_)}function N(_){F.call(this,n,_)}function G(_){F.call(this,n,_)}function Q(_){F.call(this,n,_)}function K(_){F.call(this,n,_)}function ie(_){F.call(this,n,_)}function oe(_){F.call(this,n,_)}function P(_){F.call(this,n,_)}return n.$$set=_=>{s(12,e=re(re({},e),me(_))),s(11,t=de(e,l)),"size"in _&&s(0,i=_.size),"role"in _&&s(1,o=_.role),"color"in _&&s(2,d=_.color),"withEvents"in _&&s(3,u=_.withEvents),"title"in _&&s(4,m=_.title),"strokeWidth"in _&&s(5,c=_.strokeWidth),"desc"in _&&s(6,f=_.desc),"ariaLabel"in _&&s(7,T=_.ariaLabel)},n.$$.update=()=>{n.$$.dirty&80&&(m.id||f.id?s(8,E=!0):s(8,E=!1))},e=me(e),[i,o,d,u,m,c,f,T,E,r,w,t,e,b,$,N,G,Q,K,ie,oe,P]}class Ge extends ue{constructor(e){super(),ce(this,e,Xe,Ue,fe,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function $e(n,e,s){const l=n.slice();return l[22]=e[s],l}function Qe(n){let e,s,l;return e=new Ge({props:{class:"m-2"}}),{c(){C(e.$$.fragment),s=j("edit")},l(t){B(e.$$.fragment,t),s=I(t,"edit")},m(t,a){D(e,t,a),v(t,s,a),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),J(e,t)}}}function Ye(n){let e,s,l,t,a;return l=new ze({props:{class:"m-1"}}),{c(){e=A("div"),s=A("div"),C(l.$$.fragment),t=j(`
					delete`),this.h()},l(r){e=W(r,"DIV",{class:!0});var i=O(e);s=W(i,"DIV",{class:!0});var o=O(s);B(l.$$.fragment,o),t=I(o,`
					delete`),o.forEach(h),i.forEach(h),this.h()},h(){g(s,"class","flex flex-row items-center"),g(e,"class","text-rose-500")},m(r,i){v(r,e,i),y(e,s),D(l,s,null),y(s,t),a=!0},p:L,i(r){a||(p(l.$$.fragment,r),a=!0)},o(r){k(l.$$.fragment,r),a=!1},d(r){r&&h(e),J(l)}}}function xe(n){let e,s,l;return e=new Ae({props:{class:"m-2"}}),{c(){C(e.$$.fragment),s=j(`
			copy`)},l(t){B(e.$$.fragment,t),s=I(t,`
			copy`)},m(t,a){D(e,t,a),v(t,s,a),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),J(e,t)}}}function Ee(n){let e,s,l,t;e=new x({props:{class:"mr-3",color:"blue",$$slots:{default:[et]},$$scope:{ctx:n}}}),e.$on("click",n[9]);let a=n[1]!=n[2]&&ye(n);return{c(){C(e.$$.fragment),s=R(),a&&a.c(),l=S()},l(r){B(e.$$.fragment,r),s=H(r),a&&a.l(r),l=S()},m(r,i){D(e,r,i),v(r,s,i),a&&a.m(r,i),v(r,l,i),t=!0},p(r,i){const o={};i&33554432&&(o.$$scope={dirty:i,ctx:r}),e.$set(o),r[1]!=r[2]?a?(a.p(r,i),i&6&&p(a,1)):(a=ye(r),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(U(),k(a,1,1,()=>{a=null}),X())},i(r){t||(p(e.$$.fragment,r),p(a),t=!0)},o(r){k(e.$$.fragment,r),k(a),t=!1},d(r){r&&(h(s),h(l)),J(e,r),a&&a.d(r)}}}function et(n){let e,s,l;return e=new Me({props:{class:"m-2"}}),{c(){C(e.$$.fragment),s=j(`
				format and validate JSON`)},l(t){B(e.$$.fragment,t),s=I(t,`
				format and validate JSON`)},m(t,a){D(e,t,a),v(t,s,a),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),J(e,t)}}}function ye(n){let e,s;return e=new x({props:{class:"mr-3",color:"green",$$slots:{default:[tt]},$$scope:{ctx:n}}}),e.$on("click",n[15]),{c(){C(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p(l,t){const a={};t&33554432&&(a.$$scope={dirty:t,ctx:l}),e.$set(a)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){J(e,l)}}}function tt(n){let e,s,l;return e=new Re({props:{class:"m-2"}}),{c(){C(e.$$.fragment),s=j(`
					save`)},l(t){B(e.$$.fragment,t),s=I(t,`
					save`)},m(t,a){D(e,t,a),v(t,s,a),l=!0},p:L,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){t&&h(s),J(e,t)}}}function lt(n){let e,s="Loading ...";return{c(){e=A("h2"),e.textContent=s,this.h()},l(l){e=W(l,"H2",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-wq8tmm"&&(e.textContent=s),this.h()},h(){g(e,"class","text-xl text-center")},m(l,t){v(l,e,t)},p:L,i:L,o:L,d(l){l&&h(e)}}}function rt(n){let e,s,l,t;const a=[at,st],r=[];function i(o,d){return o[3]?0:1}return e=i(n),s=r[e]=a[e](n),{c(){s.c(),l=S()},l(o){s.l(o),l=S()},m(o,d){r[e].m(o,d),v(o,l,d),t=!0},p(o,d){let u=e;e=i(o),e===u?r[e].p(o,d):(U(),k(r[u],1,1,()=>{r[u]=null}),X(),s=r[e],s?s.p(o,d):(s=r[e]=a[e](o),s.c()),p(s,1),s.m(l.parentNode,l))},i(o){t||(p(s),t=!0)},o(o){k(s),t=!1},d(o){o&&h(l),r[e].d(o)}}}function st(n){let e,s,l,t;e=new Ie({props:{data:n[0],rounded:!1,type:n[5]}}),e.$on("refresh",n[17]);let a=n[6]&&Pe(n);return{c(){C(e.$$.fragment),s=R(),a&&a.c(),l=S()},l(r){B(e.$$.fragment,r),s=H(r),a&&a.l(r),l=S()},m(r,i){D(e,r,i),v(r,s,i),a&&a.m(r,i),v(r,l,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[0]),i&32&&(o.type=r[5]),e.$set(o),r[6]?a?(a.p(r,i),i&64&&p(a,1)):(a=Pe(r),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(U(),k(a,1,1,()=>{a=null}),X())},i(r){t||(p(e.$$.fragment,r),p(a),t=!0)},o(r){k(e.$$.fragment,r),k(a),t=!1},d(r){r&&(h(s),h(l)),J(e,r),a&&a.d(r)}}}function at(n){let e,s,l;return{c(){e=A("textarea"),this.h()},l(t){e=W(t,"TEXTAREA",{class:!0}),O(e).forEach(h),this.h()},h(){g(e,"class","dark:bg-[#1E2021] w-full min-h-[70vh]")},m(t,a){v(t,e,a),_e(e,n[2]),s||(l=V(e,"input",n[16]),s=!0)},p(t,a){a&4&&_e(e,t[2])},i:L,o:L,d(t){t&&h(e),s=!1,l()}}}function Pe(n){let e,s,l=he(n[6]),t=[];for(let r=0;r<l.length;r+=1)t[r]=Se($e(n,l,r));const a=r=>k(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=S()},l(r){for(let i=0;i<t.length;i+=1)t[i].l(r);e=S()},m(r,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,i);v(r,e,i),s=!0},p(r,i){if(i&192){l=he(r[6]);let o;for(o=0;o<l.length;o+=1){const d=$e(r,l,o);t[o]?(t[o].p(d,i),p(t[o],1)):(t[o]=Se(d),t[o].c(),p(t[o],1),t[o].m(e.parentNode,e))}for(U(),o=l.length;o<t.length;o+=1)a(o);X()}},i(r){if(!s){for(let i=0;i<l.length;i+=1)p(t[i]);s=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)k(t[i]);s=!1},d(r){r&&h(e),Te(t,r)}}}function nt(n){let e,s,l,t,a,r;return l=new We({props:{class:"m-2"}}),{c(){e=A("a"),s=A("div"),C(l.$$.fragment),t=j(`
										add`),this.h()},l(i){e=W(i,"A",{href:!0});var o=O(e);s=W(o,"DIV",{class:!0});var d=O(s);B(l.$$.fragment,d),t=I(d,`
										add`),d.forEach(h),o.forEach(h),this.h()},h(){g(s,"class","flex flex-row items-center"),g(e,"href",a=ae+"/add?type="+n[22].name+"&apiPostPath="+btoa(n[22].entitySubPath))},m(i,o){v(i,e,o),y(e,s),D(l,s,null),y(s,t),r=!0},p(i,o){(!r||o&64&&a!==(a=ae+"/add?type="+i[22].name+"&apiPostPath="+btoa(i[22].entitySubPath)))&&g(e,"href",a)},i(i){r||(p(l.$$.fragment,i),r=!0)},o(i){k(l.$$.fragment,i),r=!1},d(i){i&&h(e),J(l)}}}function Oe(n){let e,s;return e=new je({props:{data:n[22].data,type:n[22].name,entity:n[22]}}),e.$on("refresh",n[19]),{c(){C(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p(l,t){const a={};t&64&&(a.data=l[22].data),t&64&&(a.type=l[22].name),t&64&&(a.entity=l[22]),e.$set(a)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){J(e,l)}}}function Se(n){let e,s,l=n[22].name+"",t,a,r,i,o,d,u;function m(){return n[18](n[22])}i=new x({props:{color:"alternative",$$slots:{default:[nt]},$$scope:{ctx:n}}}),i.$on("click",m);let c=n[22].data&&n[22].data.length>0&&Oe(n);return{c(){e=A("div"),s=A("h2"),t=j(l),a=R(),r=A("div"),C(i.$$.fragment),o=R(),c&&c.c(),d=S(),this.h()},l(f){e=W(f,"DIV",{class:!0});var w=O(e);s=W(w,"H2",{});var E=O(s);t=I(E,l),E.forEach(h),a=H(w),r=W(w,"DIV",{class:!0});var T=O(r);B(i.$$.fragment,T),T.forEach(h),w.forEach(h),o=H(f),c&&c.l(f),d=S(),this.h()},h(){g(r,"class","flex flex-row m-4 h-8"),g(e,"class","flex flex-row m-4 h-8 items-center")},m(f,w){v(f,e,w),y(e,s),y(s,t),y(e,a),y(e,r),D(i,r,null),v(f,o,w),c&&c.m(f,w),v(f,d,w),u=!0},p(f,w){n=f,(!u||w&64)&&l!==(l=n[22].name+"")&&te(t,l);const E={};w&33554496&&(E.$$scope={dirty:w,ctx:n}),i.$set(E),n[22].data&&n[22].data.length>0?c?(c.p(n,w),w&64&&p(c,1)):(c=Oe(n),c.c(),p(c,1),c.m(d.parentNode,d)):c&&(U(),k(c,1,1,()=>{c=null}),X())},i(f){u||(p(i.$$.fragment,f),p(c),u=!0)},o(f){k(i.$$.fragment,f),k(c),u=!1},d(f){f&&(h(e),h(o),h(d)),J(i),c&&c.d(f)}}}function it(n){let e,s,l,t,a,r,i,o,d,u,m,c;l=new x({props:{class:"mr-2",$$slots:{default:[Qe]},$$scope:{ctx:n}}}),l.$on("click",n[12]),a=new x({props:{class:"h-8 p-2 mr-2",title:"delete",color:"alternative",$$slots:{default:[Ye]},$$scope:{ctx:n}}}),a.$on("click",n[13]),i=new x({props:{color:"alternative",class:"mr-2",$$slots:{default:[xe]},$$scope:{ctx:n}}}),i.$on("click",n[14]);let f=n[3]&&Ee(n);const w=[rt,lt],E=[];function T(b,$){return b[0]?0:1}return u=T(n),m=E[u]=w[u](n),{c(){e=A("div"),s=A("div"),C(l.$$.fragment),t=R(),C(a.$$.fragment),r=R(),C(i.$$.fragment),o=R(),f&&f.c(),d=R(),m.c(),this.h()},l(b){e=W(b,"DIV",{class:!0});var $=O(e);s=W($,"DIV",{class:!0});var N=O(s);B(l.$$.fragment,N),t=H(N),B(a.$$.fragment,N),r=H(N),B(i.$$.fragment,N),o=H(N),f&&f.l(N),N.forEach(h),d=H($),m.l($),$.forEach(h),this.h()},h(){g(s,"class","flex flex-row m-4 h-8"),g(e,"class","mb-2")},m(b,$){v(b,e,$),y(e,s),D(l,s,null),y(s,t),D(a,s,null),y(s,r),D(i,s,null),y(s,o),f&&f.m(s,null),y(e,d),E[u].m(e,null),c=!0},p(b,[$]){const N={};$&33554432&&(N.$$scope={dirty:$,ctx:b}),l.$set(N);const G={};$&33554432&&(G.$$scope={dirty:$,ctx:b}),a.$set(G);const Q={};$&33554432&&(Q.$$scope={dirty:$,ctx:b}),i.$set(Q),b[3]?f?(f.p(b,$),$&8&&p(f,1)):(f=Ee(b),f.c(),p(f,1),f.m(s,null)):f&&(U(),k(f,1,1,()=>{f=null}),X());let K=u;u=T(b),u===K?E[u].p(b,$):(U(),k(E[K],1,1,()=>{E[K]=null}),X(),m=E[u],m?m.p(b,$):(m=E[u]=w[u](b),m.c()),p(m,1),m.m(e,null))},i(b){c||(p(l.$$.fragment,b),p(a.$$.fragment,b),p(i.$$.fragment,b),p(f),p(m),c=!0)},o(b){k(l.$$.fragment,b),k(a.$$.fragment,b),k(i.$$.fragment,b),k(f),k(m),c=!1},d(b){b&&h(e),J(l),J(a),J(i),f&&f.d(),E[u].d()}}}function ot(n,e,s){let l;De(n,Ve,P=>s(11,l=P));let{data:t={}}=e,a="",r="",i=!1,o,d,u,m,c=!1;Je(()=>{c=!0,f()});async function f(){var _;if(!c)return;s(0,t=void 0);const P=new URLSearchParams(window.location.search);s(5,d=P.get("type")??"none"),s(4,o=P.get("id")??"none");{s(0,t=void 0);const ee=await(await le()).findRecord(d,o);s(0,t=ee.data),s(0,t=He(t,qe)),s(2,r=JSON.stringify(t,void 0,2)),s(1,a=r),u=ge.find(z=>z.name==d),s(6,m=ge.filter(z=>{var M;return(M=u==null?void 0:u.subEntities)==null?void 0:M.includes(z.name)}).map(z=>({...z,entitySubPath:`${d}/${o}/${z.name}`})));for(const z of m){const M=await(await le()).findAll(z.name,{},`/${d}/${o}`);if(!M.ok){Y({message:`failed to load ${z.name}`});continue}z.data=(_=M.data)==null?void 0:_.data,s(6,m)}}}async function w(P,_,ee){if(!confirm(`Please confirm deletion of '${ee}'`))return;const M=await(await le()).deleteRecord(P,_);M.ok?(Y({message:"ok",type:"info"}),pe(`${ae}/entities?type=${d}`)):Y({message:`failed to delete. ${M.err}`})}function E(){let P;try{P=JSON.parse(r)}catch(_){Y({message:`Failed to parse JSON. ${_.message}`});return}s(2,r=JSON.stringify(P,void 0,2)),Y({message:"ok",type:"info"})}async function T(){if(confirm("confirm save?")){E();try{const _=await(await le()).updateRecord(d,o,JSON.parse(r));s(3,i=!i),s(3,i),s(0,t=JSON.parse(r)),s(1,a=r)}catch(_){const ee=_.response.data;Y({message:ee.message})}}}const b=()=>{s(3,i=!i)},$=async()=>await w(d,o,t.name??t.id),N=()=>{Fe(a)},G=async()=>await T();function Q(){r=this.value,s(2,r)}const K=()=>{f()},ie=P=>{pe(`${ae}/add?type=${P.name}&apiPostPath=${btoa(P.entitySubPath)}`)},oe=async()=>await f();return n.$$set=P=>{"data"in P&&s(0,t=P.data)},n.$$.update=()=>{n.$$.dirty&2048&&f()},[t,a,r,i,o,d,m,f,w,E,T,l,b,$,N,G,Q,K,ie,oe]}class ft extends ue{constructor(e){super(),ce(this,e,ot,it,fe,{data:0})}}function ut(n){let e,s;return e=new ft({}),{c(){C(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,t){D(e,l,t),s=!0},p:L,i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){J(e,l)}}}class Pt extends ue{constructor(e){super(),ce(this,e,null,ut,fe,{})}}export{Pt as component};
